{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"ROS Docs ROS Docs\u306b\u3064\u3044\u3066 ROS Docs\u306f\u3001ROS\u306e\u5b66\u7fd2\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002 \u4fee\u6b63\u4f9d\u983c\u7b49 Github\u306eRepo\u306b Issues \u3092\u3042\u3052\u308b\u3002 \u305d\u306e\u4ed6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 LoRa Docs Android Things Docs DonkeyCar Docs Denbun Docs Circuit Docs Swift Docs Keras Docs NRF Docs DeviceWebAPI Docs","title":"ROS Docs"},{"location":"#ros-docs","text":"","title":"ROS Docs"},{"location":"#ros-docs_1","text":"ROS Docs\u306f\u3001ROS\u306e\u5b66\u7fd2\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002","title":"ROS Docs\u306b\u3064\u3044\u3066"},{"location":"#_1","text":"Github\u306eRepo\u306b Issues \u3092\u3042\u3052\u308b\u3002","title":"\u4fee\u6b63\u4f9d\u983c\u7b49"},{"location":"#_2","text":"LoRa Docs Android Things Docs DonkeyCar Docs Denbun Docs Circuit Docs Swift Docs Keras Docs NRF Docs DeviceWebAPI Docs","title":"\u305d\u306e\u4ed6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"},{"location":"01.bom/01.bom/","text":"BOM 1/10 ROS Kit Jetson TX2\u95a2\u9023 \u30d1\u30fc\u30c4\u540d \u30e1\u30fc\u30ab\u30fc Shop ASG001 https://www.arrow.com/en/products/asg001/connect-tech-inc XBG201 Connect Tech Inc. https://www.arrow.com/en/products/xbg201/connect-tech-inc TX2 Module NVIDIA https://www.arrow.com/en/products/900-83310-0001-000/nvidia mSATA\u5ef6\u9577\u30b1\u30fc\u30d6\u30eb Amazon SSD(250G) Amazon \u53c2\u8003 \u30d1\u30fc\u30c4\u540d \u30ea\u30f3\u30af AN310 https://www.aetina.com/products-detail.php?i=252 X-Carrier https://coloradoengineering.com/standard-products/x-carrier/ RTSO-9001 https://www.newbecca.com/product/558166554448 ximea https://www.ximea.com/en/products/xilab-application-specific-custom-oem/carrier-boards-for-nvidia-jetson-and-cameras JetsonPC https://www.avermedia.com/professional/product/tegra_pc_ex731/overview","title":"BOM"},{"location":"01.bom/01.bom/#bom","text":"","title":"BOM"},{"location":"01.bom/01.bom/#110-ros-kit","text":"Jetson TX2\u95a2\u9023 \u30d1\u30fc\u30c4\u540d \u30e1\u30fc\u30ab\u30fc Shop ASG001 https://www.arrow.com/en/products/asg001/connect-tech-inc XBG201 Connect Tech Inc. https://www.arrow.com/en/products/xbg201/connect-tech-inc TX2 Module NVIDIA https://www.arrow.com/en/products/900-83310-0001-000/nvidia mSATA\u5ef6\u9577\u30b1\u30fc\u30d6\u30eb Amazon SSD(250G) Amazon","title":"1/10 ROS Kit"},{"location":"01.bom/01.bom/#_1","text":"\u30d1\u30fc\u30c4\u540d \u30ea\u30f3\u30af AN310 https://www.aetina.com/products-detail.php?i=252 X-Carrier https://coloradoengineering.com/standard-products/x-carrier/ RTSO-9001 https://www.newbecca.com/product/558166554448 ximea https://www.ximea.com/en/products/xilab-application-specific-custom-oem/carrier-boards-for-nvidia-jetson-and-cameras JetsonPC https://www.avermedia.com/professional/product/tegra_pc_ex731/overview","title":"\u53c2\u8003"},{"location":"02.SLAM(Nano)/01.ros/","text":"Jetson Nano\u306bROS\u3092\u69cb\u7bc9 Jetson Nano\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"Jetson Nano\u306bROS\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/01.ros/#jetson-nanoros","text":"Jetson Nano\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"Jetson Nano\u306bROS\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/02.cartographer/","text":"Jetson Nano\u306bCartographer\u3092\u69cb\u7bc9 Cartographer\u95a2\u9023\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ apt-get install ros-melodic-cartographer ros-melodic-cartographer-ros ros-melodic-cartographer-ros-msgs ros-melodic-cartographer-rviz Cartographer\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u6301\u3063\u3066\u304f\u308b 1 2 $ cd ~/catkin_ws/src $ git clone https://github.com/ros-japan-users/cartographer_example","title":"Jetson Nano\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/02.cartographer/#jetson-nanocartographer","text":"Cartographer\u95a2\u9023\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ apt-get install ros-melodic-cartographer ros-melodic-cartographer-ros ros-melodic-cartographer-ros-msgs ros-melodic-cartographer-rviz Cartographer\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u6301\u3063\u3066\u304f\u308b 1 2 $ cd ~/catkin_ws/src $ git clone https://github.com/ros-japan-users/cartographer_example","title":"Jetson Nano\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/03.ydlidar/","text":"Jetson Nano\u306bYDLiDAR Build 1 2 3 $ cd ~/catkin_ws/src $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ~/catkin_ws scan_msg.scan_time, scan_msg.time_increment\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5408\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001YDLiDAR\u306eIssue https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002 /catkin_ws/src/ydlidar/src/ydlidar_node.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ... while ( ros :: ok ()) { bool hardError ; LaserScan scan ; //\u539f\u59cb\u6fc0\u5149\u6570\u636e if ( laser . doProcessSimple ( scan , hardError )){ sensor_msgs :: LaserScan scan_msg ; ros :: Time start_scan_time ; start_scan_time . sec = scan . system_time_stamp / 1000000000ul ; start_scan_time . nsec = scan . system_time_stamp % 1000000000ul ; scan_msg . header . stamp = start_scan_time ; scan_msg . header . frame_id = frame_id ; scan_msg . angle_min = scan . config . min_angle ; scan_msg . angle_max = scan . config . max_angle ; scan_msg . angle_increment = scan . config . ang_increment ; scan_msg . scan_time = scan . config . scan_time / 1000000000.0 ; scan_msg . time_increment = scan . config . time_increment / 1000000000.0 ; scan_msg . range_min = scan . config . min_range ; scan_msg . range_max = scan . config . max_range ; scan_msg . ranges = scan . ranges ; scan_msg . intensities = scan . intensities ; scan_pub . publish ( scan_msg ); } rate . sleep (); ros :: spinOnce (); } ... Build 1 2 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja udev 1 2 3 $ cd ~/ros_catkin_ws/src/ydlidar/startup $ chmod 777 * $ sudo sh initenv.sh","title":"Jetson Nano\u306bYDLiDAR"},{"location":"02.SLAM(Nano)/03.ydlidar/#jetson-nanoydlidar","text":"","title":"Jetson Nano\u306bYDLiDAR"},{"location":"02.SLAM(Nano)/03.ydlidar/#build","text":"1 2 3 $ cd ~/catkin_ws/src $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ~/catkin_ws scan_msg.scan_time, scan_msg.time_increment\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5408\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001YDLiDAR\u306eIssue https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002 /catkin_ws/src/ydlidar/src/ydlidar_node.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ... while ( ros :: ok ()) { bool hardError ; LaserScan scan ; //\u539f\u59cb\u6fc0\u5149\u6570\u636e if ( laser . doProcessSimple ( scan , hardError )){ sensor_msgs :: LaserScan scan_msg ; ros :: Time start_scan_time ; start_scan_time . sec = scan . system_time_stamp / 1000000000ul ; start_scan_time . nsec = scan . system_time_stamp % 1000000000ul ; scan_msg . header . stamp = start_scan_time ; scan_msg . header . frame_id = frame_id ; scan_msg . angle_min = scan . config . min_angle ; scan_msg . angle_max = scan . config . max_angle ; scan_msg . angle_increment = scan . config . ang_increment ; scan_msg . scan_time = scan . config . scan_time / 1000000000.0 ; scan_msg . time_increment = scan . config . time_increment / 1000000000.0 ; scan_msg . range_min = scan . config . min_range ; scan_msg . range_max = scan . config . max_range ; scan_msg . ranges = scan . ranges ; scan_msg . intensities = scan . intensities ; scan_pub . publish ( scan_msg ); } rate . sleep (); ros :: spinOnce (); } ... Build 1 2 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja","title":"Build"},{"location":"02.SLAM(Nano)/03.ydlidar/#udev","text":"1 2 3 $ cd ~/ros_catkin_ws/src/ydlidar/startup $ chmod 777 * $ sudo sh initenv.sh","title":"udev"},{"location":"02.SLAM(Nano)/04.setting/","text":"YLiDAR\u3068Cartographer\u9023\u643a YDLiDAR (Jetson nano\u5074) ~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 <launch> <node name= \"ydlidar_node\" pkg= \"ydlidar\" type= \"ydlidar_node\" output= \"screen\" > <param name= \"port\" type= \"string\" value= \"/dev/ydlidar\" /> <param name= \"baudrate\" type= \"int\" value= \"128000\" /> <param name= \"frame_id\" type= \"string\" value= \"laser\" /> <param name= \"angle_fixed\" type= \"bool\" value= \"true\" /> <param name= \"low_exposure\" type= \"bool\" value= \"false\" /> <param name= \"heartbeat\" type= \"bool\" value= \"false\" /> <param name= \"resolution_fixed\" type= \"bool\" value= \"true\" /> <param name= \"angle_min\" type= \"double\" value= \"-180\" /> <param name= \"angle_max\" type= \"double\" value= \"180\" /> <param name= \"range_min\" type= \"double\" value= \"0.08\" /> <param name= \"range_max\" type= \"double\" value= \"16.0\" /> <param name= \"ignore_array\" type= \"string\" value= \"\" /> <param name= \"samp_rate\" type= \"int\" value= \"9\" /> <param name= \"frequency\" type= \"double\" value= \"15\" /> </node> <node pkg= \"tf\" type= \"static_transform_publisher\" name= \"base_to_laser\" args= \"0.0 0.0 0.18 0 0.0 0.0 base_link laser 100\" > </node> </launch> Cartographer (Jetson nano\u5074) ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_revo_lds.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"cartographer_node\" pkg= \"cartographer_ros\" type= \"cartographer_node\" args= \" -configuration_directory $(find cartographer_ros)/configuration_files -configuration_basename revo_lds.lua\" output= \"screen\" > </node> <node name= \"robot_state_publisher\" pkg= \"robot_state_publisher\" type= \"robot_state_publisher\" /> <node name= \"cartographer_occupancy_grid_node\" pkg= \"cartographer_ros\" type= \"cartographer_occupancy_grid_node\" args= \"-resolution 0.05\" > </node> </launch> ~/catkin_ws/src/cartographer_ros/cartographer_ros/configuration_files/revo_lds.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 include \"map_builder.lua\" include \"trajectory_builder.lua\" options = { map_builder = MAP_BUILDER , trajectory_builder = TRAJECTORY_BUILDER , map_frame = \"map\" , tracking_frame = \"laser\" , published_frame = \"laser\" , odom_frame = \"odom\" , provide_odom_frame = false , use_odometry = false , publish_frame_projected_to_2d = false , use_nav_sat = false , use_landmarks = false , num_laser_scans = 1 , num_multi_echo_laser_scans = 0 , num_subdivisions_per_laser_scan = 1 , num_point_clouds = 0 , lookup_transform_timeout_sec = 0.2 , submap_publish_period_sec = 0.3 , pose_publish_period_sec = 5e-3 , trajectory_publish_period_sec = 30e-3 , rangefinder_sampling_ratio = 1. , odometry_sampling_ratio = 1. , imu_sampling_ratio = 1. , landmarks_sampling_ratio = 1. , fixed_frame_pose_sampling_ratio = 1. , } MAP_BUILDER . use_trajectory_builder_2d = true TRAJECTORY_BUILDER_2D . submaps . num_range_data = 35 TRAJECTORY_BUILDER_2D . min_range = 0.08 TRAJECTORY_BUILDER_2D . max_range = 16. TRAJECTORY_BUILDER_2D . missing_data_ray_length = 1. TRAJECTORY_BUILDER_2D . use_imu_data = false TRAJECTORY_BUILDER_2D . use_online_correlative_scan_matching = true TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . linear_search_window = 0.1 TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . translation_delta_cost_weight = 10. TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . rotation_delta_cost_weight = 1e-1 POSE_GRAPH . optimization_problem . huber_scale = 1e2 POSE_GRAPH . optimize_every_n_nodes = 35 POSE_GRAPH . constraint_builder . min_score = 0.65 return options \u8d77\u52d5\u7528 ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch> Build 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a 1 $ export ROS_MASTER_URI = http://\u81ea\u5206\u306eIP:11311 \u8d77\u52d5 1 2 3 4 $ roscore $ roslaunch ydlidar lidar.launch $ roslaunch cartographer_ros demo_revo_lds.launch $ roslaunch cartographer_ros demo_rviz.launch \u30b0\u30e9\u30d5 \u30b0\u30e9\u30d5\u3092\u8868\u793a 1 $ rosrun rqt_graph rqt_graph \u4ed6\u306ePC\u304b\u3089\u306e\u63a5\u7d9a \u74b0\u5883\u7de8\u6570 1 2 $ export ROS_MASTER_URI = http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 $ export ROS_ID = \u81ea\u5206\u306eIP rviz\u3092\u8d77\u52d5 1 $ roslaunch cartographer_ros demo_rviz.launch \u53c2\u8003 https://www.youtube.com/watch?v=4ipDP9dIYYs https://qiita.com/PINTO/items/4845c438cac05eda4d1e https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/","title":"YLiDAR\u3068Cartographer\u9023\u643a"},{"location":"02.SLAM(Nano)/04.setting/#ylidarcartographer","text":"","title":"YLiDAR\u3068Cartographer\u9023\u643a"},{"location":"02.SLAM(Nano)/04.setting/#ydlidar-jetson-nano","text":"~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 <launch> <node name= \"ydlidar_node\" pkg= \"ydlidar\" type= \"ydlidar_node\" output= \"screen\" > <param name= \"port\" type= \"string\" value= \"/dev/ydlidar\" /> <param name= \"baudrate\" type= \"int\" value= \"128000\" /> <param name= \"frame_id\" type= \"string\" value= \"laser\" /> <param name= \"angle_fixed\" type= \"bool\" value= \"true\" /> <param name= \"low_exposure\" type= \"bool\" value= \"false\" /> <param name= \"heartbeat\" type= \"bool\" value= \"false\" /> <param name= \"resolution_fixed\" type= \"bool\" value= \"true\" /> <param name= \"angle_min\" type= \"double\" value= \"-180\" /> <param name= \"angle_max\" type= \"double\" value= \"180\" /> <param name= \"range_min\" type= \"double\" value= \"0.08\" /> <param name= \"range_max\" type= \"double\" value= \"16.0\" /> <param name= \"ignore_array\" type= \"string\" value= \"\" /> <param name= \"samp_rate\" type= \"int\" value= \"9\" /> <param name= \"frequency\" type= \"double\" value= \"15\" /> </node> <node pkg= \"tf\" type= \"static_transform_publisher\" name= \"base_to_laser\" args= \"0.0 0.0 0.18 0 0.0 0.0 base_link laser 100\" > </node> </launch>","title":"YDLiDAR (Jetson nano\u5074)"},{"location":"02.SLAM(Nano)/04.setting/#cartographer-jetson-nano","text":"~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_revo_lds.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"cartographer_node\" pkg= \"cartographer_ros\" type= \"cartographer_node\" args= \" -configuration_directory $(find cartographer_ros)/configuration_files -configuration_basename revo_lds.lua\" output= \"screen\" > </node> <node name= \"robot_state_publisher\" pkg= \"robot_state_publisher\" type= \"robot_state_publisher\" /> <node name= \"cartographer_occupancy_grid_node\" pkg= \"cartographer_ros\" type= \"cartographer_occupancy_grid_node\" args= \"-resolution 0.05\" > </node> </launch> ~/catkin_ws/src/cartographer_ros/cartographer_ros/configuration_files/revo_lds.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 include \"map_builder.lua\" include \"trajectory_builder.lua\" options = { map_builder = MAP_BUILDER , trajectory_builder = TRAJECTORY_BUILDER , map_frame = \"map\" , tracking_frame = \"laser\" , published_frame = \"laser\" , odom_frame = \"odom\" , provide_odom_frame = false , use_odometry = false , publish_frame_projected_to_2d = false , use_nav_sat = false , use_landmarks = false , num_laser_scans = 1 , num_multi_echo_laser_scans = 0 , num_subdivisions_per_laser_scan = 1 , num_point_clouds = 0 , lookup_transform_timeout_sec = 0.2 , submap_publish_period_sec = 0.3 , pose_publish_period_sec = 5e-3 , trajectory_publish_period_sec = 30e-3 , rangefinder_sampling_ratio = 1. , odometry_sampling_ratio = 1. , imu_sampling_ratio = 1. , landmarks_sampling_ratio = 1. , fixed_frame_pose_sampling_ratio = 1. , } MAP_BUILDER . use_trajectory_builder_2d = true TRAJECTORY_BUILDER_2D . submaps . num_range_data = 35 TRAJECTORY_BUILDER_2D . min_range = 0.08 TRAJECTORY_BUILDER_2D . max_range = 16. TRAJECTORY_BUILDER_2D . missing_data_ray_length = 1. TRAJECTORY_BUILDER_2D . use_imu_data = false TRAJECTORY_BUILDER_2D . use_online_correlative_scan_matching = true TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . linear_search_window = 0.1 TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . translation_delta_cost_weight = 10. TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . rotation_delta_cost_weight = 1e-1 POSE_GRAPH . optimization_problem . huber_scale = 1e2 POSE_GRAPH . optimize_every_n_nodes = 35 POSE_GRAPH . constraint_builder . min_score = 0.65 return options \u8d77\u52d5\u7528 ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch> Build 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a 1 $ export ROS_MASTER_URI = http://\u81ea\u5206\u306eIP:11311 \u8d77\u52d5 1 2 3 4 $ roscore $ roslaunch ydlidar lidar.launch $ roslaunch cartographer_ros demo_revo_lds.launch $ roslaunch cartographer_ros demo_rviz.launch","title":"Cartographer (Jetson nano\u5074)"},{"location":"02.SLAM(Nano)/04.setting/#_1","text":"\u30b0\u30e9\u30d5\u3092\u8868\u793a 1 $ rosrun rqt_graph rqt_graph","title":"\u30b0\u30e9\u30d5"},{"location":"02.SLAM(Nano)/04.setting/#pc","text":"\u74b0\u5883\u7de8\u6570 1 2 $ export ROS_MASTER_URI = http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 $ export ROS_ID = \u81ea\u5206\u306eIP rviz\u3092\u8d77\u52d5 1 $ roslaunch cartographer_ros demo_rviz.launch","title":"\u4ed6\u306ePC\u304b\u3089\u306e\u63a5\u7d9a"},{"location":"02.SLAM(Nano)/04.setting/#_2","text":"https://www.youtube.com/watch?v=4ipDP9dIYYs https://qiita.com/PINTO/items/4845c438cac05eda4d1e https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/","title":"\u53c2\u8003"},{"location":"03.SLAM(TX2)/01.ros/","text":"TX2\u306bROS\u3092\u69cb\u7bc9 TX2\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop-full rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"TX2\u306bROS\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/01.ros/#tx2ros","text":"TX2\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop-full rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"TX2\u306bROS\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/02.cartographer/","text":"TX2\u306bCartographer\u3092\u69cb\u7bc9 Cartographer\u95a2\u9023\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 apt-get install ros-melodic-cartographer ros-melodic-cartographer-ros ros-melodic-cartographer-ros-msgs ros-melodic-cartographer-rviz Cartographer\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u6301\u3063\u3066\u304f\u308b 1 2 cd ~/catkin_ws/src git clone https://github.com/ros-japan-users/cartographer_example","title":"TX2\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/02.cartographer/#tx2cartographer","text":"Cartographer\u95a2\u9023\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 apt-get install ros-melodic-cartographer ros-melodic-cartographer-ros ros-melodic-cartographer-ros-msgs ros-melodic-cartographer-rviz Cartographer\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u6301\u3063\u3066\u304f\u308b 1 2 cd ~/catkin_ws/src git clone https://github.com/ros-japan-users/cartographer_example","title":"TX2\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/03.ydlidar_install/","text":"TX2\u306bYDLiDAR Build 1 2 3 cd ~/catkin_ws/src git clone https://github.com/EAIBOT/ydlidar.git cd .. scan_msg.scan_time, scan_msg.time_increment\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5408\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001YDLiDAR\u306eIssue https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002 vi ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp diff\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c: 1 2 3 4 5 6 7 8 9 10 11 12 13 diff -u ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp --- /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org 2019-04-17 11:52:17.775006029 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp 2019-04-17 11:52:32.206993273 +0900 @@ -131,8 +131,8 @@ scan_msg.angle_min = scan.config.min_angle; scan_msg.angle_max = scan.config.max_angle; scan_msg.angle_increment = scan.config.ang_increment; - scan_msg.scan_time = scan.config.scan_time; - scan_msg.time_increment = scan.config.time_increment; + scan_msg.scan_time = scan.config.scan_time/1000000000.0; + scan_msg.time_increment = scan.config.time_increment/1000000000.0; scan_msg.range_min = scan.config.min_range; scan_msg.range_max = scan.config.max_range; lidar.launch\u3092\u7de8\u96c6 1 vi ~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 --- /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch.org 2019-04-17 13:59:25.209638390 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch 2019-04-17 14:54:00.263965585 +0900 @@ -9,12 +9,12 @@ <param name=\"reversion\" type=\"bool\" value=\"false\"/> <param name=\"angle_min\" type=\"double\" value=\"-180\" /> <param name=\"angle_max\" type=\"double\" value=\"180\" /> - <param name=\"range_min\" type=\"double\" value=\"0.1\" /> + <param name=\"range_min\" type=\"double\" value=\"0.08\" /> <param name=\"range_max\" type=\"double\" value=\"16.0\" /> <param name=\"ignore_array\" type=\"string\" value=\"\" /> <param name=\"samp_rate\" type=\"int\" value=\"9\"/> - <param name=\"frequency\" type=\"double\" value=\"7\"/> + <param name=\"frequency\" type=\"double\" value=\"15\"/> </node> - <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_link_to_laser4\" - args=\"0.2245 0.0 0.2 0.0 0.0 0.0 /base_footprint /laser_frame 40\" /> + <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_to_laser\" + args=\"0.0 0.0 0.18 0.0 0.0 0.0 /base_link /laser_frame 100\" /> </launch> Build 1 2 cd ~/catkin_ws catkin_make_isolated --install --use-ninja Add device configration 1 sudo ~/catkin_ws/src/ydlidar/startup/initenv.sh Install YDLIDAR Cartographer-ROS Cartographer\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 mkdir ~/github cd ~/github git clone https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS cd YDLIDAR-Cartographer-ROS/parameters/ sudo cp *.launch /opt/ros/melodic/share/cartographer_ros/launch/ sudo cp *.lua /opt/ros/melodic/share/cartographer_ros/configuration_files/","title":"TX2\u306bYDLiDAR"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#tx2ydlidar","text":"","title":"TX2\u306bYDLiDAR"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#build","text":"1 2 3 cd ~/catkin_ws/src git clone https://github.com/EAIBOT/ydlidar.git cd .. scan_msg.scan_time, scan_msg.time_increment\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5408\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001YDLiDAR\u306eIssue https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002 vi ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp diff\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c: 1 2 3 4 5 6 7 8 9 10 11 12 13 diff -u ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp --- /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org 2019-04-17 11:52:17.775006029 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp 2019-04-17 11:52:32.206993273 +0900 @@ -131,8 +131,8 @@ scan_msg.angle_min = scan.config.min_angle; scan_msg.angle_max = scan.config.max_angle; scan_msg.angle_increment = scan.config.ang_increment; - scan_msg.scan_time = scan.config.scan_time; - scan_msg.time_increment = scan.config.time_increment; + scan_msg.scan_time = scan.config.scan_time/1000000000.0; + scan_msg.time_increment = scan.config.time_increment/1000000000.0; scan_msg.range_min = scan.config.min_range; scan_msg.range_max = scan.config.max_range; lidar.launch\u3092\u7de8\u96c6 1 vi ~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 --- /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch.org 2019-04-17 13:59:25.209638390 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch 2019-04-17 14:54:00.263965585 +0900 @@ -9,12 +9,12 @@ <param name=\"reversion\" type=\"bool\" value=\"false\"/> <param name=\"angle_min\" type=\"double\" value=\"-180\" /> <param name=\"angle_max\" type=\"double\" value=\"180\" /> - <param name=\"range_min\" type=\"double\" value=\"0.1\" /> + <param name=\"range_min\" type=\"double\" value=\"0.08\" /> <param name=\"range_max\" type=\"double\" value=\"16.0\" /> <param name=\"ignore_array\" type=\"string\" value=\"\" /> <param name=\"samp_rate\" type=\"int\" value=\"9\"/> - <param name=\"frequency\" type=\"double\" value=\"7\"/> + <param name=\"frequency\" type=\"double\" value=\"15\"/> </node> - <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_link_to_laser4\" - args=\"0.2245 0.0 0.2 0.0 0.0 0.0 /base_footprint /laser_frame 40\" /> + <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_to_laser\" + args=\"0.0 0.0 0.18 0.0 0.0 0.0 /base_link /laser_frame 100\" /> </launch> Build 1 2 cd ~/catkin_ws catkin_make_isolated --install --use-ninja","title":"Build"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#add-device-configration","text":"1 sudo ~/catkin_ws/src/ydlidar/startup/initenv.sh","title":"Add device configration"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#install-ydlidar-cartographer-ros","text":"Cartographer\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 mkdir ~/github cd ~/github git clone https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS cd YDLIDAR-Cartographer-ROS/parameters/ sudo cp *.launch /opt/ros/melodic/share/cartographer_ros/launch/ sudo cp *.lua /opt/ros/melodic/share/cartographer_ros/configuration_files/","title":"Install YDLIDAR Cartographer-ROS"},{"location":"03.SLAM(TX2)/04.online_slam/","text":"Online SLAM \u30aa\u30f3\u30e9\u30a4\u30f3SLAM\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0SLAM\u306e\u3053\u3068\u3067\u3059\u3002 Cartographer\u3067\u306fYDLIDAR\u306e\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u4f7f\u3044\u307e\u3059\u3002 \u3053\u306e\u65b9\u6cd5\u3067\u306fpbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u51fa\u6765\u306a\u3044\u305f\u3081\u3001Cartographer\u3067\u30de\u30c3\u30d7\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u884c\u3046\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002 ros map\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u3002 \u8d77\u52d5 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./01.online_slam.sh rviz 1 ./02.rviz.sh \u8d70\u884c \u5ba4\u5185\u3092\u79fb\u52d5\u3057\u3066\u30de\u30c3\u30d7\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002 ros map\u4fdd\u5b58 gridmap_2d.pgm \u3068gridmap_2d.yaml`\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./03.save_to_map.sh gridmap_2d.yaml 1 2 3 4 5 6 image: ./map/gridmap_2d.pgm resolution: 0.050000 origin: [-8.979110, -11.103004, 0.000000] negate: 0 occupied_thresh: 0.65 free_thresh: 0.196 \u30b0\u30e9\u30d5\u8868\u793a \u30ce\u30fc\u30c9\u3092\u30b0\u30e9\u30d5\u3067\u8868\u793a 1 rosrun rqt_graph rqt_graph \u8aac\u660e 01.online_slam.sh 01.online_slam.sh \u3067\u306f\u3044\u304f\u3064\u304b\u306e\u5b9f\u884c\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002 \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206\u306eIP:11311 export ROS_IP=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until roscore launch online SLAM\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d.launch 02.rviz.sh \u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u3059\u308b\u5834\u5408\u306f\u3001export\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002 \u3053\u306e\u5834\u5408\u300102.rviz.sh\u306f\u4ed6\u306ePC\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d_rviz.launch \u4ed6\u306ePC\u306eROS\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001RViz\u306f md5sum Error \u304c\u767a\u751f\u3057\u3066\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 https://answers.ros.org/question/261071/rviz-client-md5sum-error/ 03.save_to_map.sh \u8d70\u884c\u5f8c\u3001ros map\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 gridmap_2d.pgm \u3068gridmap_2d.yaml \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002<br> pgm\u30d5\u30a1\u30a4\u30eb\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u3001 gimp`\u3092\u4f7f\u3063\u3066png\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 mkdir map \u4ed6\u306ePC\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u3001export\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash ros map\u3068\u3057\u3066\u4fdd\u5b58 1 2 3 DATE=`date '+%Y%m%d%H%M%S'` rosrun map_server map_saver -f ./map/gridmap_2d_ ${ DATE } \u5408\u6210\u753b\u50cf\uff1a","title":"Online SLAM"},{"location":"03.SLAM(TX2)/04.online_slam/#online-slam","text":"\u30aa\u30f3\u30e9\u30a4\u30f3SLAM\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0SLAM\u306e\u3053\u3068\u3067\u3059\u3002 Cartographer\u3067\u306fYDLIDAR\u306e\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u306b\u4f7f\u3044\u307e\u3059\u3002 \u3053\u306e\u65b9\u6cd5\u3067\u306fpbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u51fa\u6765\u306a\u3044\u305f\u3081\u3001Cartographer\u3067\u30de\u30c3\u30d7\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u884c\u3046\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002 ros map\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u3002","title":"Online SLAM"},{"location":"03.SLAM(TX2)/04.online_slam/#_1","text":"1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./01.online_slam.sh","title":"\u8d77\u52d5"},{"location":"03.SLAM(TX2)/04.online_slam/#rviz","text":"1 ./02.rviz.sh","title":"rviz"},{"location":"03.SLAM(TX2)/04.online_slam/#_2","text":"\u5ba4\u5185\u3092\u79fb\u52d5\u3057\u3066\u30de\u30c3\u30d7\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002","title":"\u8d70\u884c"},{"location":"03.SLAM(TX2)/04.online_slam/#ros-map","text":"gridmap_2d.pgm \u3068gridmap_2d.yaml`\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./03.save_to_map.sh gridmap_2d.yaml 1 2 3 4 5 6 image: ./map/gridmap_2d.pgm resolution: 0.050000 origin: [-8.979110, -11.103004, 0.000000] negate: 0 occupied_thresh: 0.65 free_thresh: 0.196","title":"ros map\u4fdd\u5b58"},{"location":"03.SLAM(TX2)/04.online_slam/#_3","text":"\u30ce\u30fc\u30c9\u3092\u30b0\u30e9\u30d5\u3067\u8868\u793a 1 rosrun rqt_graph rqt_graph","title":"\u30b0\u30e9\u30d5\u8868\u793a"},{"location":"03.SLAM(TX2)/04.online_slam/#_4","text":"","title":"\u8aac\u660e"},{"location":"03.SLAM(TX2)/04.online_slam/#01online_slamsh","text":"01.online_slam.sh \u3067\u306f\u3044\u304f\u3064\u304b\u306e\u5b9f\u884c\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002 \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206\u306eIP:11311 export ROS_IP=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until roscore launch online SLAM\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d.launch","title":"01.online_slam.sh"},{"location":"03.SLAM(TX2)/04.online_slam/#02rvizsh","text":"\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u3059\u308b\u5834\u5408\u306f\u3001export\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002 \u3053\u306e\u5834\u5408\u300102.rviz.sh\u306f\u4ed6\u306ePC\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d_rviz.launch \u4ed6\u306ePC\u306eROS\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001RViz\u306f md5sum Error \u304c\u767a\u751f\u3057\u3066\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 https://answers.ros.org/question/261071/rviz-client-md5sum-error/","title":"02.rviz.sh"},{"location":"03.SLAM(TX2)/04.online_slam/#03save_to_mapsh","text":"\u8d70\u884c\u5f8c\u3001ros map\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 gridmap_2d.pgm \u3068gridmap_2d.yaml \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002<br> pgm\u30d5\u30a1\u30a4\u30eb\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u3001 gimp`\u3092\u4f7f\u3063\u3066png\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 mkdir map \u4ed6\u306ePC\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306f\u3001export\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash ros map\u3068\u3057\u3066\u4fdd\u5b58 1 2 3 DATE=`date '+%Y%m%d%H%M%S'` rosrun map_server map_saver -f ./map/gridmap_2d_ ${ DATE } \u5408\u6210\u753b\u50cf\uff1a","title":"03.save_to_map.sh"},{"location":"03.SLAM(TX2)/05.offline_slam/","text":"Offline SLAM \u30aa\u30d5\u30e9\u30a4\u30f3SLAM\u306f\u3001\u4e8b\u524d\u306b\u4fdd\u5b58\u3057\u3066\u3042\u308brosbag\u3092\u4f7f\u3063\u3066\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30de\u30c3\u30d7\u3092pbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u3067\u304d\u308b\u305f\u3081\u3001\u30de\u30c3\u30d7\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 rosbag\u306b\u8a18\u9332\u958b\u59cb YDLIDAR\u306e\u30c8\u30d4\u30c3\u30af\u3092rosbag\u306b\u8a18\u9332\u3057\u307e\u3059\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./04.ydlidar_rosbag_record.sh myroom.bag myroom.bag \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 \u8d70\u884c \u8a18\u9332\u3057\u306a\u304c\u3089\u5ba4\u5185\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002 \u5ba4\u5185\u3092\u4e00\u5468\u3057\u305f\u3089\u3001 Ctrol + c \u3067\u8a18\u9332\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002 pbstream\u4fdd\u5b58 rosbag\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3063\u30662D\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 1 ./offline_slam.sh myroom.bag myroom.bag.pbstream \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 \u8aac\u660e 04.ydlidar_rosbag_record.sh \u5f15\u6570\u306b\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./04.ydlidar_rosbag_record.sh output.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./ydlidar_rosbag_record.sh output.bag source ${ HOME } /catkin_ws/devel/setup.bash case $1 in /*\\.bag) OUTPUT_BAG=$1 ;; *.bag) OUTPUT_BAG= $PWD /$1 esac echo ${ OUTPUT_BAG } roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch -a \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30c8\u30d4\u30c3\u30af\u5168\u3066\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58 1 rosrun rosbag record -a -O $OUTPUT_BAG 05.offline_slam.sh \u5f15\u6570\u306b\u5165\u529brosbag\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./05.offline_slam.sh input.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./offline_slam.sh input.bag #https://www.ncnynl.com/archives/201811/2789.html case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } cartographer-ros\u3092\u5229\u7528\u3059\u308b\u306e\u3067bash\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002 1 source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch offline SLAM\u8d77\u52d5 1 roslaunch cartographer_ros offline_ydlidar_2d.launch bag_filenames:= ${ INPUT_BAG } pbstream\u4fdd\u5b58 1 rosservice call /write_state ${ INPUT_BAG } .pbstream pbstream\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001rosbag\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001online SLAM\u304b\u3089\u306f\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002","title":"Offline SLAM"},{"location":"03.SLAM(TX2)/05.offline_slam/#offline-slam","text":"\u30aa\u30d5\u30e9\u30a4\u30f3SLAM\u306f\u3001\u4e8b\u524d\u306b\u4fdd\u5b58\u3057\u3066\u3042\u308brosbag\u3092\u4f7f\u3063\u3066\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30de\u30c3\u30d7\u3092pbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u3067\u304d\u308b\u305f\u3081\u3001\u30de\u30c3\u30d7\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002","title":"Offline SLAM"},{"location":"03.SLAM(TX2)/05.offline_slam/#rosbag","text":"YDLIDAR\u306e\u30c8\u30d4\u30c3\u30af\u3092rosbag\u306b\u8a18\u9332\u3057\u307e\u3059\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./04.ydlidar_rosbag_record.sh myroom.bag myroom.bag \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002","title":"rosbag\u306b\u8a18\u9332\u958b\u59cb"},{"location":"03.SLAM(TX2)/05.offline_slam/#_1","text":"\u8a18\u9332\u3057\u306a\u304c\u3089\u5ba4\u5185\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002 \u5ba4\u5185\u3092\u4e00\u5468\u3057\u305f\u3089\u3001 Ctrol + c \u3067\u8a18\u9332\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002","title":"\u8d70\u884c"},{"location":"03.SLAM(TX2)/05.offline_slam/#pbstream","text":"rosbag\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3063\u30662D\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 1 ./offline_slam.sh myroom.bag myroom.bag.pbstream \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002","title":"pbstream\u4fdd\u5b58"},{"location":"03.SLAM(TX2)/05.offline_slam/#_2","text":"","title":"\u8aac\u660e"},{"location":"03.SLAM(TX2)/05.offline_slam/#04ydlidar_rosbag_recordsh","text":"\u5f15\u6570\u306b\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./04.ydlidar_rosbag_record.sh output.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./ydlidar_rosbag_record.sh output.bag source ${ HOME } /catkin_ws/devel/setup.bash case $1 in /*\\.bag) OUTPUT_BAG=$1 ;; *.bag) OUTPUT_BAG= $PWD /$1 esac echo ${ OUTPUT_BAG } roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch -a \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30c8\u30d4\u30c3\u30af\u5168\u3066\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58 1 rosrun rosbag record -a -O $OUTPUT_BAG","title":"04.ydlidar_rosbag_record.sh"},{"location":"03.SLAM(TX2)/05.offline_slam/#05offline_slamsh","text":"\u5f15\u6570\u306b\u5165\u529brosbag\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./05.offline_slam.sh input.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./offline_slam.sh input.bag #https://www.ncnynl.com/archives/201811/2789.html case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } cartographer-ros\u3092\u5229\u7528\u3059\u308b\u306e\u3067bash\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002 1 source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch offline SLAM\u8d77\u52d5 1 roslaunch cartographer_ros offline_ydlidar_2d.launch bag_filenames:= ${ INPUT_BAG } pbstream\u4fdd\u5b58 1 rosservice call /write_state ${ INPUT_BAG } .pbstream pbstream\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001rosbag\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001online SLAM\u304b\u3089\u306f\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002","title":"05.offline_slam.sh"},{"location":"03.SLAM(TX2)/06.localization/","text":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a \u5b9f\u884c 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./06.localization.sh myroom.bag.pbstream RViz 1 ./02.rviz.sh \u8d70\u884c \u30e9\u30b8\u30b3\u30f3\u306b\u4e57\u305b\u3066\u90e8\u5c4b\u306e\u4e2d\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002 \u8aac\u660e 06.localization.sh \u5f15\u6570\u306b\u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./06.localization.sh input.bag.pbstream 1 2 3 4 5 6 7 8 9 10 11 # usage: # ./localization.sh input.bag.pbstream case $1 in /*\\.pbstream) INPUT_PB=$1 ;; *.pbstream) INPUT_PB= $PWD /$1 esac echo ${ INPUT_PB } \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206\u306eIP:11311 export ROS_IP=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch Localization\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d_localization.launch load_state_filename:= ${ INPUT_PB } 02.rviz.sh \u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u3059\u308b\u5834\u5408\u306f\u3001export\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002 \u3053\u306e\u5834\u5408\u300102.rviz.sh\u306f\u4ed6\u306ePC\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d_rviz.launch","title":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a"},{"location":"03.SLAM(TX2)/06.localization/#_1","text":"","title":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a"},{"location":"03.SLAM(TX2)/06.localization/#_2","text":"1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./06.localization.sh myroom.bag.pbstream","title":"\u5b9f\u884c"},{"location":"03.SLAM(TX2)/06.localization/#rviz","text":"1 ./02.rviz.sh","title":"RViz"},{"location":"03.SLAM(TX2)/06.localization/#_3","text":"\u30e9\u30b8\u30b3\u30f3\u306b\u4e57\u305b\u3066\u90e8\u5c4b\u306e\u4e2d\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002","title":"\u8d70\u884c"},{"location":"03.SLAM(TX2)/06.localization/#_4","text":"","title":"\u8aac\u660e"},{"location":"03.SLAM(TX2)/06.localization/#06localizationsh","text":"\u5f15\u6570\u306b\u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./06.localization.sh input.bag.pbstream 1 2 3 4 5 6 7 8 9 10 11 # usage: # ./localization.sh input.bag.pbstream case $1 in /*\\.pbstream) INPUT_PB=$1 ;; *.pbstream) INPUT_PB= $PWD /$1 esac echo ${ INPUT_PB } \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206\u306eIP:11311 export ROS_IP=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch Localization\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d_localization.launch load_state_filename:= ${ INPUT_PB }","title":"06.localization.sh"},{"location":"03.SLAM(TX2)/06.localization/#02rvizsh","text":"\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u3059\u308b\u5834\u5408\u306f\u3001export\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002 \u3053\u306e\u5834\u5408\u300102.rviz.sh\u306f\u4ed6\u306ePC\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros ydlidar_2d_rviz.launch","title":"02.rviz.sh"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/","text":"YDLIDAR Cartographer ROS https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u4f5c\u308a\u65b9\u306b\u3064\u3044\u3066 Cartographer ROS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3092\u898b\u308b\u3068\u3001 backpack \u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066 .launch \u30d5\u30a1\u30a4\u30eb\u3068 .lua \u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002 YDLIDAR\u7528\u306bbackpack_2d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 sudo cp /opt/ros/melodic/share/cartographer_ros/launch/backpack_2d.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/demo_backpack_2d_localization.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization_only.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_backpack_2d.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_ydlidar_2d.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/offline_backpack_2d.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/offline_ydlidar_2d.launch sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_only.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d_ci.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_evaluation.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_server.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_server.lua \u305d\u308c\u305e\u308c\u7de8\u96c6\u3057\u3066\u3044\u304d\u307e\u3059\u304c\u3001YDLIDAR\u306e\u8a08\u6e2c\u8ddd\u96e2\u306f\u4e2d\u56fd\u8a9e\u3067\u66f8\u304b\u308c\u305f\u60c5\u5831\u3092\u3082\u3068\u306b\u3057\u307e\u3059\u3002 ydlidar_2d.launch online SLAM\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 launch --- /opt/ros/melodic/share/cartographer_ros/launch/backpack_2d.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d.launch 2019-04-18 10:45:11.633852650 +0900 @@ -24,7 +24,7 @@ <node name= \"cartographer_node\" pkg= \"cartographer_ros\" type= \"cartographer_node\" args= \" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d.lua\" + -configuration_basename ydlidar_2d.lua\" output= \"screen\" > <remap from= \"echoes\" to= \"horizontal_laser_2d\" /> </node> ydlidar_2d_localization.launch \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 \u4ed6\u306ePC\u3067rviz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u3001 rviz \u306f\u306f\u524a\u9664\u3057\u307e\u3059\u3002 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u884c\u3046\u305f\u3081\u306b\u3001 rosbag play \u306f\u524a\u9664\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 --- /opt/ros/melodic/share/cartographer_ros/launch/demo_backpack_2d_localization.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch 2019-04-18 17:13:52.222148292 +0900 @@ -26,7 +26,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d_localization.lua + -configuration_basename ydlidar_2d_localization.lua -load_state_filename $(arg load_state_filename)\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> @@ -35,8 +35,4 @@ <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> - <node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" required=\"true\" - args=\"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> - <node name=\"playbag\" pkg=\"rosbag\" type=\"play\" - args=\"--clock $(arg bag_filename)\" /> </launch> ydlidar_2d_localization_only.launch \u30de\u30c3\u30d7\u304c\u5b8c\u5168\u306b\u5b8c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u3001SLAM\u3092\u52d5\u4f5c\u3055\u305b\u305a\u306b\u3001\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u307f\u306e\u5b9f\u884c\u3067\u51e6\u7406\u3092\u8efd\u304f\u3059\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization_only.launch 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch 2019-04-18 17:13:52.222148292 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization_only.launch 2019-04-18 11:58:26.981743821 +0900 @@ -26,7 +26,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename ydlidar_2d_localization.lua + -configuration_basename ydlidar_2d_localization_only.lua -load_state_filename $(arg load_state_filename)\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> assets_writer_ydlidar_2d.launch \u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_ydlidar_2d.launch 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_backpack_2d.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_ydlidar_2d.launch 2019-04-18 14:12:12.519944597 +0900 @@ -15,7 +15,7 @@ --> <launch> - <arg name=\"config_file\" default=\"assets_writer_backpack_2d.lua\"/> + <arg name=\"config_file\" default=\"assets_writer_ydlidar_2d.lua\"/> <node name=\"cartographer_assets_writer\" pkg=\"cartographer_ros\" required=\"true\" type=\"cartographer_assets_writer\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files offline_ydlidar_2d.launch offline SLAM\u306f\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u305f\u3081\u306epbstream\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/offline_ydlidar_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 --- /opt/ros/melodic/share/cartographer_ros/launch/offline_backpack_2d.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/offline_ydlidar_2d.launch 2019-04-18 16:28:06.797046959 +0900 @@ -19,9 +19,6 @@ <param name=\"/use_sim_time\" value=\"true\" /> <group unless=\"$(arg no_rviz)\"> - <node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" required=\"true\" - args=\"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> - <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> </group> @@ -30,7 +27,7 @@ required=\"$(arg no_rviz)\" type=\"cartographer_offline_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basenames backpack_2d.lua + -configuration_basenames ydlidar_2d.lua -urdf_filenames $(find cartographer_ros)/urdf/backpack_2d.urdf -bag_filenames $(arg bag_filenames)\" output=\"screen\"> ydlidar_2d_rviz.launch rviz\u3092\u8d77\u52d5\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch> ydlidar_2d.lua online SLAM\u306e\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 tracking_frame \u3068published_frame`\u306fYDLIDAR\u30c9\u30e9\u30a4\u30d0\u30fc\u5074\u306elaunch\u8a2d\u5b9a\u3068\u540c\u3058\u306b\u3057\u307e\u3059\u3002 \u4ed6\u306e\u5024\u306f\u4e2d\u56fd\u8a9e\u306e\u60c5\u5831\u3092\u3082\u3068\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d.lua2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d.lua 2019-04-18 12:38:36.510971973 +0900 @@ -19,17 +19,17 @@ map_builder = MAP_BUILDER, trajectory_builder = TRAJECTORY_BUILDER, map_frame = \"map\", - tracking_frame = \"base_link\", - published_frame = \"base_link\", + tracking_frame = \"laser_frame\", + published_frame = \"laser_frame\", odom_frame = \"odom\", provide_odom_frame = true, publish_frame_projected_to_2d = false, use_odometry = false, use_nav_sat = false, use_landmarks = false, - num_laser_scans = 0, - num_multi_echo_laser_scans = 1, - num_subdivisions_per_laser_scan = 10, + num_laser_scans = 1, + num_multi_echo_laser_scans = 0, + num_subdivisions_per_laser_scan = 1, num_point_clouds = 0, lookup_transform_timeout_sec = 0.2, submap_publish_period_sec = 0.3, @@ -43,6 +43,18 @@ } MAP_BUILDER.use_trajectory_builder_2d = true -TRAJECTORY_BUILDER_2D.num_accumulated_range_data = 10 +TRAJECTORY_BUILDER_2D.submaps.num_range_data = 35 +TRAJECTORY_BUILDER_2D.min_range = 0.08 +TRAJECTORY_BUILDER_2D.max_range = 16. +TRAJECTORY_BUILDER_2D.missing_data_ray_length = 1. +TRAJECTORY_BUILDER_2D.use_imu_data = false +TRAJECTORY_BUILDER_2D.use_online_correlative_scan_matching = true +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.linear_search_window = 0.1 +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.translation_delta_cost_weight = 10. +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.rotation_delta_cost_weight = 1e-1 + +POSE_GRAPH.optimization_problem.huber_scale = 1e2 +POSE_GRAPH.optimize_every_n_nodes = 35 +POSE_GRAPH.constraint_builder.min_score = 0.65 return options ydlidar_2d_localization.lua \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua 2019-04-18 11:21:39.245829761 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d.lua\" +include \"ydlidar_2d.lua\" TRAJECTORY_BUILDER.pure_localization = true POSE_GRAPH.optimize_every_n_nodes = 20 ydlidar_2d_localization_only.lua SLAM\u3092\u52d5\u4f5c\u3055\u305b\u305a\u306b\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3060\u3051\u3092\u52d5\u4f5c\u3055\u305b\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 Cartographer ROS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u3066\u5909\u66f4\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u306f\u307e\u3060\u554f\u984c\u304c\u3042\u3063\u3066\u6a5f\u80fd\u3057\u3066\u3044\u307e\u305b\u3093\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_only.lua 1 2 3 4 5 6 7 8 9 10 11 12 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua 2019-04-18 11:21:39.245829761 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_only.lua 2019-04-18 11:25:45.757409678 +0900 @@ -15,6 +15,9 @@ include \"ydlidar_2d.lua\" TRAJECTORY_BUILDER.pure_localization = true +TRAJECTORY_BUILDER.pure_localization_trimmer = { + max_submaps_to_keep = 3, +} POSE_GRAPH.optimize_every_n_nodes = 20 return options assets_writer_ydlidar_2d.lua \u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 tracking_frame \u306fYDLIDAR\u30c9\u30e9\u30a4\u30d0\u30fc\u5074\u306e\u8a2d\u5b9a\u3068\u540c\u3058\u306b\u3057\u307e\u3059\u3002 \u8a08\u6e2c\u8ddd\u96e2\u306f\u4e2d\u56fd\u8a9e\u306e\u60c5\u5831\u306b\u3082\u3068\u3065\u3044\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d.lua 2019-04-18 16:39:53.198405055 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.08, + max_range = 16., }, { action = \"dump_num_points\", assets_writer_ydlidar_2d_ci.lua assets_writer_ydlidar_2d.lua \u3068\u8a2d\u5b9a\u65b9\u91dd\u306f\u540c\u3058\u3067\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d_ci.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d_ci.lua 2019-04-18 16:38:39.646331066 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.08, + max_range = 15., }, { action = \"dump_num_points\", ydlidar_2d_localization_evaluation.lua \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u4f7f\u3046\u3088\u3046\u3067\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_evaluation.lua 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_evaluation.lua 2019-04-18 11:44:36.647488588 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d_localization.lua\" +include \"ydlidar_2d_localization.lua\" -- output map to base_link for evaluation options.provide_odom_frame = false ydlidar_2d_server.lua \u5909\u66f4\u306a\u3057 1 /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_server.lua 1 2 3 4 5 include \"map_builder_server.lua\" MAP_BUILDER_SERVER.map_builder.use_trajectory_builder_2d = true return MAP_BUILDER_SERVER \u53c2\u8003 https://google-cartographer-ros.readthedocs.io/en/latest/your_bag.html https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/ https://www.ncnynl.com/archives/201811/2789.html https://translate.google.co.jp/translate?hl=en&sl=zh-CN&u=https://www.academia.edu/38171833/EAI_cartographer&prev=search","title":"YDLIDAR Cartographer ROS"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar-cartographer-ros","text":"https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u4f5c\u308a\u65b9\u306b\u3064\u3044\u3066 Cartographer ROS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3092\u898b\u308b\u3068\u3001 backpack \u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066 .launch \u30d5\u30a1\u30a4\u30eb\u3068 .lua \u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002 YDLIDAR\u7528\u306bbackpack_2d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 sudo cp /opt/ros/melodic/share/cartographer_ros/launch/backpack_2d.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/demo_backpack_2d_localization.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization_only.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_backpack_2d.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_ydlidar_2d.launch sudo cp /opt/ros/melodic/share/cartographer_ros/launch/offline_backpack_2d.launch \\ /opt/ros/melodic/share/cartographer_ros/launch/offline_ydlidar_2d.launch sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_only.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d_ci.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_evaluation.lua sudo cp /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_server.lua \\ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_server.lua \u305d\u308c\u305e\u308c\u7de8\u96c6\u3057\u3066\u3044\u304d\u307e\u3059\u304c\u3001YDLIDAR\u306e\u8a08\u6e2c\u8ddd\u96e2\u306f\u4e2d\u56fd\u8a9e\u3067\u66f8\u304b\u308c\u305f\u60c5\u5831\u3092\u3082\u3068\u306b\u3057\u307e\u3059\u3002","title":"YDLIDAR Cartographer ROS"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2dlaunch","text":"online SLAM\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 launch --- /opt/ros/melodic/share/cartographer_ros/launch/backpack_2d.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d.launch 2019-04-18 10:45:11.633852650 +0900 @@ -24,7 +24,7 @@ <node name= \"cartographer_node\" pkg= \"cartographer_ros\" type= \"cartographer_node\" args= \" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d.lua\" + -configuration_basename ydlidar_2d.lua\" output= \"screen\" > <remap from= \"echoes\" to= \"horizontal_laser_2d\" /> </node>","title":"ydlidar_2d.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2d_localizationlaunch","text":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 \u4ed6\u306ePC\u3067rviz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u3001 rviz \u306f\u306f\u524a\u9664\u3057\u307e\u3059\u3002 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u884c\u3046\u305f\u3081\u306b\u3001 rosbag play \u306f\u524a\u9664\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 --- /opt/ros/melodic/share/cartographer_ros/launch/demo_backpack_2d_localization.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch 2019-04-18 17:13:52.222148292 +0900 @@ -26,7 +26,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d_localization.lua + -configuration_basename ydlidar_2d_localization.lua -load_state_filename $(arg load_state_filename)\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> @@ -35,8 +35,4 @@ <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> - <node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" required=\"true\" - args=\"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> - <node name=\"playbag\" pkg=\"rosbag\" type=\"play\" - args=\"--clock $(arg bag_filename)\" /> </launch>","title":"ydlidar_2d_localization.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2d_localization_onlylaunch","text":"\u30de\u30c3\u30d7\u304c\u5b8c\u5168\u306b\u5b8c\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u3001SLAM\u3092\u52d5\u4f5c\u3055\u305b\u305a\u306b\u3001\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u307f\u306e\u5b9f\u884c\u3067\u51e6\u7406\u3092\u8efd\u304f\u3059\u308b\u4e8b\u304c\u51fa\u6765\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization_only.launch 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization.launch 2019-04-18 17:13:52.222148292 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/ydlidar_2d_localization_only.launch 2019-04-18 11:58:26.981743821 +0900 @@ -26,7 +26,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename ydlidar_2d_localization.lua + -configuration_basename ydlidar_2d_localization_only.lua -load_state_filename $(arg load_state_filename)\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" />","title":"ydlidar_2d_localization_only.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#assets_writer_ydlidar_2dlaunch","text":"\u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_ydlidar_2d.launch 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_backpack_2d.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/assets_writer_ydlidar_2d.launch 2019-04-18 14:12:12.519944597 +0900 @@ -15,7 +15,7 @@ --> <launch> - <arg name=\"config_file\" default=\"assets_writer_backpack_2d.lua\"/> + <arg name=\"config_file\" default=\"assets_writer_ydlidar_2d.lua\"/> <node name=\"cartographer_assets_writer\" pkg=\"cartographer_ros\" required=\"true\" type=\"cartographer_assets_writer\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files","title":"assets_writer_ydlidar_2d.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2dlaunch","text":"offline SLAM\u306f\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u305f\u3081\u306epbstream\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/launch/offline_ydlidar_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 --- /opt/ros/melodic/share/cartographer_ros/launch/offline_backpack_2d.launch 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/launch/offline_ydlidar_2d.launch 2019-04-18 16:28:06.797046959 +0900 @@ -19,9 +19,6 @@ <param name=\"/use_sim_time\" value=\"true\" /> <group unless=\"$(arg no_rviz)\"> - <node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" required=\"true\" - args=\"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> - <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> </group> @@ -30,7 +27,7 @@ required=\"$(arg no_rviz)\" type=\"cartographer_offline_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basenames backpack_2d.lua + -configuration_basenames ydlidar_2d.lua -urdf_filenames $(find cartographer_ros)/urdf/backpack_2d.urdf -bag_filenames $(arg bag_filenames)\" output=\"screen\">","title":"offline_ydlidar_2d.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2d_rvizlaunch","text":"rviz\u3092\u8d77\u52d5\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch>","title":"ydlidar_2d_rviz.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2dlua","text":"online SLAM\u306e\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 tracking_frame \u3068published_frame`\u306fYDLIDAR\u30c9\u30e9\u30a4\u30d0\u30fc\u5074\u306elaunch\u8a2d\u5b9a\u3068\u540c\u3058\u306b\u3057\u307e\u3059\u3002 \u4ed6\u306e\u5024\u306f\u4e2d\u56fd\u8a9e\u306e\u60c5\u5831\u3092\u3082\u3068\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d.lua2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d.lua 2019-04-18 12:38:36.510971973 +0900 @@ -19,17 +19,17 @@ map_builder = MAP_BUILDER, trajectory_builder = TRAJECTORY_BUILDER, map_frame = \"map\", - tracking_frame = \"base_link\", - published_frame = \"base_link\", + tracking_frame = \"laser_frame\", + published_frame = \"laser_frame\", odom_frame = \"odom\", provide_odom_frame = true, publish_frame_projected_to_2d = false, use_odometry = false, use_nav_sat = false, use_landmarks = false, - num_laser_scans = 0, - num_multi_echo_laser_scans = 1, - num_subdivisions_per_laser_scan = 10, + num_laser_scans = 1, + num_multi_echo_laser_scans = 0, + num_subdivisions_per_laser_scan = 1, num_point_clouds = 0, lookup_transform_timeout_sec = 0.2, submap_publish_period_sec = 0.3, @@ -43,6 +43,18 @@ } MAP_BUILDER.use_trajectory_builder_2d = true -TRAJECTORY_BUILDER_2D.num_accumulated_range_data = 10 +TRAJECTORY_BUILDER_2D.submaps.num_range_data = 35 +TRAJECTORY_BUILDER_2D.min_range = 0.08 +TRAJECTORY_BUILDER_2D.max_range = 16. +TRAJECTORY_BUILDER_2D.missing_data_ray_length = 1. +TRAJECTORY_BUILDER_2D.use_imu_data = false +TRAJECTORY_BUILDER_2D.use_online_correlative_scan_matching = true +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.linear_search_window = 0.1 +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.translation_delta_cost_weight = 10. +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.rotation_delta_cost_weight = 1e-1 + +POSE_GRAPH.optimization_problem.huber_scale = 1e2 +POSE_GRAPH.optimize_every_n_nodes = 35 +POSE_GRAPH.constraint_builder.min_score = 0.65 return options","title":"ydlidar_2d.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2d_localizationlua","text":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua 2019-04-18 11:21:39.245829761 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d.lua\" +include \"ydlidar_2d.lua\" TRAJECTORY_BUILDER.pure_localization = true POSE_GRAPH.optimize_every_n_nodes = 20","title":"ydlidar_2d_localization.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2d_localization_onlylua","text":"SLAM\u3092\u52d5\u4f5c\u3055\u305b\u305a\u306b\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3060\u3051\u3092\u52d5\u4f5c\u3055\u305b\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 Cartographer ROS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u3066\u5909\u66f4\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u306f\u307e\u3060\u554f\u984c\u304c\u3042\u3063\u3066\u6a5f\u80fd\u3057\u3066\u3044\u307e\u305b\u3093\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_only.lua 1 2 3 4 5 6 7 8 9 10 11 12 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization.lua 2019-04-18 11:21:39.245829761 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_only.lua 2019-04-18 11:25:45.757409678 +0900 @@ -15,6 +15,9 @@ include \"ydlidar_2d.lua\" TRAJECTORY_BUILDER.pure_localization = true +TRAJECTORY_BUILDER.pure_localization_trimmer = { + max_submaps_to_keep = 3, +} POSE_GRAPH.optimize_every_n_nodes = 20 return options","title":"ydlidar_2d_localization_only.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#assets_writer_ydlidar_2dlua","text":"\u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 tracking_frame \u306fYDLIDAR\u30c9\u30e9\u30a4\u30d0\u30fc\u5074\u306e\u8a2d\u5b9a\u3068\u540c\u3058\u306b\u3057\u307e\u3059\u3002 \u8a08\u6e2c\u8ddd\u96e2\u306f\u4e2d\u56fd\u8a9e\u306e\u60c5\u5831\u306b\u3082\u3068\u3065\u3044\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d.lua 2019-04-18 16:39:53.198405055 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.08, + max_range = 16., }, { action = \"dump_num_points\",","title":"assets_writer_ydlidar_2d.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#assets_writer_ydlidar_2d_cilua","text":"assets_writer_ydlidar_2d.lua \u3068\u8a2d\u5b9a\u65b9\u91dd\u306f\u540c\u3058\u3067\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d_ci.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/assets_writer_ydlidar_2d_ci.lua 2019-04-18 16:38:39.646331066 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.08, + max_range = 15., }, { action = \"dump_num_points\",","title":"assets_writer_ydlidar_2d_ci.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2d_localization_evaluationlua","text":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u4f7f\u3046\u3088\u3046\u3067\u3059\u3002 1 sudo vi /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_evaluation.lua 1 2 3 4 5 6 7 8 9 10 11 --- /opt/ros/melodic/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua 2018-06-01 21:27:27.000000000 +0900 +++ /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_localization_evaluation.lua 2019-04-18 11:44:36.647488588 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d_localization.lua\" +include \"ydlidar_2d_localization.lua\" -- output map to base_link for evaluation options.provide_odom_frame = false","title":"ydlidar_2d_localization_evaluation.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2d_serverlua","text":"\u5909\u66f4\u306a\u3057 1 /opt/ros/melodic/share/cartographer_ros/configuration_files/ydlidar_2d_server.lua 1 2 3 4 5 include \"map_builder_server.lua\" MAP_BUILDER_SERVER.map_builder.use_trajectory_builder_2d = true return MAP_BUILDER_SERVER","title":"ydlidar_2d_server.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#_1","text":"https://google-cartographer-ros.readthedocs.io/en/latest/your_bag.html https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/ https://www.ncnynl.com/archives/201811/2789.html https://translate.google.co.jp/translate?hl=en&sl=zh-CN&u=https://www.academia.edu/38171833/EAI_cartographer&prev=search","title":"\u53c2\u8003"},{"location":"04.Jetson/01.Jetson/","text":"Jetson Jetson \u9805\u76ee TX1 TX2 TX2i Xavier nano GPU 256-core Maxwell 256-core Pascal 256-core Pascal 512-core Volta 128-core Macwell CPU\u30b3\u30a2 Quad Quad Quad Octa Quad System\u30e1\u30e2\u30ea 4G 8G 8G 16G 4G Storage MicroSD 32 GB eMMC 32 GB eMMC 32GB eMMC 5.1 Flash Storage Micro SD","title":"Jetson"},{"location":"04.Jetson/01.Jetson/#jetson","text":"","title":"Jetson"},{"location":"04.Jetson/01.Jetson/#jetson_1","text":"\u9805\u76ee TX1 TX2 TX2i Xavier nano GPU 256-core Maxwell 256-core Pascal 256-core Pascal 512-core Volta 128-core Macwell CPU\u30b3\u30a2 Quad Quad Quad Octa Quad System\u30e1\u30e2\u30ea 4G 8G 8G 16G 4G Storage MicroSD 32 GB eMMC 32 GB eMMC 32GB eMMC 5.1 Flash Storage Micro SD","title":"Jetson"},{"location":"05.etc/03.ubuntu16/","text":"Ubuntu 16.04\u306bROS\u3092\u69cb\u7bc9 Docker\u306e\u8d77\u52d5 \u8a2d\u5b9a 1 2 3 4 5 FROM ros:melodic RUN apt-get update \\ && apt-get install -y ros-melodic-desktop \\ && rm -rf /var/lib/apt/lists/ \\ 1 docker build -t ros-cartographer . 1 2 3 4 open -a Xqurtz ip=$(ifconfig en0 | grep inet | awk '$1==\"inet\" {print $2}') echo $ip xhost + $ip 1 docker run -it -e DISPLAY=$ip:0 --name ros-test ros-cartographer 1 docker exec -it ros-cartographer bin/bash Rosdep\u306e\u521d\u671f\u5316 1 2 $ rosdep init $ rosdep update Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 5 $ apt-get update $ apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git $ mkdir -p ~/catkin_ws/src $ cd ~/catkin_ws/ $ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 $ echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc $ source ~/.bashrc Cartographer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ apt install ros-melodic-cartographer-ros 1 2 3 4 5 6 7 8 9 $ apt-get install ninja-build libceres-dev libprotobuf-dev protobuf-compiler libprotoc-dev $ cd ~/catkin_ws/src $ git clone https://github.com/googlecartographer/cartographer.git $ git clone https://github.com/googlecartographer/cartographer_ros.git $ cd ~/catkin_ws $ src/cartographer/scripts/install_proto3.sh $ rm -rf protobuf/ $ rosdep install --from-paths src --ignore-src -r -y --os = ubuntu:xenial $ catkin_make_isolated --install --use-ninja 1 2 $ cd ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/ $ vim backpack_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 <!-- Copyright 2016 The Cartographer Authors Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. --> <launch> <param name= \"robot_description\" textfile= \"$(find cartographer_ros)/urdf/backpack_2d.urdf\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> </launch> 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u30a8\u30e9\u30fc\u304c\u3067\u308b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 QStandardPaths : XDG_RUNTIME_DIR not set , defaulting to '/tmp/runtime-root' libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast rviz : /build/ogre-1.9-B6QkmW/ogre-1.9-1.9.0+dfsg1/RenderSystems/GL/src/ OgreGLSupport . cpp : 56 : virtual void Ogre :: GLSupport :: initialiseExtensions (): Assertion ` pcVer && \"Problems getting GL version string using glGetString\" ' failed . ================================================================================ REQUIRED process [ rviz - 2 ] has died ! process has died [ pid 10453 , exit code - 6 , cmd /opt/ros/melodic/lib/rviz/rviz -d /root/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/demo_2d.rviz __name:=rviz __log:=/root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 . log ]. log file : /root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 *. log Initiating shutdown ! ================================================================================ [ rviz - 2 ] killing on exit [ rosout - 1 ] killing on exit [ master ] killing on exit shutting down processing monitor ... ... shutting down processing monitor complete done","title":"Ubuntu 16.04\u306bROS\u3092\u69cb\u7bc9"},{"location":"05.etc/03.ubuntu16/#ubuntu-1604ros","text":"","title":"Ubuntu 16.04\u306bROS\u3092\u69cb\u7bc9"},{"location":"05.etc/03.ubuntu16/#docker","text":"","title":"Docker\u306e\u8d77\u52d5"},{"location":"05.etc/03.ubuntu16/#_1","text":"1 2 3 4 5 FROM ros:melodic RUN apt-get update \\ && apt-get install -y ros-melodic-desktop \\ && rm -rf /var/lib/apt/lists/ \\ 1 docker build -t ros-cartographer . 1 2 3 4 open -a Xqurtz ip=$(ifconfig en0 | grep inet | awk '$1==\"inet\" {print $2}') echo $ip xhost + $ip 1 docker run -it -e DISPLAY=$ip:0 --name ros-test ros-cartographer 1 docker exec -it ros-cartographer bin/bash Rosdep\u306e\u521d\u671f\u5316 1 2 $ rosdep init $ rosdep update Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 5 $ apt-get update $ apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git $ mkdir -p ~/catkin_ws/src $ cd ~/catkin_ws/ $ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 $ echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc $ source ~/.bashrc","title":"\u8a2d\u5b9a"},{"location":"05.etc/03.ubuntu16/#cartographer","text":"1 $ apt install ros-melodic-cartographer-ros 1 2 3 4 5 6 7 8 9 $ apt-get install ninja-build libceres-dev libprotobuf-dev protobuf-compiler libprotoc-dev $ cd ~/catkin_ws/src $ git clone https://github.com/googlecartographer/cartographer.git $ git clone https://github.com/googlecartographer/cartographer_ros.git $ cd ~/catkin_ws $ src/cartographer/scripts/install_proto3.sh $ rm -rf protobuf/ $ rosdep install --from-paths src --ignore-src -r -y --os = ubuntu:xenial $ catkin_make_isolated --install --use-ninja 1 2 $ cd ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/ $ vim backpack_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 <!-- Copyright 2016 The Cartographer Authors Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. --> <launch> <param name= \"robot_description\" textfile= \"$(find cartographer_ros)/urdf/backpack_2d.urdf\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> </launch> 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u30a8\u30e9\u30fc\u304c\u3067\u308b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 QStandardPaths : XDG_RUNTIME_DIR not set , defaulting to '/tmp/runtime-root' libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast rviz : /build/ogre-1.9-B6QkmW/ogre-1.9-1.9.0+dfsg1/RenderSystems/GL/src/ OgreGLSupport . cpp : 56 : virtual void Ogre :: GLSupport :: initialiseExtensions (): Assertion ` pcVer && \"Problems getting GL version string using glGetString\" ' failed . ================================================================================ REQUIRED process [ rviz - 2 ] has died ! process has died [ pid 10453 , exit code - 6 , cmd /opt/ros/melodic/lib/rviz/rviz -d /root/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/demo_2d.rviz __name:=rviz __log:=/root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 . log ]. log file : /root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 *. log Initiating shutdown ! ================================================================================ [ rviz - 2 ] killing on exit [ rosout - 1 ] killing on exit [ master ] killing on exit shutting down processing monitor ... ... shutting down processing monitor complete done","title":"Cartographer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"05.etc/03.ydlidar/","text":"ydlidar Git clone 1 2 3 4 $ cd ~/catkin_ws/ $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ydlidar $ catkin_make Install 1 2 3 $ roscd ydlidar/startup $ sudo chmod 777 ./* $ sudo sh initenv.sh \u8d77\u52d5 \u8d77\u52d5 1 roslaunch ydlidar lidar_view.launch","title":"ydlidar"},{"location":"05.etc/03.ydlidar/#ydlidar","text":"Git clone 1 2 3 4 $ cd ~/catkin_ws/ $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ydlidar $ catkin_make Install 1 2 3 $ roscd ydlidar/startup $ sudo chmod 777 ./* $ sudo sh initenv.sh","title":"ydlidar"},{"location":"05.etc/03.ydlidar/#_1","text":"\u8d77\u52d5 1 roslaunch ydlidar lidar_view.launch","title":"\u8d77\u52d5"},{"location":"05.etc/04.cartographer/","text":"Cartographer \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb sudo apt install ros-melodic-cartographer-ros \u81ea\u5206\u3067Build Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 sudo apt-get update sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 mkdir catkin_ws cd catkin_ws wstool init src wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja \u5b9f\u884c 1 2 3 $ source install_isolated/setup.bash $ wget -P ~/Downloads https://storage.googleapis.com/cartographer-public-data/bags/backpack_2d/cartographer_paper_deutsches_museum.bag $ roslaunch cartographer_ros demo_backpack_2d.launch bag_filename: = ${ HOME } /Downloads/cartographer_paper_deutsches_museum.bag","title":"Cartographer"},{"location":"05.etc/04.cartographer/#cartographer","text":"","title":"Cartographer"},{"location":"05.etc/04.cartographer/#_1","text":"sudo apt install ros-melodic-cartographer-ros","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"05.etc/04.cartographer/#build","text":"Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 sudo apt-get update sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 mkdir catkin_ws cd catkin_ws wstool init src wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja","title":"\u81ea\u5206\u3067Build"},{"location":"05.etc/04.cartographer/#_2","text":"1 2 3 $ source install_isolated/setup.bash $ wget -P ~/Downloads https://storage.googleapis.com/cartographer-public-data/bags/backpack_2d/cartographer_paper_deutsches_museum.bag $ roslaunch cartographer_ros demo_backpack_2d.launch bag_filename: = ${ HOME } /Downloads/cartographer_paper_deutsches_museum.bag","title":"\u5b9f\u884c"},{"location":"05.etc/04.prilidar/","text":"prilidar https://github.com/robopeak/rplidar_ros","title":"prilidar"},{"location":"05.etc/04.prilidar/#prilidar","text":"https://github.com/robopeak/rplidar_ros","title":"prilidar"},{"location":"05.etc/05.ce30d/","text":"CE30-D Benewake CE30-D https://github.com/iamkevinzhao/ce30_driver_ros","title":"CE30-D"},{"location":"05.etc/05.ce30d/#ce30-d","text":"Benewake CE30-D https://github.com/iamkevinzhao/ce30_driver_ros","title":"CE30-D"},{"location":"05.etc/06.realsense/","text":"Realsense https://github.com/intel-ros/realsense","title":"Realsense"},{"location":"05.etc/06.realsense/#realsense","text":"https://github.com/intel-ros/realsense","title":"Realsense"},{"location":"05.etc/07.cartographer/","text":"Cartographer 2\u7a2e\u985e\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5 Google Cartographer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u6b21\u306e2\u7a2e\u985e\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002 \u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ sudo apt install ros-melodic-cartographer-ros Build\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 $ sudo apt-get update $ sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 $ mkdir ~/catkin_ws $ cd ~/catkin_ws $ wstool init src $ wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall $ wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja","title":"Cartographer"},{"location":"05.etc/07.cartographer/#cartographer","text":"","title":"Cartographer"},{"location":"05.etc/07.cartographer/#2","text":"Google Cartographer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u6b21\u306e2\u7a2e\u985e\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002","title":"2\u7a2e\u985e\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5"},{"location":"05.etc/07.cartographer/#_1","text":"1 $ sudo apt install ros-melodic-cartographer-ros","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"05.etc/07.cartographer/#build","text":"Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 $ sudo apt-get update $ sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 $ mkdir ~/catkin_ws $ cd ~/catkin_ws $ wstool init src $ wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall $ wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja","title":"Build\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"06.OSX/01.xwindow/","text":"X Windows XQuarts\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb https://www.xquartz.org/ \u8d77\u52d5\u3059\u308b 1 $ xhost Docker\u3092\u53d6\u5f97 local\u3092\u8ffd\u52a0 1 $ xhost +127.0.0.1 DISPLAY\u306e\u74b0\u5883\u7de8\u6570\u3092\u3064\u3051\u3066Docker\u8aad\u307f\u8fbc\u307f 1 2 $ docker pull ubuntu:18.04 $ docker run -env DISPLAY = docker.for.mac.localhost:0 --env = QT_X11_NO_MITSHM = 1 -it ubuntu:18.04","title":"X Windows"},{"location":"06.OSX/01.xwindow/#x-windows","text":"","title":"X Windows"},{"location":"06.OSX/01.xwindow/#xquarts","text":"https://www.xquartz.org/ \u8d77\u52d5\u3059\u308b 1 $ xhost","title":"XQuarts\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"06.OSX/01.xwindow/#docker","text":"local\u3092\u8ffd\u52a0 1 $ xhost +127.0.0.1 DISPLAY\u306e\u74b0\u5883\u7de8\u6570\u3092\u3064\u3051\u3066Docker\u8aad\u307f\u8fbc\u307f 1 2 $ docker pull ubuntu:18.04 $ docker run -env DISPLAY = docker.for.mac.localhost:0 --env = QT_X11_NO_MITSHM = 1 -it ubuntu:18.04","title":"Docker\u3092\u53d6\u5f97"},{"location":"07.LiDAR/list/","text":"LiDAR List \u578b\u756a \u30e1\u30fc\u30ab\u30fc \u6b21\u5143 Benewake CE30-D Benewake](http://en.benewake.com/) 3D Velodyne VL16 Velodyne 3D robosense-rs-lidar-16 [RoboSense ](http://www.robosense.ai/) URG-04LX-UG01 HOKUYO 3D YVT-35LX HOKUYO 3D UTM-30LX HOKUYO 3D UST-10/20LX HOKUYO 2D","title":"LiDAR List"},{"location":"07.LiDAR/list/#lidar-list","text":"\u578b\u756a \u30e1\u30fc\u30ab\u30fc \u6b21\u5143 Benewake CE30-D Benewake](http://en.benewake.com/) 3D Velodyne VL16 Velodyne 3D robosense-rs-lidar-16 [RoboSense ](http://www.robosense.ai/) URG-04LX-UG01 HOKUYO 3D YVT-35LX HOKUYO 3D UTM-30LX HOKUYO 3D UST-10/20LX HOKUYO 2D","title":"LiDAR List"}]}