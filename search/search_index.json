{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"ROS Docs ROS Docs\u306b\u3064\u3044\u3066 ROS Docs\u306f\u3001ROS\u306e\u5b66\u7fd2\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002 \u4fee\u6b63\u4f9d\u983c\u7b49 Github\u306eRepo\u306b Issues \u3092\u3042\u3052\u308b\u3002 \u305d\u306e\u4ed6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 LoRa Docs Android Things Docs DonkeyCar Docs Denbun Docs Circuit Docs Swift Docs Keras Docs NRF Docs DeviceWebAPI Docs","title":"ROS Docs"},{"location":"#ros-docs","text":"","title":"ROS Docs"},{"location":"#ros-docs_1","text":"ROS Docs\u306f\u3001ROS\u306e\u5b66\u7fd2\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002","title":"ROS Docs\u306b\u3064\u3044\u3066"},{"location":"#_1","text":"Github\u306eRepo\u306b Issues \u3092\u3042\u3052\u308b\u3002","title":"\u4fee\u6b63\u4f9d\u983c\u7b49"},{"location":"#_2","text":"LoRa Docs Android Things Docs DonkeyCar Docs Denbun Docs Circuit Docs Swift Docs Keras Docs NRF Docs DeviceWebAPI Docs","title":"\u305d\u306e\u4ed6\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8"},{"location":"01.bom/01.bom/","text":"BOM 1/10 ROS Kit Jetson TX2\u95a2\u9023 \u30d1\u30fc\u30c4\u540d \u30e1\u30fc\u30ab\u30fc Shop ASG001 https://www.arrow.com/en/products/asg001/connect-tech-inc XBG201 Connect Tech Inc. https://www.arrow.com/en/products/xbg201/connect-tech-inc TX2 Module NVIDIA https://www.arrow.com/en/products/900-83310-0001-000/nvidia mSATA\u5ef6\u9577\u30b1\u30fc\u30d6\u30eb Amazon SSD(250G) Amazon \u53c2\u8003 \u30d1\u30fc\u30c4\u540d \u30ea\u30f3\u30af AN310 https://www.aetina.com/products-detail.php?i=252 X-Carrier https://coloradoengineering.com/standard-products/x-carrier/ RTSO-9001 https://www.newbecca.com/product/558166554448 ximea https://www.ximea.com/en/products/xilab-application-specific-custom-oem/carrier-boards-for-nvidia-jetson-and-cameras JetsonPC https://www.avermedia.com/professional/product/tegra_pc_ex731/overview","title":"BOM"},{"location":"01.bom/01.bom/#bom","text":"","title":"BOM"},{"location":"01.bom/01.bom/#110-ros-kit","text":"Jetson TX2\u95a2\u9023 \u30d1\u30fc\u30c4\u540d \u30e1\u30fc\u30ab\u30fc Shop ASG001 https://www.arrow.com/en/products/asg001/connect-tech-inc XBG201 Connect Tech Inc. https://www.arrow.com/en/products/xbg201/connect-tech-inc TX2 Module NVIDIA https://www.arrow.com/en/products/900-83310-0001-000/nvidia mSATA\u5ef6\u9577\u30b1\u30fc\u30d6\u30eb Amazon SSD(250G) Amazon","title":"1/10 ROS Kit"},{"location":"01.bom/01.bom/#_1","text":"\u30d1\u30fc\u30c4\u540d \u30ea\u30f3\u30af AN310 https://www.aetina.com/products-detail.php?i=252 X-Carrier https://coloradoengineering.com/standard-products/x-carrier/ RTSO-9001 https://www.newbecca.com/product/558166554448 ximea https://www.ximea.com/en/products/xilab-application-specific-custom-oem/carrier-boards-for-nvidia-jetson-and-cameras JetsonPC https://www.avermedia.com/professional/product/tegra_pc_ex731/overview","title":"\u53c2\u8003"},{"location":"02.SLAM(Nano)/01.ros/","text":"Jetson Nano\u306bROS\u3092\u69cb\u7bc9 Jetson Nano\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"Jetson Nano\u306bROS\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/01.ros/#jetson-nanoros","text":"Jetson Nano\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"Jetson Nano\u306bROS\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/02.cartographer/","text":"Jetson Nano\u306bCartographer\u3092\u69cb\u7bc9 Cartographer\u95a2\u9023\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ apt-get install ros-melodic-cartographer ros-melodic-cartographer-ros ros-melodic-cartographer-ros-msgs ros-melodic-cartographer-rviz Cartographer\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u6301\u3063\u3066\u304f\u308b 1 2 $ cd ~/catkin_ws/src $ git clone https://github.com/ros-japan-users/cartographer_example","title":"Jetson Nano\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/02.cartographer/#jetson-nanocartographer","text":"Cartographer\u95a2\u9023\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ apt-get install ros-melodic-cartographer ros-melodic-cartographer-ros ros-melodic-cartographer-ros-msgs ros-melodic-cartographer-rviz Cartographer\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u6301\u3063\u3066\u304f\u308b 1 2 $ cd ~/catkin_ws/src $ git clone https://github.com/ros-japan-users/cartographer_example","title":"Jetson Nano\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"02.SLAM(Nano)/03.ydlidar/","text":"Jetson Nano\u306bYDLiDAR Build 1 2 3 $ cd ~/catkin_ws/src $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ~/catkin_ws scan_msg.scan_time, scan_msg.time_increment\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5408\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001YDLiDAR\u306eIssue https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002 /catkin_ws/src/ydlidar/src/ydlidar_node.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ... while ( ros :: ok ()) { bool hardError ; LaserScan scan ; //\u539f\u59cb\u6fc0\u5149\u6570\u636e if ( laser . doProcessSimple ( scan , hardError )){ sensor_msgs :: LaserScan scan_msg ; ros :: Time start_scan_time ; start_scan_time . sec = scan . system_time_stamp / 1000000000ul ; start_scan_time . nsec = scan . system_time_stamp % 1000000000ul ; scan_msg . header . stamp = start_scan_time ; scan_msg . header . frame_id = frame_id ; scan_msg . angle_min = scan . config . min_angle ; scan_msg . angle_max = scan . config . max_angle ; scan_msg . angle_increment = scan . config . ang_increment ; scan_msg . scan_time = scan . config . scan_time / 1000000000.0 ; scan_msg . time_increment = scan . config . time_increment / 1000000000.0 ; scan_msg . range_min = scan . config . min_range ; scan_msg . range_max = scan . config . max_range ; scan_msg . ranges = scan . ranges ; scan_msg . intensities = scan . intensities ; scan_pub . publish ( scan_msg ); } rate . sleep (); ros :: spinOnce (); } ... Build 1 2 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja udev 1 2 3 $ cd ~/ros_catkin_ws/src/ydlidar/startup $ chmod 777 * $ sudo sh initenv.sh","title":"Jetson Nano\u306bYDLiDAR"},{"location":"02.SLAM(Nano)/03.ydlidar/#jetson-nanoydlidar","text":"","title":"Jetson Nano\u306bYDLiDAR"},{"location":"02.SLAM(Nano)/03.ydlidar/#build","text":"1 2 3 $ cd ~/catkin_ws/src $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ~/catkin_ws scan_msg.scan_time, scan_msg.time_increment\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u5408\u3063\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001YDLiDAR\u306eIssue https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002 /catkin_ws/src/ydlidar/src/ydlidar_node.cpp 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ... while ( ros :: ok ()) { bool hardError ; LaserScan scan ; //\u539f\u59cb\u6fc0\u5149\u6570\u636e if ( laser . doProcessSimple ( scan , hardError )){ sensor_msgs :: LaserScan scan_msg ; ros :: Time start_scan_time ; start_scan_time . sec = scan . system_time_stamp / 1000000000ul ; start_scan_time . nsec = scan . system_time_stamp % 1000000000ul ; scan_msg . header . stamp = start_scan_time ; scan_msg . header . frame_id = frame_id ; scan_msg . angle_min = scan . config . min_angle ; scan_msg . angle_max = scan . config . max_angle ; scan_msg . angle_increment = scan . config . ang_increment ; scan_msg . scan_time = scan . config . scan_time / 1000000000.0 ; scan_msg . time_increment = scan . config . time_increment / 1000000000.0 ; scan_msg . range_min = scan . config . min_range ; scan_msg . range_max = scan . config . max_range ; scan_msg . ranges = scan . ranges ; scan_msg . intensities = scan . intensities ; scan_pub . publish ( scan_msg ); } rate . sleep (); ros :: spinOnce (); } ... Build 1 2 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja","title":"Build"},{"location":"02.SLAM(Nano)/03.ydlidar/#udev","text":"1 2 3 $ cd ~/ros_catkin_ws/src/ydlidar/startup $ chmod 777 * $ sudo sh initenv.sh","title":"udev"},{"location":"02.SLAM(Nano)/04.setting/","text":"YLiDAR\u3068Cartographer\u9023\u643a YDLiDAR (Jetson nano\u5074) ~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 <launch> <node name= \"ydlidar_node\" pkg= \"ydlidar\" type= \"ydlidar_node\" output= \"screen\" > <param name= \"port\" type= \"string\" value= \"/dev/ydlidar\" /> <param name= \"baudrate\" type= \"int\" value= \"128000\" /> <param name= \"frame_id\" type= \"string\" value= \"laser\" /> <param name= \"angle_fixed\" type= \"bool\" value= \"true\" /> <param name= \"low_exposure\" type= \"bool\" value= \"false\" /> <param name= \"heartbeat\" type= \"bool\" value= \"false\" /> <param name= \"resolution_fixed\" type= \"bool\" value= \"true\" /> <param name= \"angle_min\" type= \"double\" value= \"-180\" /> <param name= \"angle_max\" type= \"double\" value= \"180\" /> <param name= \"range_min\" type= \"double\" value= \"0.08\" /> <param name= \"range_max\" type= \"double\" value= \"16.0\" /> <param name= \"ignore_array\" type= \"string\" value= \"\" /> <param name= \"samp_rate\" type= \"int\" value= \"9\" /> <param name= \"frequency\" type= \"double\" value= \"15\" /> </node> <node pkg= \"tf\" type= \"static_transform_publisher\" name= \"base_to_laser\" args= \"0.0 0.0 0.18 0 0.0 0.0 base_link laser 100\" > </node> </launch> Cartographer (Jetson nano\u5074) ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_revo_lds.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"cartographer_node\" pkg= \"cartographer_ros\" type= \"cartographer_node\" args= \" -configuration_directory $(find cartographer_ros)/configuration_files -configuration_basename revo_lds.lua\" output= \"screen\" > </node> <node name= \"robot_state_publisher\" pkg= \"robot_state_publisher\" type= \"robot_state_publisher\" /> <node name= \"cartographer_occupancy_grid_node\" pkg= \"cartographer_ros\" type= \"cartographer_occupancy_grid_node\" args= \"-resolution 0.05\" > </node> </launch> ~/catkin_ws/src/cartographer_ros/cartographer_ros/configuration_files/revo_lds.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 include \"map_builder.lua\" include \"trajectory_builder.lua\" options = { map_builder = MAP_BUILDER , trajectory_builder = TRAJECTORY_BUILDER , map_frame = \"map\" , tracking_frame = \"laser\" , published_frame = \"laser\" , odom_frame = \"odom\" , provide_odom_frame = false , use_odometry = false , publish_frame_projected_to_2d = false , use_nav_sat = false , use_landmarks = false , num_laser_scans = 1 , num_multi_echo_laser_scans = 0 , num_subdivisions_per_laser_scan = 1 , num_point_clouds = 0 , lookup_transform_timeout_sec = 0.2 , submap_publish_period_sec = 0.3 , pose_publish_period_sec = 5e-3 , trajectory_publish_period_sec = 30e-3 , rangefinder_sampling_ratio = 1. , odometry_sampling_ratio = 1. , imu_sampling_ratio = 1. , landmarks_sampling_ratio = 1. , fixed_frame_pose_sampling_ratio = 1. , } MAP_BUILDER . use_trajectory_builder_2d = true TRAJECTORY_BUILDER_2D . submaps . num_range_data = 35 TRAJECTORY_BUILDER_2D . min_range = 0.08 TRAJECTORY_BUILDER_2D . max_range = 16. TRAJECTORY_BUILDER_2D . missing_data_ray_length = 1. TRAJECTORY_BUILDER_2D . use_imu_data = false TRAJECTORY_BUILDER_2D . use_online_correlative_scan_matching = true TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . linear_search_window = 0.1 TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . translation_delta_cost_weight = 10. TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . rotation_delta_cost_weight = 1e-1 POSE_GRAPH . optimization_problem . huber_scale = 1e2 POSE_GRAPH . optimize_every_n_nodes = 35 POSE_GRAPH . constraint_builder . min_score = 0.65 return options \u8d77\u52d5\u7528 ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch> Build 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a 1 $ export ROS_MASTER_URI = http://\u81ea\u5206\u306eIP:11311 \u8d77\u52d5 1 2 3 4 $ roscore $ roslaunch ydlidar lidar.launch $ roslaunch cartographer_ros demo_revo_lds.launch $ roslaunch cartographer_ros demo_rviz.launch \u30b0\u30e9\u30d5 \u30b0\u30e9\u30d5\u3092\u8868\u793a 1 $ rosrun rqt_graph rqt_graph \u4ed6\u306ePC\u304b\u3089\u306e\u63a5\u7d9a \u74b0\u5883\u7de8\u6570 1 2 $ export ROS_MASTER_URI = http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 $ export ROS_ID = \u81ea\u5206\u306eIP rviz\u3092\u8d77\u52d5 1 $ roslaunch cartographer_ros demo_rviz.launch \u53c2\u8003 https://www.youtube.com/watch?v=4ipDP9dIYYs https://qiita.com/PINTO/items/4845c438cac05eda4d1e https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/","title":"YLiDAR\u3068Cartographer\u9023\u643a"},{"location":"02.SLAM(Nano)/04.setting/#ylidarcartographer","text":"","title":"YLiDAR\u3068Cartographer\u9023\u643a"},{"location":"02.SLAM(Nano)/04.setting/#ydlidar-jetson-nano","text":"~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 <launch> <node name= \"ydlidar_node\" pkg= \"ydlidar\" type= \"ydlidar_node\" output= \"screen\" > <param name= \"port\" type= \"string\" value= \"/dev/ydlidar\" /> <param name= \"baudrate\" type= \"int\" value= \"128000\" /> <param name= \"frame_id\" type= \"string\" value= \"laser\" /> <param name= \"angle_fixed\" type= \"bool\" value= \"true\" /> <param name= \"low_exposure\" type= \"bool\" value= \"false\" /> <param name= \"heartbeat\" type= \"bool\" value= \"false\" /> <param name= \"resolution_fixed\" type= \"bool\" value= \"true\" /> <param name= \"angle_min\" type= \"double\" value= \"-180\" /> <param name= \"angle_max\" type= \"double\" value= \"180\" /> <param name= \"range_min\" type= \"double\" value= \"0.08\" /> <param name= \"range_max\" type= \"double\" value= \"16.0\" /> <param name= \"ignore_array\" type= \"string\" value= \"\" /> <param name= \"samp_rate\" type= \"int\" value= \"9\" /> <param name= \"frequency\" type= \"double\" value= \"15\" /> </node> <node pkg= \"tf\" type= \"static_transform_publisher\" name= \"base_to_laser\" args= \"0.0 0.0 0.18 0 0.0 0.0 base_link laser 100\" > </node> </launch>","title":"YDLiDAR (Jetson nano\u5074)"},{"location":"02.SLAM(Nano)/04.setting/#cartographer-jetson-nano","text":"~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_revo_lds.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"cartographer_node\" pkg= \"cartographer_ros\" type= \"cartographer_node\" args= \" -configuration_directory $(find cartographer_ros)/configuration_files -configuration_basename revo_lds.lua\" output= \"screen\" > </node> <node name= \"robot_state_publisher\" pkg= \"robot_state_publisher\" type= \"robot_state_publisher\" /> <node name= \"cartographer_occupancy_grid_node\" pkg= \"cartographer_ros\" type= \"cartographer_occupancy_grid_node\" args= \"-resolution 0.05\" > </node> </launch> ~/catkin_ws/src/cartographer_ros/cartographer_ros/configuration_files/revo_lds.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 include \"map_builder.lua\" include \"trajectory_builder.lua\" options = { map_builder = MAP_BUILDER , trajectory_builder = TRAJECTORY_BUILDER , map_frame = \"map\" , tracking_frame = \"laser\" , published_frame = \"laser\" , odom_frame = \"odom\" , provide_odom_frame = false , use_odometry = false , publish_frame_projected_to_2d = false , use_nav_sat = false , use_landmarks = false , num_laser_scans = 1 , num_multi_echo_laser_scans = 0 , num_subdivisions_per_laser_scan = 1 , num_point_clouds = 0 , lookup_transform_timeout_sec = 0.2 , submap_publish_period_sec = 0.3 , pose_publish_period_sec = 5e-3 , trajectory_publish_period_sec = 30e-3 , rangefinder_sampling_ratio = 1. , odometry_sampling_ratio = 1. , imu_sampling_ratio = 1. , landmarks_sampling_ratio = 1. , fixed_frame_pose_sampling_ratio = 1. , } MAP_BUILDER . use_trajectory_builder_2d = true TRAJECTORY_BUILDER_2D . submaps . num_range_data = 35 TRAJECTORY_BUILDER_2D . min_range = 0.08 TRAJECTORY_BUILDER_2D . max_range = 16. TRAJECTORY_BUILDER_2D . missing_data_ray_length = 1. TRAJECTORY_BUILDER_2D . use_imu_data = false TRAJECTORY_BUILDER_2D . use_online_correlative_scan_matching = true TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . linear_search_window = 0.1 TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . translation_delta_cost_weight = 10. TRAJECTORY_BUILDER_2D . real_time_correlative_scan_matcher . rotation_delta_cost_weight = 1e-1 POSE_GRAPH . optimization_problem . huber_scale = 1e2 POSE_GRAPH . optimize_every_n_nodes = 35 POSE_GRAPH . constraint_builder . min_score = 0.65 return options \u8d77\u52d5\u7528 ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/demo_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch> Build 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u74b0\u5883\u5909\u6570\u306e\u8a2d\u5b9a 1 $ export ROS_MASTER_URI = http://\u81ea\u5206\u306eIP:11311 \u8d77\u52d5 1 2 3 4 $ roscore $ roslaunch ydlidar lidar.launch $ roslaunch cartographer_ros demo_revo_lds.launch $ roslaunch cartographer_ros demo_rviz.launch","title":"Cartographer (Jetson nano\u5074)"},{"location":"02.SLAM(Nano)/04.setting/#_1","text":"\u30b0\u30e9\u30d5\u3092\u8868\u793a 1 $ rosrun rqt_graph rqt_graph","title":"\u30b0\u30e9\u30d5"},{"location":"02.SLAM(Nano)/04.setting/#pc","text":"\u74b0\u5883\u7de8\u6570 1 2 $ export ROS_MASTER_URI = http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 $ export ROS_ID = \u81ea\u5206\u306eIP rviz\u3092\u8d77\u52d5 1 $ roslaunch cartographer_ros demo_rviz.launch","title":"\u4ed6\u306ePC\u304b\u3089\u306e\u63a5\u7d9a"},{"location":"02.SLAM(Nano)/04.setting/#_2","text":"https://www.youtube.com/watch?v=4ipDP9dIYYs https://qiita.com/PINTO/items/4845c438cac05eda4d1e https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/","title":"\u53c2\u8003"},{"location":"03.SLAM(TX2)/01.ros/","text":"TX2\u306bROS\u3092\u69cb\u7bc9 TX2\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop-full rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"TX2\u306bROS\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/01.ros/#tx2ros","text":"TX2\u7528\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7 1 2 3 sudo sh -c 'echo \"deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main\" > /etc/apt/sources.list.d/ros-latest.list' sudo apt-key adv --keyserver hkp://ha.pool.sks-keyservers.net:80 --recv-key 421C365BD9FF1F717815A3895523BAEEB01FA116 sudo apt update ROS Desktop package\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 sudo apt install ros-melodic-desktop-full rosdep\u306e\u521d\u671f\u5316 1 2 sudo rosdep init rosdep update \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source /opt/ros/melodic/setup.bash\" >> ~/.bashrc source ~/.bashrc Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 sudo apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc source ~/.bashrc","title":"TX2\u306bROS\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/02.cartographer/","text":"TX2\u306bCartographer\u3092\u69cb\u7bc9 \u30d1\u30c3\u30b1\u30fc\u30b8 1 sudo apt-get install -y python-wstool python-rosdep ninja-build Cartographer\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9 1 2 3 4 mkdir ~/catkin_ws cd catkin_ws wstool init src wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall 1 vi /home/ubuntu/catkin_ws/src/.rosinstall diff\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 --- /home/ubuntu/catkin_ws/src/.rosinstall.org 2019-04-22 06:01:15.018463519 +0000 +++ /home/ubuntu/catkin_ws/src/.rosinstall 2019-04-22 06:01:29.370431975 +0000 @@ -2,11 +2,11 @@ - git: local-name: cartographer uri: https://github.com/googlecartographer/cartographer.git - version: 1.0.0 + version: master - git: local-name: cartographer_ros uri: https://github.com/googlecartographer/cartographer_ros.git - version: 1.0.0 + version: master - git: local-name: ceres-solver uri: https://ceres-solver.googlesource.com/ceres-solver.git 1 wstool update -t src 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y \u4eca\u56de\u4f7f\u3063\u305fcartographer\u306e\u30b3\u30df\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d 1 2 3 cd ~/catkin_ws/src/cartographer_ros git rev-parse HEAD 9f8bf5b24537e60858df395a30fc8fe06264ad50 1 2 3 cd ~/catkin_ws/src/cartographer git rev-parse HEAD 51df4afcba2dbb83e57ff34e04e8f01015f59625 1 2 3 cd ~/catkin_ws/src/ceres-solver git rev-parse HEAD 19333b0f55c8462381038e70d42af43b52941128","title":"TX2\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/02.cartographer/#tx2cartographer","text":"","title":"TX2\u306bCartographer\u3092\u69cb\u7bc9"},{"location":"03.SLAM(TX2)/02.cartographer/#_1","text":"1 sudo apt-get install -y python-wstool python-rosdep ninja-build","title":"\u30d1\u30c3\u30b1\u30fc\u30b8"},{"location":"03.SLAM(TX2)/02.cartographer/#cartographer","text":"1 2 3 4 mkdir ~/catkin_ws cd catkin_ws wstool init src wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall 1 vi /home/ubuntu/catkin_ws/src/.rosinstall diff\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 --- /home/ubuntu/catkin_ws/src/.rosinstall.org 2019-04-22 06:01:15.018463519 +0000 +++ /home/ubuntu/catkin_ws/src/.rosinstall 2019-04-22 06:01:29.370431975 +0000 @@ -2,11 +2,11 @@ - git: local-name: cartographer uri: https://github.com/googlecartographer/cartographer.git - version: 1.0.0 + version: master - git: local-name: cartographer_ros uri: https://github.com/googlecartographer/cartographer_ros.git - version: 1.0.0 + version: master - git: local-name: ceres-solver uri: https://ceres-solver.googlesource.com/ceres-solver.git 1 wstool update -t src 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y \u4eca\u56de\u4f7f\u3063\u305fcartographer\u306e\u30b3\u30df\u30c3\u30c8\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d 1 2 3 cd ~/catkin_ws/src/cartographer_ros git rev-parse HEAD 9f8bf5b24537e60858df395a30fc8fe06264ad50 1 2 3 cd ~/catkin_ws/src/cartographer git rev-parse HEAD 51df4afcba2dbb83e57ff34e04e8f01015f59625 1 2 3 cd ~/catkin_ws/src/ceres-solver git rev-parse HEAD 19333b0f55c8462381038e70d42af43b52941128","title":"Cartographer\u3092\u30bd\u30fc\u30b9\u304b\u3089\u30d3\u30eb\u30c9"},{"location":"03.SLAM(TX2)/03.ydlidar_install/","text":"TX2\u306bYDLIDAR X4 Download 1 2 3 cd ~/catkin_ws/src git clone https://github.com/EAIBOT/ydlidar.git cd .. Edit scan_msg.scan_time \u3068 scan_msg.time_increment \u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u554f\u984c\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u3001YDLIDAR\u306eIssues https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002 ydlidar_node.cpp 1 vi ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp diff\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c: 1 2 3 4 5 6 7 8 9 10 11 12 13 diff -u ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp --- /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org 2019-04-17 11:52:17.775006029 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp 2019-04-17 11:52:32.206993273 +0900 @@ -131,8 +131,8 @@ scan_msg.angle_min = scan.config.min_angle; scan_msg.angle_max = scan.config.max_angle; scan_msg.angle_increment = scan.config.ang_increment; - scan_msg.scan_time = scan.config.scan_time; - scan_msg.time_increment = scan.config.time_increment; + scan_msg.scan_time = scan.config.scan_time/1000000000.0; + scan_msg.time_increment = scan.config.time_increment/1000000000.0; scan_msg.range_min = scan.config.min_range; scan_msg.range_max = scan.config.max_range; lidar.launch YDLIDAR X4\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002 Item Min. Typical Value Max. Unit Remark Range Frequency - 5000 - Hz 5000 range sampling per second Scanning Frequency 6 - 12 Hz Configurable by software Range 0.12 - >10 m Indoor Scanning Angle - 0-360 - Deg - Range resolution - <0.5 - mm Range<2m Range resolution - <1% of actual distance - mm Range>2m Angle resolution 0.48 0.50 0.52 Deg Scanning Frequency 7Hz Working life - 1500 - h Continuous working life Supply voltage 4.8 5 5.2 V Excessive voltage can damage the device. Low voltage can affect performance. Voltage ripple 0 50 100 mV High ripple affects performance and can even cause Lidar to fail to range Starting current 400 450 480 mA High current startup Working current 330 350 380 mA System work, motor rotates Baud rate - 128000 - bps 8 data bits, 1 stop bit, no parity Signal high 1.8 3.3 3.5 V When the signal voltage is >1.8V, it is high level Signal low 0 0 0.5 V When the signal voltage is <0.5V, it is low level PWM frequency - 10 - KHz PWM is a square wave signal Duty cycle range 50% 85% 100% The shorter the duty cycle, the faster the speed Laser wavelength 775 785 795 nm Infrared band Laser power - 3 5 mW Working temperature 0 20 40 \u2103 Long-term work in high temperature environment will reduce the working life Lighing environment 0 550 2200 Lux For reference only N.W. - 180 - g - \u3053\u306e\u5024\u306b\u57fa\u3065\u3044\u3066\u3001 lidar.launch \u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002 \u30d1\u30e9\u30e1\u30fc\u30bf \u5024 \u8003\u5bdf baudrate 12800 \u5358\u4f4d\u306fbps\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eBaud rate\u304b\u3089\u3002 range_min 0.12 \u5358\u4f4d\u306fm\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eRange\u304b\u3089\u3002 range_max 10.0 \u5358\u4f4d\u306fm\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eRange\u3067\u306f>10\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u6b63\u78ba\u306a\u6700\u5927\u5024\u304c\u5206\u304b\u3089\u306a\u3044\u306e\u306710.0\u3068\u3057\u3066\u304a\u304f\u3002 samp_rate 4 \u5358\u4f4d\u306fK\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eRange Frequency\u3067\u306f5000\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u30c9\u30e9\u30a4\u30d0\u30fc\u306b5K\u306f\u7121\u304f\u30014K,8K,9K,10K\u304b\u3089\u9078\u629e\u3059\u308b\u3002 frequency 7 \u5358\u4f4d\u306fHz\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eScanning Frequency\u304b\u3089\u3002 \u30ce\u30fc\u30c9\u30bf\u30a4\u30d7 static_transform_publisher \u306e x y z yaw pitch roll frame_id child_frame_id period_in_ms \u306b\u3064\u3044\u3066\u3001 x y z yaw pitch roll \u306fYDLIDAR X4\u306e\u53d6\u308a\u4ed8\u3051\u4f4d\u7f6e\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3067\u3001\u5168\u3066 0 \u306b\u3057\u307e\u3059\u3002 turtlebot3\u306enavigation\u8d70\u884c\u306b\u306f\u3001 /map \u30d5\u30ec\u30fc\u30e0\u306b /base_footprint \u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001 frame_id child_frame_id \u306f /map \u3068 /base_footprint \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 period_in_ms \u306fpublish\u3059\u308b\u5468\u671f\u3092\u30df\u30ea\u30bb\u30ab\u30f3\u30c9\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002ROS\u3067\u306f100ms(10Hz)\u304c\u3088\u3044\u5024\u3068\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u305d\u306e\u4ed6\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f\u3001 https://github.com/EAIBOT/ydlidar \u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 1 vi ~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 --- /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch.org 2019-04-23 12:03:31.620454277 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch 2019-04-26 14:39:02.769743117 +0900 @@ -1,20 +1,20 @@ <launch> <node name=\"ydlidar_node\" pkg=\"ydlidar\" type=\"ydlidar_node\" output=\"screen\" respawn=\"false\" > <param name=\"port\" type=\"string\" value=\"/dev/ydlidar\"/> - <param name=\"baudrate\" type=\"int\" value=\"115200\"/> - <param name=\"frame_id\" type=\"string\" value=\"laser_frame\"/> + <param name=\"baudrate\" type=\"int\" value=\"128000\"/> + <param name=\"frame_id\" type=\"string\" value=\"base_footprint\"/> <param name=\"low_exposure\" type=\"bool\" value=\"false\"/> <param name=\"resolution_fixed\" type=\"bool\" value=\"true\"/> <param name=\"auto_reconnect\" type=\"bool\" value=\"true\"/> <param name=\"reversion\" type=\"bool\" value=\"false\"/> <param name=\"angle_min\" type=\"double\" value=\"-180\" /> <param name=\"angle_max\" type=\"double\" value=\"180\" /> - <param name=\"range_min\" type=\"double\" value=\"0.1\" /> - <param name=\"range_max\" type=\"double\" value=\"16.0\" /> + <param name=\"range_min\" type=\"double\" value=\"0.12\" /> + <param name=\"range_max\" type=\"double\" value=\"10.0\" /> <param name=\"ignore_array\" type=\"string\" value=\"\" /> - <param name=\"samp_rate\" type=\"int\" value=\"9\"/> + <param name=\"samp_rate\" type=\"int\" value=\"4\"/> <param name=\"frequency\" type=\"double\" value=\"7\"/> </node> - <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_link_to_laser4\" - args=\"0.2245 0.0 0.2 0.0 0.0 0.0 /base_footprint /laser_frame 40\" /> + <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_footprint_to_map\" + args=\"0.0 0.0 0.0 0.0 0.0 0.0 /base_footprint /map 100\" /> </launch> Build 1 2 cd ~/catkin_ws catkin_make_isolated --install --use-ninja Add device configration 1 sudo ~/catkin_ws/src/ydlidar/startup/initenv.sh Install YDLIDAR Cartographer-ROS Cartographer\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 mkdir ~/github cd ~/github git clone https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS cd YDLIDAR-Cartographer-ROS/parameters/ sudo cp *.launch /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/ sudo cp *.lua /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ Reference YDLIDAR X4 \u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\uff1a http://www.ydlidar.com/download YDLIDAR X4 \u30c9\u30e9\u30a4\u30d0\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff1a~/catkin_ws/src/ydlidar/sdk/doc/html/classydlidar_1_1_y_dlidar_driver.html static_transform_publisher\uff1a http://wiki.ros.org/tf#static_transform_publisher","title":"TX2\u306bYDLIDAR X4"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#tx2ydlidar-x4","text":"","title":"TX2\u306bYDLIDAR X4"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#download","text":"1 2 3 cd ~/catkin_ws/src git clone https://github.com/EAIBOT/ydlidar.git cd ..","title":"Download"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#edit","text":"scan_msg.scan_time \u3068 scan_msg.time_increment \u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u554f\u984c\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u3001YDLIDAR\u306eIssues https://github.com/EAIBOT/ydlidar/issues/14 \u306b\u3042\u304c\u3063\u3066\u3044\u308b\u4fee\u6b63\u3092\u5b9f\u65bd\u3059\u308b\u3002","title":"Edit"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#ydlidar_nodecpp","text":"1 vi ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp diff\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c: 1 2 3 4 5 6 7 8 9 10 11 12 13 diff -u ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp --- /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org 2019-04-17 11:52:17.775006029 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp 2019-04-17 11:52:32.206993273 +0900 @@ -131,8 +131,8 @@ scan_msg.angle_min = scan.config.min_angle; scan_msg.angle_max = scan.config.max_angle; scan_msg.angle_increment = scan.config.ang_increment; - scan_msg.scan_time = scan.config.scan_time; - scan_msg.time_increment = scan.config.time_increment; + scan_msg.scan_time = scan.config.scan_time/1000000000.0; + scan_msg.time_increment = scan.config.time_increment/1000000000.0; scan_msg.range_min = scan.config.min_range; scan_msg.range_max = scan.config.max_range;","title":"ydlidar_node.cpp"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#lidarlaunch","text":"YDLIDAR X4\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002 Item Min. Typical Value Max. Unit Remark Range Frequency - 5000 - Hz 5000 range sampling per second Scanning Frequency 6 - 12 Hz Configurable by software Range 0.12 - >10 m Indoor Scanning Angle - 0-360 - Deg - Range resolution - <0.5 - mm Range<2m Range resolution - <1% of actual distance - mm Range>2m Angle resolution 0.48 0.50 0.52 Deg Scanning Frequency 7Hz Working life - 1500 - h Continuous working life Supply voltage 4.8 5 5.2 V Excessive voltage can damage the device. Low voltage can affect performance. Voltage ripple 0 50 100 mV High ripple affects performance and can even cause Lidar to fail to range Starting current 400 450 480 mA High current startup Working current 330 350 380 mA System work, motor rotates Baud rate - 128000 - bps 8 data bits, 1 stop bit, no parity Signal high 1.8 3.3 3.5 V When the signal voltage is >1.8V, it is high level Signal low 0 0 0.5 V When the signal voltage is <0.5V, it is low level PWM frequency - 10 - KHz PWM is a square wave signal Duty cycle range 50% 85% 100% The shorter the duty cycle, the faster the speed Laser wavelength 775 785 795 nm Infrared band Laser power - 3 5 mW Working temperature 0 20 40 \u2103 Long-term work in high temperature environment will reduce the working life Lighing environment 0 550 2200 Lux For reference only N.W. - 180 - g - \u3053\u306e\u5024\u306b\u57fa\u3065\u3044\u3066\u3001 lidar.launch \u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002 \u30d1\u30e9\u30e1\u30fc\u30bf \u5024 \u8003\u5bdf baudrate 12800 \u5358\u4f4d\u306fbps\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eBaud rate\u304b\u3089\u3002 range_min 0.12 \u5358\u4f4d\u306fm\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eRange\u304b\u3089\u3002 range_max 10.0 \u5358\u4f4d\u306fm\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eRange\u3067\u306f>10\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u6b63\u78ba\u306a\u6700\u5927\u5024\u304c\u5206\u304b\u3089\u306a\u3044\u306e\u306710.0\u3068\u3057\u3066\u304a\u304f\u3002 samp_rate 4 \u5358\u4f4d\u306fK\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eRange Frequency\u3067\u306f5000\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u30c9\u30e9\u30a4\u30d0\u30fc\u306b5K\u306f\u7121\u304f\u30014K,8K,9K,10K\u304b\u3089\u9078\u629e\u3059\u308b\u3002 frequency 7 \u5358\u4f4d\u306fHz\u3002\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306eScanning Frequency\u304b\u3089\u3002 \u30ce\u30fc\u30c9\u30bf\u30a4\u30d7 static_transform_publisher \u306e x y z yaw pitch roll frame_id child_frame_id period_in_ms \u306b\u3064\u3044\u3066\u3001 x y z yaw pitch roll \u306fYDLIDAR X4\u306e\u53d6\u308a\u4ed8\u3051\u4f4d\u7f6e\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3067\u3001\u5168\u3066 0 \u306b\u3057\u307e\u3059\u3002 turtlebot3\u306enavigation\u8d70\u884c\u306b\u306f\u3001 /map \u30d5\u30ec\u30fc\u30e0\u306b /base_footprint \u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001 frame_id child_frame_id \u306f /map \u3068 /base_footprint \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 period_in_ms \u306fpublish\u3059\u308b\u5468\u671f\u3092\u30df\u30ea\u30bb\u30ab\u30f3\u30c9\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002ROS\u3067\u306f100ms(10Hz)\u304c\u3088\u3044\u5024\u3068\u3055\u308c\u3066\u3044\u307e\u3059\u3002 \u305d\u306e\u4ed6\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f\u3001 https://github.com/EAIBOT/ydlidar \u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 1 vi ~/catkin_ws/src/ydlidar/launch/lidar.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 --- /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch.org 2019-04-23 12:03:31.620454277 +0900 +++ /home/ubuntu/catkin_ws/src/ydlidar/launch/lidar.launch 2019-04-26 14:39:02.769743117 +0900 @@ -1,20 +1,20 @@ <launch> <node name=\"ydlidar_node\" pkg=\"ydlidar\" type=\"ydlidar_node\" output=\"screen\" respawn=\"false\" > <param name=\"port\" type=\"string\" value=\"/dev/ydlidar\"/> - <param name=\"baudrate\" type=\"int\" value=\"115200\"/> - <param name=\"frame_id\" type=\"string\" value=\"laser_frame\"/> + <param name=\"baudrate\" type=\"int\" value=\"128000\"/> + <param name=\"frame_id\" type=\"string\" value=\"base_footprint\"/> <param name=\"low_exposure\" type=\"bool\" value=\"false\"/> <param name=\"resolution_fixed\" type=\"bool\" value=\"true\"/> <param name=\"auto_reconnect\" type=\"bool\" value=\"true\"/> <param name=\"reversion\" type=\"bool\" value=\"false\"/> <param name=\"angle_min\" type=\"double\" value=\"-180\" /> <param name=\"angle_max\" type=\"double\" value=\"180\" /> - <param name=\"range_min\" type=\"double\" value=\"0.1\" /> - <param name=\"range_max\" type=\"double\" value=\"16.0\" /> + <param name=\"range_min\" type=\"double\" value=\"0.12\" /> + <param name=\"range_max\" type=\"double\" value=\"10.0\" /> <param name=\"ignore_array\" type=\"string\" value=\"\" /> - <param name=\"samp_rate\" type=\"int\" value=\"9\"/> + <param name=\"samp_rate\" type=\"int\" value=\"4\"/> <param name=\"frequency\" type=\"double\" value=\"7\"/> </node> - <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_link_to_laser4\" - args=\"0.2245 0.0 0.2 0.0 0.0 0.0 /base_footprint /laser_frame 40\" /> + <node pkg=\"tf\" type=\"static_transform_publisher\" name=\"base_footprint_to_map\" + args=\"0.0 0.0 0.0 0.0 0.0 0.0 /base_footprint /map 100\" /> </launch>","title":"lidar.launch"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#build","text":"1 2 cd ~/catkin_ws catkin_make_isolated --install --use-ninja","title":"Build"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#add-device-configration","text":"1 sudo ~/catkin_ws/src/ydlidar/startup/initenv.sh","title":"Add device configration"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#install-ydlidar-cartographer-ros","text":"Cartographer\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 mkdir ~/github cd ~/github git clone https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS cd YDLIDAR-Cartographer-ROS/parameters/ sudo cp *.launch /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/ sudo cp *.lua /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/","title":"Install YDLIDAR Cartographer-ROS"},{"location":"03.SLAM(TX2)/03.ydlidar_install/#reference","text":"YDLIDAR X4 \u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\uff1a http://www.ydlidar.com/download YDLIDAR X4 \u30c9\u30e9\u30a4\u30d0\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff1a~/catkin_ws/src/ydlidar/sdk/doc/html/classydlidar_1_1_y_dlidar_driver.html static_transform_publisher\uff1a http://wiki.ros.org/tf#static_transform_publisher","title":"Reference"},{"location":"03.SLAM(TX2)/04.online_slam/","text":"Online SLAM \u30aa\u30f3\u30e9\u30a4\u30f3SLAM\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0SLAM\u306e\u3053\u3068\u3067\u3059\u3002 \u30de\u30c3\u30d7\u4f5c\u6210\u3068\u3001rosbag\u3078\u306e\u4fdd\u5b58\u3001\u30de\u30c3\u30d7\u306e\u4fdd\u5b58\u304c\u53ef\u80fd\u3067\u3059\u3002 \u52d5\u753b \u8d77\u52d5 rosbag\u306b\u4fdd\u5b58\u3059\u308b\u6642\u3001\u5f15\u6570\u306b\u4fdd\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u62e1\u5f35\u5b50\u306f .bag \u306b\u3057\u307e\u3059\u3002 \u5b9f\u884c\u306fTX2(car)\u3067\u304a\u3053\u306a\u3044\u307e\u3059\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./01.online_slam.sh myroom.bag \u5f15\u6570\u3092\u4e0e\u3048\u306a\u3044\u5834\u5408\u306frosbag\u306b\u4fdd\u5b58\u3057\u307e\u305b\u3093\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./01.online_slam.sh rviz RViz\u306fPC\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002 TX2\u3067\u5b9f\u884c\u3057\u305fonline SLAM\u306e\u8d77\u52d5\u3092\u5f85\u3063\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 1 ./02.online_rviz.sh \u8d70\u884c \u5ba4\u5185\u30922\u5468\u3057\u3066\u30de\u30c3\u30d7\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002loop closure\u306b\u3088\u308a\u30011\u5468\u3088\u308a\u3082\u7cbe\u5ea6\u304c\u3088\u304f\u306a\u308a\u3084\u3059\u3044\u3067\u3059 \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306f\u65cb\u56de\u306b\u5f31\u3044\u306e\u3067\u3001\u51fa\u6765\u308b\u3060\u3051\u3086\u3063\u304f\u308a\u8d70\u884c\u3057\u307e\u3059\u3002\uff080.5km/h\u7a0b\u5ea6\uff09 \u30de\u30c3\u30d7\u4fdd\u5b58 pbstream pbstream\u306fCartographer-ROS\u3067Localization\uff08\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\uff09\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 turtlebot3 navigation\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e map_server \u3092 cartographer_ros \u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u3001navigation\u306b\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001IMU\u7121\u3057\u3067\u52d5\u4f5c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002 \u5f15\u6570\u3067\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306b\u6307\u5b9a\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u62e1\u5f35\u306f .pbstream \u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 1 ./03.online_save_pbstream.sh myroom.bag.pbstream ros map ros map\u306fturtlebot3 navigation\u3067Localization\u3068Path Planner\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001\u5225\u9014IMU\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 rosmap_2d_yyyymmddhhmmss.pgm \u3068rosmap_2d_yyyymmddhhmmss.yaml`\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./04.online_save_rosmap.sh rosmap_2d.yaml 1 2 3 4 5 6 image : rosmap_2d . pgm resolution : 0.050000 origin : [- 8.979110 , - 11.103004 , 0.000000 ] negate : 0 occupied_thresh : 0.65 free_thresh : 0.196 \u305d\u306e\u4ed6 \u30b0\u30e9\u30d5\u8868\u793a \u30ce\u30fc\u30c9\u3092\u30b0\u30e9\u30d5\u3067\u8868\u793a 1 rosrun rqt_graph rqt_graph \u8aac\u660e 01.online_slam.sh 01.online_slam.sh \u3067\u306f\u3044\u304f\u3064\u304b\u306e\u5b9f\u884c\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002 \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3067\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u81ea\u5206(tx2)\u306eIP \u306fJetson TX2(car)\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206(tx2)\u306eIP:11311 export ROS_IP=\u81ea\u5206(tx2)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rosbag\u306b\u4fdd\u5b58\u3059\u308b\u70ba\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5f15\u6570\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 case $1 in /*\\.bag) OUTPUT_BAG=$1 ;; *.bag) OUTPUT_BAG=$PWD/$1 esac roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until roscore launch online SLAM\u3092\u8d77\u52d5 \u5f15\u6570\u304c\u3042\u308b\u3068\u304d\u306frosbag\u3078\u306e\u4fdd\u5b58\u3092\u5b9f\u65bd\u3002 1 2 3 4 5 6 7 8 9 if [ -z ${ OUTPUT_BAG } ]; then # ${ OUTPUT_BAG } is empty. roslaunch cartographer_ros online_ydlidar_2d_slam.launch else # Save to rosbag. roslaunch cartographer_ros online_ydlidar_2d_slam.launch & sleep 5 rosrun rosbag record -a -O $OUTPUT_BAG fi 02.online_rviz.sh 02.online_rviz.sh\u306f\u4ed6\u306ePC\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3(tx2)\u306eIP \u306fJetson TX2(car)\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002 \u81ea\u5206(pc)\u306eIP \u306f 02.online_rviz.sh \u3092\u5b9f\u884c\u3059\u308bPC\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3(tx2)\u306eIP:11311 export ROS_ID=\u81ea\u5206(pc)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros online_ydlidar_2d_rviz.launch \u4ed6\u306ePC\u306eROS\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001RViz\u306f md5sum Error \u304c\u767a\u751f\u3057\u3066\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 https://answers.ros.org/question/261071/rviz-client-md5sum-error/ Cartographer-ros\u306f master branch \u3092\u4f7f\u3046\u305f\u3081\u3001TX2\u3068PC\u3067\u540c\u3058\u30b3\u30df\u30c3\u30c8\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 03.online_save_pbstream.sh \u8d70\u884c\u5f8c\u3001pbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 ./03.online_save_pbstream.sh output.pbstream \u7b2c\u4e00\u5f15\u6570\u306b\u51fa\u529b\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u62e1\u5f35\u5b50 .pbstream \u3067\u6307\u5b9a\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./03.online_save_pbstream.sh output.pbstream # https://github.com/googlecartographer/cartographer_ros/blob/master/docs/source/assets_writer.rst case $1 in /*\\.pbstream) OUTPUT_PB=$1 ;; *.pbstream) OUTPUT_PB= $PWD /$1 esac echo ${ OUTPUT_PB } \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a 1 2 3 export ROS_MASTER_URI=http://192.168.0.48:11311 export ROS_IP=192.168.0.48 source /home/ubuntu/catkin_ws/install_isolated/setup.bash online SLAM\u306e\u66f4\u65b0\u3092\u505c\u6b62 1 rosservice call /finish_trajectory 0 pbstream\u5f62\u5f0f\u3067\u30de\u30c3\u30d7\u3092\u4fdd\u5b58 1 rosservice call /write_state \"{filename: ' ${ OUTPUT_PB } ', include_unfinished_submaps: true}\" \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f include_unfinished_submaps: 'true' \u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001true\u306f\u6587\u5b57\u5217\u578b 'true' \u3067\u306f\u306a\u304fbool\u578b true \u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001bool\u578b\u306e true \u6307\u5b9a\u3057\u307e\u3059\u3002 true \u306e\u4ee3\u308f\u308a\u306b 1 \u3067\u3082\u53ef\u80fd\u3067\u3059\u3002 04.online_save_rosmap.sh \u8d70\u884c\u5f8c\u3001ros map\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 rosmap_2d_yyyymmddhhmmss.pgm \u3068rosmap_2d_yyyymmddhhmmss.yaml \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002<br> pgm\u30d5\u30a1\u30a4\u30eb\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u3001 gimp \u3092\u4f7f\u3063\u3066png\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002<br> \u5b9f\u884c\u306f\u3001 01.online.sh`\u3092\u7d42\u4e86\u3059\u308b\u524d\u306b\u304a\u3053\u306a\u3044\u307e\u3059\u3002 1 ./04.online_save_rosmap.sh 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash ros map\u3068\u3057\u3066\u4fdd\u5b58 1 2 3 DATE=`date '+%Y%m%d%H%M%S'` rosrun map_server map_saver -f ./map/gridmap_2d_ ${ DATE } \u5408\u6210\u753b\u50cf\uff1a","title":"Online SLAM"},{"location":"03.SLAM(TX2)/04.online_slam/#online-slam","text":"\u30aa\u30f3\u30e9\u30a4\u30f3SLAM\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0SLAM\u306e\u3053\u3068\u3067\u3059\u3002 \u30de\u30c3\u30d7\u4f5c\u6210\u3068\u3001rosbag\u3078\u306e\u4fdd\u5b58\u3001\u30de\u30c3\u30d7\u306e\u4fdd\u5b58\u304c\u53ef\u80fd\u3067\u3059\u3002","title":"Online SLAM"},{"location":"03.SLAM(TX2)/04.online_slam/#_1","text":"","title":"\u52d5\u753b"},{"location":"03.SLAM(TX2)/04.online_slam/#_2","text":"rosbag\u306b\u4fdd\u5b58\u3059\u308b\u6642\u3001\u5f15\u6570\u306b\u4fdd\u5b58\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u62e1\u5f35\u5b50\u306f .bag \u306b\u3057\u307e\u3059\u3002 \u5b9f\u884c\u306fTX2(car)\u3067\u304a\u3053\u306a\u3044\u307e\u3059\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./01.online_slam.sh myroom.bag \u5f15\u6570\u3092\u4e0e\u3048\u306a\u3044\u5834\u5408\u306frosbag\u306b\u4fdd\u5b58\u3057\u307e\u305b\u3093\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./01.online_slam.sh","title":"\u8d77\u52d5"},{"location":"03.SLAM(TX2)/04.online_slam/#rviz","text":"RViz\u306fPC\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002 TX2\u3067\u5b9f\u884c\u3057\u305fonline SLAM\u306e\u8d77\u52d5\u3092\u5f85\u3063\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002 1 ./02.online_rviz.sh","title":"rviz"},{"location":"03.SLAM(TX2)/04.online_slam/#_3","text":"\u5ba4\u5185\u30922\u5468\u3057\u3066\u30de\u30c3\u30d7\u3092\u5b8c\u6210\u3055\u305b\u307e\u3059\u3002loop closure\u306b\u3088\u308a\u30011\u5468\u3088\u308a\u3082\u7cbe\u5ea6\u304c\u3088\u304f\u306a\u308a\u3084\u3059\u3044\u3067\u3059 \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306f\u65cb\u56de\u306b\u5f31\u3044\u306e\u3067\u3001\u51fa\u6765\u308b\u3060\u3051\u3086\u3063\u304f\u308a\u8d70\u884c\u3057\u307e\u3059\u3002\uff080.5km/h\u7a0b\u5ea6\uff09","title":"\u8d70\u884c"},{"location":"03.SLAM(TX2)/04.online_slam/#_4","text":"","title":"\u30de\u30c3\u30d7\u4fdd\u5b58"},{"location":"03.SLAM(TX2)/04.online_slam/#pbstream","text":"pbstream\u306fCartographer-ROS\u3067Localization\uff08\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\uff09\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 turtlebot3 navigation\u3067\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e map_server \u3092 cartographer_ros \u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u3001navigation\u306b\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001IMU\u7121\u3057\u3067\u52d5\u4f5c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002 \u5f15\u6570\u3067\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306b\u6307\u5b9a\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u62e1\u5f35\u306f .pbstream \u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002 1 ./03.online_save_pbstream.sh myroom.bag.pbstream","title":"pbstream"},{"location":"03.SLAM(TX2)/04.online_slam/#ros-map","text":"ros map\u306fturtlebot3 navigation\u3067Localization\u3068Path Planner\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001\u5225\u9014IMU\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 rosmap_2d_yyyymmddhhmmss.pgm \u3068rosmap_2d_yyyymmddhhmmss.yaml`\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./04.online_save_rosmap.sh rosmap_2d.yaml 1 2 3 4 5 6 image : rosmap_2d . pgm resolution : 0.050000 origin : [- 8.979110 , - 11.103004 , 0.000000 ] negate : 0 occupied_thresh : 0.65 free_thresh : 0.196","title":"ros map"},{"location":"03.SLAM(TX2)/04.online_slam/#_5","text":"","title":"\u305d\u306e\u4ed6"},{"location":"03.SLAM(TX2)/04.online_slam/#_6","text":"\u30ce\u30fc\u30c9\u3092\u30b0\u30e9\u30d5\u3067\u8868\u793a 1 rosrun rqt_graph rqt_graph","title":"\u30b0\u30e9\u30d5\u8868\u793a"},{"location":"03.SLAM(TX2)/04.online_slam/#_7","text":"","title":"\u8aac\u660e"},{"location":"03.SLAM(TX2)/04.online_slam/#01online_slamsh","text":"01.online_slam.sh \u3067\u306f\u3044\u304f\u3064\u304b\u306e\u5b9f\u884c\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002 \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3067\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u81ea\u5206(tx2)\u306eIP \u306fJetson TX2(car)\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206(tx2)\u306eIP:11311 export ROS_IP=\u81ea\u5206(tx2)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rosbag\u306b\u4fdd\u5b58\u3059\u308b\u70ba\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5f15\u6570\u304b\u3089\u53d6\u5f97\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 case $1 in /*\\.bag) OUTPUT_BAG=$1 ;; *.bag) OUTPUT_BAG=$PWD/$1 esac roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until roscore launch online SLAM\u3092\u8d77\u52d5 \u5f15\u6570\u304c\u3042\u308b\u3068\u304d\u306frosbag\u3078\u306e\u4fdd\u5b58\u3092\u5b9f\u65bd\u3002 1 2 3 4 5 6 7 8 9 if [ -z ${ OUTPUT_BAG } ]; then # ${ OUTPUT_BAG } is empty. roslaunch cartographer_ros online_ydlidar_2d_slam.launch else # Save to rosbag. roslaunch cartographer_ros online_ydlidar_2d_slam.launch & sleep 5 rosrun rosbag record -a -O $OUTPUT_BAG fi","title":"01.online_slam.sh"},{"location":"03.SLAM(TX2)/04.online_slam/#02online_rvizsh","text":"02.online_rviz.sh\u306f\u4ed6\u306ePC\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3(tx2)\u306eIP \u306fJetson TX2(car)\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002 \u81ea\u5206(pc)\u306eIP \u306f 02.online_rviz.sh \u3092\u5b9f\u884c\u3059\u308bPC\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u306a\u308a\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3(tx2)\u306eIP:11311 export ROS_ID=\u81ea\u5206(pc)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros online_ydlidar_2d_rviz.launch \u4ed6\u306ePC\u306eROS\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u7570\u306a\u308b\u5834\u5408\u306f\u3001RViz\u306f md5sum Error \u304c\u767a\u751f\u3057\u3066\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002 https://answers.ros.org/question/261071/rviz-client-md5sum-error/ Cartographer-ros\u306f master branch \u3092\u4f7f\u3046\u305f\u3081\u3001TX2\u3068PC\u3067\u540c\u3058\u30b3\u30df\u30c3\u30c8\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002","title":"02.online_rviz.sh"},{"location":"03.SLAM(TX2)/04.online_slam/#03online_save_pbstreamsh","text":"\u8d70\u884c\u5f8c\u3001pbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 ./03.online_save_pbstream.sh output.pbstream \u7b2c\u4e00\u5f15\u6570\u306b\u51fa\u529b\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u62e1\u5f35\u5b50 .pbstream \u3067\u6307\u5b9a\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./03.online_save_pbstream.sh output.pbstream # https://github.com/googlecartographer/cartographer_ros/blob/master/docs/source/assets_writer.rst case $1 in /*\\.pbstream) OUTPUT_PB=$1 ;; *.pbstream) OUTPUT_PB= $PWD /$1 esac echo ${ OUTPUT_PB } \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a 1 2 3 export ROS_MASTER_URI=http://192.168.0.48:11311 export ROS_IP=192.168.0.48 source /home/ubuntu/catkin_ws/install_isolated/setup.bash online SLAM\u306e\u66f4\u65b0\u3092\u505c\u6b62 1 rosservice call /finish_trajectory 0 pbstream\u5f62\u5f0f\u3067\u30de\u30c3\u30d7\u3092\u4fdd\u5b58 1 rosservice call /write_state \"{filename: ' ${ OUTPUT_PB } ', include_unfinished_submaps: true}\" \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f include_unfinished_submaps: 'true' \u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001true\u306f\u6587\u5b57\u5217\u578b 'true' \u3067\u306f\u306a\u304fbool\u578b true \u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001bool\u578b\u306e true \u6307\u5b9a\u3057\u307e\u3059\u3002 true \u306e\u4ee3\u308f\u308a\u306b 1 \u3067\u3082\u53ef\u80fd\u3067\u3059\u3002","title":"03.online_save_pbstream.sh"},{"location":"03.SLAM(TX2)/04.online_slam/#04online_save_rosmapsh","text":"\u8d70\u884c\u5f8c\u3001ros map\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 rosmap_2d_yyyymmddhhmmss.pgm \u3068rosmap_2d_yyyymmddhhmmss.yaml \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002<br> pgm\u30d5\u30a1\u30a4\u30eb\u306f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u306e\u3067\u3001 gimp \u3092\u4f7f\u3063\u3066png\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002<br> \u5b9f\u884c\u306f\u3001 01.online.sh`\u3092\u7d42\u4e86\u3059\u308b\u524d\u306b\u304a\u3053\u306a\u3044\u307e\u3059\u3002 1 ./04.online_save_rosmap.sh 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3\u306eIP:11311 export ROS_ID=\u81ea\u5206\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash ros map\u3068\u3057\u3066\u4fdd\u5b58 1 2 3 DATE=`date '+%Y%m%d%H%M%S'` rosrun map_server map_saver -f ./map/gridmap_2d_ ${ DATE } \u5408\u6210\u753b\u50cf\uff1a","title":"04.online_save_rosmap.sh"},{"location":"03.SLAM(TX2)/05.offline_slam/","text":"Offline SLAM \u30aa\u30d5\u30e9\u30a4\u30f3SLAM\u306f\u3001\u4e8b\u524d\u306b\u4fdd\u5b58\u3057\u3066\u3042\u308brosbag\u3092\u4f7f\u3063\u3066\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30de\u30c3\u30d7\u3092pbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u3067\u304d\u308b\u305f\u3081\u3001\u30de\u30c3\u30d7\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 \u52d5\u753b rosbag\u306b\u8a18\u9332\u958b\u59cb ./01.online_slam.sh myroom.bag \u3067 myroom.bag \u3092\u4f5c\u6210\u6e08\u307f\u306e\u5834\u5408\u306f\u4e0d\u8981\u3067\u3059\u3002 YDLIDAR\u306e\u30c8\u30d4\u30c3\u30af\u3092rosbag\u306b\u8a18\u9332\u3057\u307e\u3059\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./05.online_record.sh myroom.bag myroom.bag \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 ./01.online_slam.sh myroom.bag \u3068\u306e\u9055\u3044\u3068\u3057\u3066\u3001\u3053\u308c\u306fYDLIDAR\u306e\u5024\u3060\u3051\u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c\u5c0f\u3055\u304f\u306a\u308a\u307e\u3059\u3002 \u8d70\u884c \u8a18\u9332\u3057\u306a\u304c\u3089\u5ba4\u5185\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002 \u5ba4\u5185\u30922\u5468\u3057\u305f\u3089\u3001 Ctrol + c \u3067\u8a18\u9332\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002loop closure\u306b\u3088\u308a\u30011\u5468\u3088\u308a\u3082\u7cbe\u5ea6\u304c\u3088\u304f\u306a\u308a\u3084\u3059\u3044\u3067\u3059 \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306f\u65cb\u56de\u306b\u5f31\u3044\u306e\u3067\u3001\u51fa\u6765\u308b\u3060\u3051\u3086\u3063\u304f\u308a\u8d70\u884c\u3057\u307e\u3059\u3002\uff080.5km/h\u7a0b\u5ea6\uff09 \u30de\u30c3\u30d7\u4fdd\u5b58 pbstream pbstream\u306fCartographer-ROS\u3067Localization\uff08\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\uff09\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 rosbag\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3063\u30662D\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 TX2\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002 1 ./06.offline_slam.sh myroom.bag myroom.bag.pbstream \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 ros map rosbag\u30d5\u30a1\u30a4\u30eb\u3068pbstream\u30d5\u30a1\u30a4\u30eb\u304b\u3089ros map\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 ros map\u306fros navigation\u3067Localization\u3068Path Planner\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 \u5f15\u6570\u306f myroom.bag \u3060\u3051\u3067\u3059\u304c\u3001\u5b9f\u884c\u6642\u306b myroom.bag.pbstream \u30d5\u30a1\u30a4\u30eb\u3082\u53c2\u7167\u3057\u307e\u3059\u3002 myroom.bag_map.pgm \u3068 myroom_bag_map.yaml \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./10.offline_save_rosmap.sh myroom.bag RViz \u30de\u30c3\u30d7\u4f5c\u6210\u72b6\u6cc1\u3092\u8868\u793a\u3057\u307e\u3059\u3002 PC\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002 offline SLAM\u306f\u8a08\u7b97\u901f\u5ea6\u304c\u901f\u3051\u308c\u3070\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3088\u308a\u3082\u901f\u304f\u51e6\u7406\u304c\u7d42\u308f\u308a\u307e\u3059\u3002 1 ./08.offline_rviz.sh \u8ecc\u8de1 \u8d70\u884c\u8ecc\u8de1\u3092\u753b\u50cf\u306b\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 \u7b2c\u4e00\u5f15\u6570\u306erosbag\u30d5\u30a1\u30a4\u30eb\u306f\u8d70\u884c\u3092\u4fdd\u5b58\u3057\u305fbag\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u30de\u30c3\u30d7\u4f5c\u6210\u7528\u306b\u8d70\u884c\u3057\u305f myroom.bag \u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u7b2c\u4e8c\u5f15\u6570\u306epbstream\u30d5\u30a1\u30a4\u30eb\u306f\u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u306e myroom.bag.pbstream \u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 myroom.bag_points.ply \u3068 myroom.bag_*.png \u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./07.offline_trajectory.sh myroom.bag myroom.bag.pbstream \u8aac\u660e 05.online_record.sh YDLIDAR X4\u306e\u30bb\u30f3\u30b5\u30fc\u5024\u3092rosbag\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002 \u5f15\u6570\u306b\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./05.online_record.sh output.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./05.online_record.sh output.bag source ${ HOME } /catkin_ws/devel/setup.bash case $1 in /*\\.bag) OUTPUT_BAG=$1 ;; *.bag) OUTPUT_BAG= $PWD /$1 esac echo ${ OUTPUT_BAG } roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch -a \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30c8\u30d4\u30c3\u30af\u5168\u3066\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58 1 rosrun rosbag record -a -O $OUTPUT_BAG \u8d70\u884c\u5f8c\u306b Ctrl + c \u3067\u7d42\u4e86\u3057\u307e\u3059\u3002 06.offline_slam.sh Cartographer-ROS\u306eLocalization\u3067\u5229\u7528\u3059\u308bpbstream\u5f62\u5f0f\u306e\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u5f15\u6570\u306b\u5165\u529brosbag\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./06.offline_slam.sh input.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./06.offline_slam.sh input.bag #https://www.ncnynl.com/archives/201811/2789.html case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } cartographer-ros\u3092\u5229\u7528\u3059\u308b\u306e\u3067bash\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206(tx2)\u306eIP:11311 export ROS_IP=\u81ea\u5206(tx2)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch offline SLAM\u8d77\u52d5 1 roslaunch cartographer_ros offline_ydlidar_2d_slam.launch bag_filenames:= ${ INPUT_BAG } pbstream\u4fdd\u5b58 1 rosservice call /write_state ${ INPUT_BAG } .pbstream pbstream\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001rosbag\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001online SLAM\u3067pbstream\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002 07.offline_trajectory.sh \u30de\u30c3\u30d7\u3068\u306a\u308bpbstream\u30d5\u30a1\u30a4\u30eb\u3068\u3001\u305d\u306e\u30de\u30c3\u30d7\u5185\u3092\u8d70\u884c\u3057\u3066\u4fdd\u5b58\u3057\u305frosbag\u306e\u8d70\u884c\u8ecc\u8de1\u3092\u51fa\u529b\u3057\u307e\u3059\u3002 input.bag \u306f\u8d70\u884c\u3092\u4fdd\u5b58\u3057\u305frosbag\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 myroom.bag.pbstream \u306f\u30de\u30c3\u30d7\u306epbstream\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 1 ./07.offline_trajectory.sh input.bag myroom.bag.pbstream \u7b2c\u4e00\u5f15\u6570\u306bbag\u30d5\u30a1\u30a4\u30eb\u3001\u7b2c\u4e8c\u5f15\u6570\u306bpbstream\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # usage: # ./07.offline_trajectory.sh input.bag input.bag.pbstream case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } case $2 in /*\\.pbstream) INPUT_PB=$2 ;; *.pbstream) INPUT_PB= $PWD /$2 esac echo ${ INPUT_PB } \u8d77\u52d5\u6642\u306e\u74b0\u5883\u5909\u6570 1 2 3 export ROS_MASTER_URI=http://192.168.0.48:11311 export ROS_IP=192.168.0.48 source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch \u8ecc\u8de1\u3092\u51fa\u529b 1 2 3 roslaunch cartographer_ros offline_ydlidar_2d_assets_writer.launch \\ bag_filenames:= ${ INPUT_BAG } \\ pose_graph_filename:= ${ INPUT_PB } 10.offline_save_rosmap.sh rosbag\u30d5\u30a1\u30a4\u30eb\u3068pbstream\u30d5\u30a1\u30a4\u30eb\u304b\u3089ros map\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 ros map\u306fros navigation\u3067Localization\u3068Path Planner\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 ./10.offline_save_rosmap.sh myroom.bag \u5f15\u6570\u306bbag\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 pbstream\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306f bag\u30d5\u30a1\u30a4\u30eb\u540d .pbstream\u3068\u3057\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./10.offline_save_rosmap.sh input.bag #https://www.ncnynl.com/archives/201811/2789.html case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } \u74b0\u5883\u5909\u6570\u8a2d\u5b9a 1 2 3 export ROS_MASTER_URI=http://192.168.0.48:11311 export ROS_IP=192.168.0.48 source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch ros map\u4f5c\u6210 1 roslaunch cartographer_ros offline_ydlidar_2d_assets_writer_ros_map.launch bag_filenames:= ${ INPUT_BAG } pose_graph_filename:= ${ INPUT_BAG } .pbstream","title":"Offline SLAM"},{"location":"03.SLAM(TX2)/05.offline_slam/#offline-slam","text":"\u30aa\u30d5\u30e9\u30a4\u30f3SLAM\u306f\u3001\u4e8b\u524d\u306b\u4fdd\u5b58\u3057\u3066\u3042\u308brosbag\u3092\u4f7f\u3063\u3066\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30de\u30c3\u30d7\u3092pbstream\u5f62\u5f0f\u3067\u4fdd\u5b58\u3067\u304d\u308b\u305f\u3081\u3001\u30de\u30c3\u30d7\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002","title":"Offline SLAM"},{"location":"03.SLAM(TX2)/05.offline_slam/#_1","text":"","title":"\u52d5\u753b"},{"location":"03.SLAM(TX2)/05.offline_slam/#rosbag","text":"./01.online_slam.sh myroom.bag \u3067 myroom.bag \u3092\u4f5c\u6210\u6e08\u307f\u306e\u5834\u5408\u306f\u4e0d\u8981\u3067\u3059\u3002 YDLIDAR\u306e\u30c8\u30d4\u30c3\u30af\u3092rosbag\u306b\u8a18\u9332\u3057\u307e\u3059\u3002 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./05.online_record.sh myroom.bag myroom.bag \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 ./01.online_slam.sh myroom.bag \u3068\u306e\u9055\u3044\u3068\u3057\u3066\u3001\u3053\u308c\u306fYDLIDAR\u306e\u5024\u3060\u3051\u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u304c\u5c0f\u3055\u304f\u306a\u308a\u307e\u3059\u3002","title":"rosbag\u306b\u8a18\u9332\u958b\u59cb"},{"location":"03.SLAM(TX2)/05.offline_slam/#_2","text":"\u8a18\u9332\u3057\u306a\u304c\u3089\u5ba4\u5185\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002 \u5ba4\u5185\u30922\u5468\u3057\u305f\u3089\u3001 Ctrol + c \u3067\u8a18\u9332\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002loop closure\u306b\u3088\u308a\u30011\u5468\u3088\u308a\u3082\u7cbe\u5ea6\u304c\u3088\u304f\u306a\u308a\u3084\u3059\u3044\u3067\u3059 \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306f\u65cb\u56de\u306b\u5f31\u3044\u306e\u3067\u3001\u51fa\u6765\u308b\u3060\u3051\u3086\u3063\u304f\u308a\u8d70\u884c\u3057\u307e\u3059\u3002\uff080.5km/h\u7a0b\u5ea6\uff09","title":"\u8d70\u884c"},{"location":"03.SLAM(TX2)/05.offline_slam/#_3","text":"","title":"\u30de\u30c3\u30d7\u4fdd\u5b58"},{"location":"03.SLAM(TX2)/05.offline_slam/#pbstream","text":"pbstream\u306fCartographer-ROS\u3067Localization\uff08\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\uff09\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 rosbag\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3063\u30662D\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 TX2\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002 1 ./06.offline_slam.sh myroom.bag myroom.bag.pbstream \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002","title":"pbstream"},{"location":"03.SLAM(TX2)/05.offline_slam/#ros-map","text":"rosbag\u30d5\u30a1\u30a4\u30eb\u3068pbstream\u30d5\u30a1\u30a4\u30eb\u304b\u3089ros map\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 ros map\u306fros navigation\u3067Localization\u3068Path Planner\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 \u5f15\u6570\u306f myroom.bag \u3060\u3051\u3067\u3059\u304c\u3001\u5b9f\u884c\u6642\u306b myroom.bag.pbstream \u30d5\u30a1\u30a4\u30eb\u3082\u53c2\u7167\u3057\u307e\u3059\u3002 myroom.bag_map.pgm \u3068 myroom_bag_map.yaml \u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./10.offline_save_rosmap.sh myroom.bag","title":"ros map"},{"location":"03.SLAM(TX2)/05.offline_slam/#rviz","text":"\u30de\u30c3\u30d7\u4f5c\u6210\u72b6\u6cc1\u3092\u8868\u793a\u3057\u307e\u3059\u3002 PC\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002 offline SLAM\u306f\u8a08\u7b97\u901f\u5ea6\u304c\u901f\u3051\u308c\u3070\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3088\u308a\u3082\u901f\u304f\u51e6\u7406\u304c\u7d42\u308f\u308a\u307e\u3059\u3002 1 ./08.offline_rviz.sh","title":"RViz"},{"location":"03.SLAM(TX2)/05.offline_slam/#_4","text":"\u8d70\u884c\u8ecc\u8de1\u3092\u753b\u50cf\u306b\u51fa\u529b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 \u7b2c\u4e00\u5f15\u6570\u306erosbag\u30d5\u30a1\u30a4\u30eb\u306f\u8d70\u884c\u3092\u4fdd\u5b58\u3057\u305fbag\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u30de\u30c3\u30d7\u4f5c\u6210\u7528\u306b\u8d70\u884c\u3057\u305f myroom.bag \u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002 \u7b2c\u4e8c\u5f15\u6570\u306epbstream\u30d5\u30a1\u30a4\u30eb\u306f\u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u306e myroom.bag.pbstream \u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 myroom.bag_points.ply \u3068 myroom.bag_*.png \u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002 1 ./07.offline_trajectory.sh myroom.bag myroom.bag.pbstream","title":"\u8ecc\u8de1"},{"location":"03.SLAM(TX2)/05.offline_slam/#_5","text":"","title":"\u8aac\u660e"},{"location":"03.SLAM(TX2)/05.offline_slam/#05online_recordsh","text":"YDLIDAR X4\u306e\u30bb\u30f3\u30b5\u30fc\u5024\u3092rosbag\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002 \u5f15\u6570\u306b\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./05.online_record.sh output.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./05.online_record.sh output.bag source ${ HOME } /catkin_ws/devel/setup.bash case $1 in /*\\.bag) OUTPUT_BAG=$1 ;; *.bag) OUTPUT_BAG= $PWD /$1 esac echo ${ OUTPUT_BAG } roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch -a \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30c8\u30d4\u30c3\u30af\u5168\u3066\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58 1 rosrun rosbag record -a -O $OUTPUT_BAG \u8d70\u884c\u5f8c\u306b Ctrl + c \u3067\u7d42\u4e86\u3057\u307e\u3059\u3002","title":"05.online_record.sh"},{"location":"03.SLAM(TX2)/05.offline_slam/#06offline_slamsh","text":"Cartographer-ROS\u306eLocalization\u3067\u5229\u7528\u3059\u308bpbstream\u5f62\u5f0f\u306e\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 \u5f15\u6570\u306b\u5165\u529brosbag\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./06.offline_slam.sh input.bag 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./06.offline_slam.sh input.bag #https://www.ncnynl.com/archives/201811/2789.html case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } cartographer-ros\u3092\u5229\u7528\u3059\u308b\u306e\u3067bash\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304a\u304d\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206(tx2)\u306eIP:11311 export ROS_IP=\u81ea\u5206(tx2)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch offline SLAM\u8d77\u52d5 1 roslaunch cartographer_ros offline_ydlidar_2d_slam.launch bag_filenames:= ${ INPUT_BAG } pbstream\u4fdd\u5b58 1 rosservice call /write_state ${ INPUT_BAG } .pbstream pbstream\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001rosbag\u30d5\u30a1\u30a4\u30eb\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002 \u305d\u306e\u305f\u3081\u3001online SLAM\u3067pbstream\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002","title":"06.offline_slam.sh"},{"location":"03.SLAM(TX2)/05.offline_slam/#07offline_trajectorysh","text":"\u30de\u30c3\u30d7\u3068\u306a\u308bpbstream\u30d5\u30a1\u30a4\u30eb\u3068\u3001\u305d\u306e\u30de\u30c3\u30d7\u5185\u3092\u8d70\u884c\u3057\u3066\u4fdd\u5b58\u3057\u305frosbag\u306e\u8d70\u884c\u8ecc\u8de1\u3092\u51fa\u529b\u3057\u307e\u3059\u3002 input.bag \u306f\u8d70\u884c\u3092\u4fdd\u5b58\u3057\u305frosbag\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 myroom.bag.pbstream \u306f\u30de\u30c3\u30d7\u306epbstream\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 1 ./07.offline_trajectory.sh input.bag myroom.bag.pbstream \u7b2c\u4e00\u5f15\u6570\u306bbag\u30d5\u30a1\u30a4\u30eb\u3001\u7b2c\u4e8c\u5f15\u6570\u306bpbstream\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # usage: # ./07.offline_trajectory.sh input.bag input.bag.pbstream case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } case $2 in /*\\.pbstream) INPUT_PB=$2 ;; *.pbstream) INPUT_PB= $PWD /$2 esac echo ${ INPUT_PB } \u8d77\u52d5\u6642\u306e\u74b0\u5883\u5909\u6570 1 2 3 export ROS_MASTER_URI=http://192.168.0.48:11311 export ROS_IP=192.168.0.48 source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch \u8ecc\u8de1\u3092\u51fa\u529b 1 2 3 roslaunch cartographer_ros offline_ydlidar_2d_assets_writer.launch \\ bag_filenames:= ${ INPUT_BAG } \\ pose_graph_filename:= ${ INPUT_PB }","title":"07.offline_trajectory.sh"},{"location":"03.SLAM(TX2)/05.offline_slam/#10offline_save_rosmapsh","text":"rosbag\u30d5\u30a1\u30a4\u30eb\u3068pbstream\u30d5\u30a1\u30a4\u30eb\u304b\u3089ros map\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002 ros map\u306fros navigation\u3067Localization\u3068Path Planner\u3092\u5b9f\u884c\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 ./10.offline_save_rosmap.sh myroom.bag \u5f15\u6570\u306bbag\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 pbstream\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u306f bag\u30d5\u30a1\u30a4\u30eb\u540d .pbstream\u3068\u3057\u3066\u3044\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 # usage: # ./10.offline_save_rosmap.sh input.bag #https://www.ncnynl.com/archives/201811/2789.html case $1 in /*\\.bag) INPUT_BAG=$1 ;; *.bag) INPUT_BAG= $PWD /$1 esac echo ${ INPUT_BAG } \u74b0\u5883\u5909\u6570\u8a2d\u5b9a 1 2 3 export ROS_MASTER_URI=http://192.168.0.48:11311 export ROS_IP=192.168.0.48 source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch ros map\u4f5c\u6210 1 roslaunch cartographer_ros offline_ydlidar_2d_assets_writer_ros_map.launch bag_filenames:= ${ INPUT_BAG } pose_graph_filename:= ${ INPUT_BAG } .pbstream","title":"10.offline_save_rosmap.sh"},{"location":"03.SLAM(TX2)/06.localization/","text":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306f\u3001\u8aad\u307f\u8fbc\u3093\u3060\u30de\u30c3\u30d7\u306e\u4e2d\u306e\u3069\u3053\u306b\u5c45\u308b\u306e\u304b\u3092\u63a8\u5b9a\u3059\u308b\u6a5f\u80fd\u306e\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u521d\u671f\u4f4d\u7f6e\u3068\u3057\u3066\u3001\u30de\u30c3\u30d7\u4f5c\u6210\u6642\u306e\u521d\u671f\u4f4d\u7f6e\u306b\u5408\u308f\u305b\u3066\u304a\u304f\u3053\u3068\u304c\u671b\u307e\u3057\u3044\u3067\u3059\u3002 \u521d\u671f\u4f4d\u7f6e\u304c\u4e0d\u4e00\u81f4\u3057\u305f\u72b6\u614b\u3067\u306f\u3001\u3046\u307e\u304f\u8a8d\u8b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002 \u307e\u305f\u3001\u56de\u8ee2\u306b\u5bfe\u3057\u3066\u6975\u7aef\u306b\u5f31\u3044\u305f\u3081\u3001\u30ab\u30fc\u30d6\u306f\u3086\u3063\u304f\u308a\u8d70\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 \u52d5\u753b \u5b9f\u884c TX2(car)\u3067\u5b9f\u884c 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./09.online_localization.sh myroom.bag.pbstream RViz RViz\u306f\u4ed6\u306ePC\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002 1 ./02.online_rviz.sh \u8d70\u884c \u30e9\u30b8\u30b3\u30f3\u306b\u4e57\u305b\u3066\u90e8\u5c4b\u306e\u4e2d\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002 \u8aac\u660e 09.online_localization.sh \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u5f15\u6570\u306b\u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./09.online_localization.sh input.bag.pbstream 1 2 3 4 5 6 7 8 9 10 11 # usage: # ./09.online_localization.sh input.bag.pbstream case $1 in /*\\.pbstream) INPUT_PB=$1 ;; *.pbstream) INPUT_PB= $PWD /$1 esac echo ${ INPUT_PB } \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206(tx2)\u306eIP:11311 export ROS_IP=\u81ea\u5206(tx2)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch Localization\u3092\u8d77\u52d5 1 roslaunch cartographer_ros online_ydlidar_2d_localization.launch load_state_filename:= ${ INPUT_PB } 02.online_rviz.sh RViz\u306fPC\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3(tx2)\u306eIP:11311 export ROS_ID=\u81ea\u5206(px)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros online_ydlidar_2d_rviz.launch","title":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a"},{"location":"03.SLAM(TX2)/06.localization/#_1","text":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306f\u3001\u8aad\u307f\u8fbc\u3093\u3060\u30de\u30c3\u30d7\u306e\u4e2d\u306e\u3069\u3053\u306b\u5c45\u308b\u306e\u304b\u3092\u63a8\u5b9a\u3059\u308b\u6a5f\u80fd\u306e\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u521d\u671f\u4f4d\u7f6e\u3068\u3057\u3066\u3001\u30de\u30c3\u30d7\u4f5c\u6210\u6642\u306e\u521d\u671f\u4f4d\u7f6e\u306b\u5408\u308f\u305b\u3066\u304a\u304f\u3053\u3068\u304c\u671b\u307e\u3057\u3044\u3067\u3059\u3002 \u521d\u671f\u4f4d\u7f6e\u304c\u4e0d\u4e00\u81f4\u3057\u305f\u72b6\u614b\u3067\u306f\u3001\u3046\u307e\u304f\u8a8d\u8b58\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002 \u307e\u305f\u3001\u56de\u8ee2\u306b\u5bfe\u3057\u3066\u6975\u7aef\u306b\u5f31\u3044\u305f\u3081\u3001\u30ab\u30fc\u30d6\u306f\u3086\u3063\u304f\u308a\u8d70\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002","title":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a"},{"location":"03.SLAM(TX2)/06.localization/#_2","text":"","title":"\u52d5\u753b"},{"location":"03.SLAM(TX2)/06.localization/#_3","text":"TX2(car)\u3067\u5b9f\u884c 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./09.online_localization.sh myroom.bag.pbstream","title":"\u5b9f\u884c"},{"location":"03.SLAM(TX2)/06.localization/#rviz","text":"RViz\u306f\u4ed6\u306ePC\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002 1 ./02.online_rviz.sh","title":"RViz"},{"location":"03.SLAM(TX2)/06.localization/#_4","text":"\u30e9\u30b8\u30b3\u30f3\u306b\u4e57\u305b\u3066\u90e8\u5c4b\u306e\u4e2d\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002","title":"\u8d70\u884c"},{"location":"03.SLAM(TX2)/06.localization/#_5","text":"","title":"\u8aac\u660e"},{"location":"03.SLAM(TX2)/06.localization/#09online_localizationsh","text":"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002 \u5f15\u6570\u306b\u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002 1 ./09.online_localization.sh input.bag.pbstream 1 2 3 4 5 6 7 8 9 10 11 # usage: # ./09.online_localization.sh input.bag.pbstream case $1 in /*\\.pbstream) INPUT_PB=$1 ;; *.pbstream) INPUT_PB= $PWD /$1 esac echo ${ INPUT_PB } \u30e9\u30b8\u30b3\u30f3\u306e\u8d70\u884c\u4e2d\u306f\u30e2\u30cb\u30bf\u30fc\u304c\u898b\u308c\u306a\u3044\u306e\u3067\u3001\u4ed6\u306ePC\u3067RViz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306bexport\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://\u81ea\u5206(tx2)\u306eIP:11311 export ROS_IP=\u81ea\u5206(tx2)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash roscore\u3092\u8d77\u52d5 1 2 roscore & sleep 5 # wait until roscore launch YDLIDAR\u3092\u8d77\u52d5 1 2 roslaunch ydlidar lidar.launch & sleep 15 # wait until ydlidar launch Localization\u3092\u8d77\u52d5 1 roslaunch cartographer_ros online_ydlidar_2d_localization.launch load_state_filename:= ${ INPUT_PB }","title":"09.online_localization.sh"},{"location":"03.SLAM(TX2)/06.localization/#02online_rvizsh","text":"RViz\u306fPC\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002 1 2 3 export ROS_MASTER_URI=http://roscore\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30de\u30b7\u30f3(tx2)\u306eIP:11311 export ROS_ID=\u81ea\u5206(px)\u306eIP source /home/ubuntu/catkin_ws/install_isolated/setup.bash rviz\u3092\u8d77\u52d5 1 roslaunch cartographer_ros online_ydlidar_2d_rviz.launch","title":"02.online_rviz.sh"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/","text":"YDLIDAR Cartographer ROS https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u4f5c\u308a\u65b9\u306b\u3064\u3044\u3066 \u3053\u306e\u5185\u5bb9\u306f\u3001Cartographer-ROS\u306e master branch \u306e\u5185\u5bb9\u3067\u3059\u3002 v1.0.0 \u3067\u306f\u306a\u3044\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002 Cartographer ROS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3092\u898b\u308b\u3068\u3001 backpack \u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066\u81ea\u5206\u306e\u30ed\u30dc\u30c3\u30c8\u5411\u3051\u306b .launch \u30d5\u30a1\u30a4\u30eb\u3068 .lua \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3088\u3046\u3067\u3059\u3002 YDLIDAR\u7528\u306bbackpack_2d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 # Launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_backpack_2d.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_ros_map.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer_ros_map.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_node.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_node.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_backpack_2d.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_slam.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/visualize_pbstream.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_visualize_pbstream.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/demo_backpack_2d_localization.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_localization.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/backpack_2d.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_slam.launch # Lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ci.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_ros_map.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/visualize_pbstream.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_visualize_pbstream.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization_evaluation.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_server.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_server.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d.lua \u305d\u306e\u4ed6\u306b\u3001online\u3068offline\u7528\u306erviz.launch\u3082\u4f5c\u6210\u3057\u307e\u3059\u3002 \u3053\u308c\u3089\u306e\u7de8\u96c6\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002 offline_ydlidar_2d_rviz.launch \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u6642\u9593\u3067RViz\u3092\u4f7f\u3046\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 rosbag play\u306e\u6642\u306b\u4f7f\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u65b0\u898f\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30dd\u30a4\u30f3\u30c8\u306f\u3001rosbag\u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u6642\u9593\u3092\u4f7f\u3046\u305f\u3081\u306b /use_sim_time \u304c true \u3067\u3042\u308b\u3053\u3068\u3067\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch> online_ydlidar_2d_rviz.launch \u30b7\u30b9\u30c6\u30e0\u6642\u9593\u3067RViz\u3092\u4f7f\u3046\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u51e6\u7406\u306e\u6642\u306b\u4f7f\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u65b0\u898f\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30dd\u30a4\u30f3\u30c8\u306f\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6642\u9593\u3092\u4f7f\u3046\u305f\u3081\u306b /use_sim_time \u304c false \u3067\u3042\u308b\u3053\u3068\u3067\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"false\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch> offline_ydlidar_2d_assets_writer.launch \u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_backpack_2d.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer.launch 2019-04-23 16:51:23.824182122 +0900 @@ -15,7 +15,7 @@ --> <launch> - <arg name=\"config_file\" default=\"assets_writer_backpack_2d.lua\"/> + <arg name=\"config_file\" default=\"offline_ydlidar_2d_assets_writer.lua\"/> <node name=\"cartographer_assets_writer\" pkg=\"cartographer_ros\" required=\"true\" type=\"cartographer_assets_writer\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files offline_ydlidar_2d_assets_writer_ros_map.launch rosbag \u3068 pbstream \u30d5\u30a1\u30a4\u30eb\u304b\u3089 ros map \u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer_ros_map.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_ros_map.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer_ros_map.launch 2019-04-24 15:12:46.333008437 +0900 @@ -24,7 +24,7 @@ <node name=\"cartographer_assets_writer\" pkg=\"cartographer_ros\" required=\"true\" type=\"cartographer_assets_writer\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename assets_writer_ros_map.lua + -configuration_basename offline_ydlidar_2d_assets_writer_ros_map.lua -urdf_filename $(arg urdf_filename) -bag_filenames $(arg bag_filenames) -pose_graph_filename $(arg pose_graph_filename)\" offline_ydlidar_2d_node.launch offline SLAM\u3092\u8d77\u52d5\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 rviz\u306f\u4ed6\u306ePC\u3067\u8d77\u52d5\u3059\u308b\u305f\u3081\u3001rviz\u306e\u8a2d\u5b9a\u3092\u524a\u9664\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_node.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_node.launch 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_node.launch 2019-04-22 16:33:45.214304025 +0900 @@ -16,8 +16,6 @@ <launch> <arg name=\"bag_filenames\"/> - <arg name=\"no_rviz\"/> - <arg name=\"rviz_config\"/> <arg name=\"configuration_directory\"/> <arg name=\"configuration_basenames\"/> <arg name=\"urdf_filenames\"/> @@ -25,21 +23,7 @@ <param name=\"/use_sim_time\" value=\"true\" /> - <group unless=\"$(arg no_rviz)\"> - <node name=\"rviz\" - pkg=\"rviz\" - type=\"rviz\" - required=\"true\" - args=\"-d $(arg rviz_config)\" /> - - <node name=\"cartographer_occupancy_grid_node\" - pkg=\"cartographer_ros\" - type=\"cartographer_occupancy_grid_node\" - args=\"-resolution 0.05\" /> - </group> - <node name=\"cartographer_offline_node\" pkg=\"cartographer_ros\" - required=\"$(arg no_rviz)\" type=\"cartographer_offline_node\" args=\" -configuration_directory $(arg configuration_directory) -configuration_basenames $(arg configuration_basenames) offline_ydlidar_2d_slam.launch offline SLAM\u306f\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u305f\u3081\u306epbstream\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_slam.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_backpack_2d.launch 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_slam.launch 2019-04-23 16:52:31.793372397 +0900 @@ -16,18 +16,14 @@ <launch> <arg name=\"bag_filenames\"/> - <arg name=\"no_rviz\" default=\"false\"/> - <arg name=\"rviz_config\" default=\"$(find cartographer_ros)/configuration_files/demo_2d.rviz\"/> <arg name=\"configuration_directory\" default=\"$(find cartographer_ros)/configuration_files\"/> - <arg name=\"configuration_basenames\" default=\"backpack_2d.lua\"/> + <arg name=\"configuration_basenames\" default=\"ydlidar_2d.lua\"/> <arg name=\"urdf_filenames\" default=\"$(find cartographer_ros)/urdf/backpack_2d.urdf\"/> <arg name=\"launch_prefix\" default=\"\"/> <remap from=\"echoes\" to=\"horizontal_laser_2d\"/> - <include file=\"$(find cartographer_ros)/launch/offline_node.launch\"> + <include file=\"$(find cartographer_ros)/launch/offline_ydlidar_2d_node.launch\"> <arg name=\"bag_filenames\" value=\"$(arg bag_filenames)\"/> - <arg name=\"no_rviz\" value=\"$(arg no_rviz)\"/> - <arg name=\"rviz_config\" value=\"$(arg rviz_config)\"/> <arg name=\"configuration_directory\" value=\"$(arg configuration_directory)\"/> <arg name=\"configuration_basenames\" value=\"$(arg configuration_basenames)\"/> <arg name=\"urdf_filenames\" value=\"$(arg urdf_filenames)\"/> offline_ydlidar_2d_visualize_pbstream.launch pbstream\u30d5\u30a1\u30a4\u30eb\u3092RViz\u3067\u8868\u793a\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_visualize_pbstream.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/visualize_pbstream.launch 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_visualize_pbstream.launch 2019-04-23 16:53:04.720217624 +0900 @@ -20,7 +20,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename visualize_pbstream.lua + -configuration_basename offline_ydlidar_2d_visualize_pbstream.lua -load_state_filename $(arg pbstream_filename) -load_frozen_state=false -start_trajectory_with_default_topics=false\" online_ydlidar_2d_localization.launch \u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 \u4ed6\u306ePC\u3067rviz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u3001 rviz \u306f\u524a\u9664\u3057\u307e\u3059\u3002 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u884c\u3046\u305f\u3081\u306b\u3001 rosbag play \u306f\u524a\u9664\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_localization.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/demo_backpack_2d_localization.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_localization.launch 2019-04-23 16:49:46.923510438 +0900 @@ -15,7 +15,7 @@ --> <launch> - <param name=\"/use_sim_time\" value=\"true\" /> + <param name=\"/use_sim_time\" value=\"false\" /> <param name=\"robot_description\" textfile=\"$(find cartographer_ros)/urdf/backpack_2d.urdf\" /> @@ -26,7 +26,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d_localization.lua + -configuration_basename online_ydlidar_2d_localization.lua -load_state_filename $(arg load_state_filename)\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> @@ -35,8 +35,4 @@ <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> - <node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" required=\"true\" - args=\"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> - <node name=\"playbag\" pkg=\"rosbag\" type=\"play\" - args=\"--clock $(arg bag_filename)\" /> </launch> online_ydlidar_2d_slam.launch online SLAM\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_slam.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/backpack_2d.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_slam.launch 2019-04-23 16:53:43.919798719 +0900 @@ -24,7 +24,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d.lua\" + -configuration_basename ydlidar_2d.lua\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> </node> offline_ydlidar_2d_assets_writer_ci.lua offline_ydlidar_2d_assets_writer.lua \u3068\u8a2d\u5b9a\u65b9\u91dd\u306f\u540c\u3058\u3067\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ci.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ci.lua 2019-04-23 13:58:35.890889854 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.12, + max_range = 10., }, { action = \"dump_num_points\", offline_ydlidar_2d_assets_writer.lua \u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 tracking_frame \u306fYDLIDAR\u30c9\u30e9\u30a4\u30d0\u30fc\u5074\u306e\u8a2d\u5b9a\u3068\u540c\u3058\u306b\u3057\u307e\u3059\u3002 \u6709\u52b9\u8ddd\u96e2\u306fYDLIDAR X4\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306e\u5024\u306b\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer.lua 2019-04-23 13:59:26.954920158 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.12, + max_range = 10., }, { action = \"dump_num_points\", offline_ydlidar_2d_assets_writer_ros_map.lua rosbag\u3068pbstream\u30d5\u30a1\u30a4\u30eb\u304b\u3089ros map\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 /catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_ros_map.lua /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_ros_map.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua 2019-04-25 12:33:26.768924427 +0900 @@ -13,12 +13,12 @@ -- limitations under the License. options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.12, + max_range = 10., }, { action = \"write_ros_map\", offline_ydlidar_2d_visualize_pbstream.lua pbstream\u30d5\u30a1\u30a4\u30eb\u3092RViz\u3067\u8868\u793a\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_visualize_pbstream.lua 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/visualize_pbstream.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_visualize_pbstream.lua 2019-04-23 16:58:10.355188256 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d.lua\" +include \"ydlidar_2d.lua\" POSE_GRAPH.constraint_builder.sampling_ratio = 0 POSE_GRAPH.global_sampling_ratio = 0 online_ydlidar_2d_localization_evaluation.lua \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0Pure Localization\u3092\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization_evaluation.lua 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization_evaluation.lua2019-04-23 16:59:36.830045343 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d_localization.lua\" +include \"online_ydlidar_2d_localization.lua\" -- output map to base_link for evaluation options.provide_odom_frame = false online_ydlidar_2d_localization.lua \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0Pure Localization\u3092\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization.lua 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization.lua 2019-04-23 16:59:53.033038811 +0900 @@ -12,11 +12,13 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d.lua\" +include \"ydlidar_2d.lua\" TRAJECTORY_BUILDER.pure_localization_trimmer = { max_submaps_to_keep = 3, } -POSE_GRAPH.optimize_every_n_nodes = 20 +POSE_GRAPH.optimize_every_n_nodes = 2 return options online_ydlidar_2d_server.lua \u5909\u66f4\u306a\u3057 1 ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d_server.lua ydlidar_2d.lua online SLAM\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d.lua 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d.lua 2019-04-23 14:00:17.750949205 +0900 @@ -19,8 +19,8 @@ map_builder = MAP_BUILDER, trajectory_builder = TRAJECTORY_BUILDER, map_frame = \"map\", - tracking_frame = \"base_link\", - published_frame = \"base_link\", + tracking_frame = \"laser_frame\", + published_frame = \"laser_frame\", odom_frame = \"odom\", provide_odom_frame = true, publish_frame_projected_to_2d = false, @@ -28,9 +28,9 @@ use_odometry = false, use_nav_sat = false, use_landmarks = false, - num_laser_scans = 0, - num_multi_echo_laser_scans = 1, - num_subdivisions_per_laser_scan = 10, + num_laser_scans = 1, + num_multi_echo_laser_scans = 0, + num_subdivisions_per_laser_scan = 1, num_point_clouds = 0, lookup_transform_timeout_sec = 0.2, submap_publish_period_sec = 0.3, @@ -44,6 +44,18 @@ } MAP_BUILDER.use_trajectory_builder_2d = true -TRAJECTORY_BUILDER_2D.num_accumulated_range_data = 10 +TRAJECTORY_BUILDER_2D.submaps.num_range_data = 35 +TRAJECTORY_BUILDER_2D.min_range = 0.12 +TRAJECTORY_BUILDER_2D.max_range = 10. +TRAJECTORY_BUILDER_2D.missing_data_ray_length = 1. +TRAJECTORY_BUILDER_2D.use_imu_data = false +TRAJECTORY_BUILDER_2D.use_online_correlative_scan_matching = true +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.linear_search_window = 0.1 +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.translation_delta_cost_weight = 10. +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.rotation_delta_cost_weight = 1e-1 + +POSE_GRAPH.optimization_problem.huber_scale = 1e2 +POSE_GRAPH.optimize_every_n_nodes = 35 +POSE_GRAPH.constraint_builder.min_score = 0.65 return options \u53c2\u8003 https://google-cartographer-ros.readthedocs.io/en/latest/your_bag.html https://github.com/googlecartographer/cartographer_ros/issues/1122 https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/ https://www.ncnynl.com/archives/201811/2789.html https://translate.google.co.jp/translate?hl=en&sl=zh-CN&u=https://www.academia.edu/38171833/EAI_cartographer&prev=search https://github.com/googlecartographer/cartographer_ros/blob/master/docs/source/tuning.rst","title":"YDLIDAR Cartographer ROS"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar-cartographer-ros","text":"https://github.com/FaBoPlatform/YDLIDAR-Cartographer-ROS \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u4f5c\u308a\u65b9\u306b\u3064\u3044\u3066 \u3053\u306e\u5185\u5bb9\u306f\u3001Cartographer-ROS\u306e master branch \u306e\u5185\u5bb9\u3067\u3059\u3002 v1.0.0 \u3067\u306f\u306a\u3044\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002 Cartographer ROS\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3092\u898b\u308b\u3068\u3001 backpack \u3092\u30d9\u30fc\u30b9\u3068\u3057\u3066\u81ea\u5206\u306e\u30ed\u30dc\u30c3\u30c8\u5411\u3051\u306b .launch \u30d5\u30a1\u30a4\u30eb\u3068 .lua \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3088\u3046\u3067\u3059\u3002 YDLIDAR\u7528\u306bbackpack_2d\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 # Launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_backpack_2d.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_ros_map.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer_ros_map.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_node.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_node.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_backpack_2d.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_slam.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/visualize_pbstream.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_visualize_pbstream.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/demo_backpack_2d_localization.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_localization.launch cp ~/catkin_ws/install_isolated/share/cartographer_ros/launch/backpack_2d.launch \\ ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_slam.launch # Lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ci.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_ros_map.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/visualize_pbstream.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_visualize_pbstream.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization_evaluation.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_server.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_server.lua cp ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d.lua \\ ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d.lua \u305d\u306e\u4ed6\u306b\u3001online\u3068offline\u7528\u306erviz.launch\u3082\u4f5c\u6210\u3057\u307e\u3059\u3002 \u3053\u308c\u3089\u306e\u7de8\u96c6\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002","title":"YDLIDAR Cartographer ROS"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_rvizlaunch","text":"\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u6642\u9593\u3067RViz\u3092\u4f7f\u3046\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 rosbag play\u306e\u6642\u306b\u4f7f\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u65b0\u898f\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30dd\u30a4\u30f3\u30c8\u306f\u3001rosbag\u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u308b\u6642\u9593\u3092\u4f7f\u3046\u305f\u3081\u306b /use_sim_time \u304c true \u3067\u3042\u308b\u3053\u3068\u3067\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"true\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch>","title":"offline_ydlidar_2d_rviz.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#online_ydlidar_2d_rvizlaunch","text":"\u30b7\u30b9\u30c6\u30e0\u6642\u9593\u3067RViz\u3092\u4f7f\u3046\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u51e6\u7406\u306e\u6642\u306b\u4f7f\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u65b0\u898f\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002 \u30dd\u30a4\u30f3\u30c8\u306f\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u6642\u9593\u3092\u4f7f\u3046\u305f\u3081\u306b /use_sim_time \u304c false \u3067\u3042\u308b\u3053\u3068\u3067\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_rviz.launch 1 2 3 4 5 6 7 8 9 10 11 12 <launch> <param name= \"/use_sim_time\" value= \"false\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" > </node> </launch>","title":"online_ydlidar_2d_rviz.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_assets_writerlaunch","text":"\u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_backpack_2d.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer.launch 2019-04-23 16:51:23.824182122 +0900 @@ -15,7 +15,7 @@ --> <launch> - <arg name=\"config_file\" default=\"assets_writer_backpack_2d.lua\"/> + <arg name=\"config_file\" default=\"offline_ydlidar_2d_assets_writer.lua\"/> <node name=\"cartographer_assets_writer\" pkg=\"cartographer_ros\" required=\"true\" type=\"cartographer_assets_writer\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files","title":"offline_ydlidar_2d_assets_writer.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_assets_writer_ros_maplaunch","text":"rosbag \u3068 pbstream \u30d5\u30a1\u30a4\u30eb\u304b\u3089 ros map \u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer_ros_map.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/assets_writer_ros_map.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_assets_writer_ros_map.launch 2019-04-24 15:12:46.333008437 +0900 @@ -24,7 +24,7 @@ <node name=\"cartographer_assets_writer\" pkg=\"cartographer_ros\" required=\"true\" type=\"cartographer_assets_writer\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename assets_writer_ros_map.lua + -configuration_basename offline_ydlidar_2d_assets_writer_ros_map.lua -urdf_filename $(arg urdf_filename) -bag_filenames $(arg bag_filenames) -pose_graph_filename $(arg pose_graph_filename)\"","title":"offline_ydlidar_2d_assets_writer_ros_map.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_nodelaunch","text":"offline SLAM\u3092\u8d77\u52d5\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 rviz\u306f\u4ed6\u306ePC\u3067\u8d77\u52d5\u3059\u308b\u305f\u3081\u3001rviz\u306e\u8a2d\u5b9a\u3092\u524a\u9664\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_node.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_node.launch 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_node.launch 2019-04-22 16:33:45.214304025 +0900 @@ -16,8 +16,6 @@ <launch> <arg name=\"bag_filenames\"/> - <arg name=\"no_rviz\"/> - <arg name=\"rviz_config\"/> <arg name=\"configuration_directory\"/> <arg name=\"configuration_basenames\"/> <arg name=\"urdf_filenames\"/> @@ -25,21 +23,7 @@ <param name=\"/use_sim_time\" value=\"true\" /> - <group unless=\"$(arg no_rviz)\"> - <node name=\"rviz\" - pkg=\"rviz\" - type=\"rviz\" - required=\"true\" - args=\"-d $(arg rviz_config)\" /> - - <node name=\"cartographer_occupancy_grid_node\" - pkg=\"cartographer_ros\" - type=\"cartographer_occupancy_grid_node\" - args=\"-resolution 0.05\" /> - </group> - <node name=\"cartographer_offline_node\" pkg=\"cartographer_ros\" - required=\"$(arg no_rviz)\" type=\"cartographer_offline_node\" args=\" -configuration_directory $(arg configuration_directory) -configuration_basenames $(arg configuration_basenames)","title":"offline_ydlidar_2d_node.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_slamlaunch","text":"offline SLAM\u306f\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u305f\u3081\u306epbstream\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u30de\u30c3\u30d7\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_slam.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_backpack_2d.launch 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_slam.launch 2019-04-23 16:52:31.793372397 +0900 @@ -16,18 +16,14 @@ <launch> <arg name=\"bag_filenames\"/> - <arg name=\"no_rviz\" default=\"false\"/> - <arg name=\"rviz_config\" default=\"$(find cartographer_ros)/configuration_files/demo_2d.rviz\"/> <arg name=\"configuration_directory\" default=\"$(find cartographer_ros)/configuration_files\"/> - <arg name=\"configuration_basenames\" default=\"backpack_2d.lua\"/> + <arg name=\"configuration_basenames\" default=\"ydlidar_2d.lua\"/> <arg name=\"urdf_filenames\" default=\"$(find cartographer_ros)/urdf/backpack_2d.urdf\"/> <arg name=\"launch_prefix\" default=\"\"/> <remap from=\"echoes\" to=\"horizontal_laser_2d\"/> - <include file=\"$(find cartographer_ros)/launch/offline_node.launch\"> + <include file=\"$(find cartographer_ros)/launch/offline_ydlidar_2d_node.launch\"> <arg name=\"bag_filenames\" value=\"$(arg bag_filenames)\"/> - <arg name=\"no_rviz\" value=\"$(arg no_rviz)\"/> - <arg name=\"rviz_config\" value=\"$(arg rviz_config)\"/> <arg name=\"configuration_directory\" value=\"$(arg configuration_directory)\"/> <arg name=\"configuration_basenames\" value=\"$(arg configuration_basenames)\"/> <arg name=\"urdf_filenames\" value=\"$(arg urdf_filenames)\"/>","title":"offline_ydlidar_2d_slam.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_visualize_pbstreamlaunch","text":"pbstream\u30d5\u30a1\u30a4\u30eb\u3092RViz\u3067\u8868\u793a\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_visualize_pbstream.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/visualize_pbstream.launch 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/offline_ydlidar_2d_visualize_pbstream.launch 2019-04-23 16:53:04.720217624 +0900 @@ -20,7 +20,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename visualize_pbstream.lua + -configuration_basename offline_ydlidar_2d_visualize_pbstream.lua -load_state_filename $(arg pbstream_filename) -load_frozen_state=false -start_trajectory_with_default_topics=false\"","title":"offline_ydlidar_2d_visualize_pbstream.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#online_ydlidar_2d_localizationlaunch","text":"\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 \u4ed6\u306ePC\u3067rviz\u3092\u8d77\u52d5\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u3001 rviz \u306f\u524a\u9664\u3057\u307e\u3059\u3002 \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u81ea\u5df1\u4f4d\u7f6e\u63a8\u5b9a\u3092\u884c\u3046\u305f\u3081\u306b\u3001 rosbag play \u306f\u524a\u9664\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_localization.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/demo_backpack_2d_localization.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_localization.launch 2019-04-23 16:49:46.923510438 +0900 @@ -15,7 +15,7 @@ --> <launch> - <param name=\"/use_sim_time\" value=\"true\" /> + <param name=\"/use_sim_time\" value=\"false\" /> <param name=\"robot_description\" textfile=\"$(find cartographer_ros)/urdf/backpack_2d.urdf\" /> @@ -26,7 +26,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d_localization.lua + -configuration_basename online_ydlidar_2d_localization.lua -load_state_filename $(arg load_state_filename)\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> @@ -35,8 +35,4 @@ <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> - <node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" required=\"true\" - args=\"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> - <node name=\"playbag\" pkg=\"rosbag\" type=\"play\" - args=\"--clock $(arg bag_filename)\" /> </launch>","title":"online_ydlidar_2d_localization.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#online_ydlidar_2d_slamlaunch","text":"online SLAM\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_slam.launch 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/backpack_2d.launch 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/launch/online_ydlidar_2d_slam.launch 2019-04-23 16:53:43.919798719 +0900 @@ -24,7 +24,7 @@ <node name=\"cartographer_node\" pkg=\"cartographer_ros\" type=\"cartographer_node\" args=\" -configuration_directory $(find cartographer_ros)/configuration_files - -configuration_basename backpack_2d.lua\" + -configuration_basename ydlidar_2d.lua\" output=\"screen\"> <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> </node>","title":"online_ydlidar_2d_slam.launch"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_assets_writer_cilua","text":"offline_ydlidar_2d_assets_writer.lua \u3068\u8a2d\u5b9a\u65b9\u91dd\u306f\u540c\u3058\u3067\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ci.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d_ci.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ci.lua 2019-04-23 13:58:35.890889854 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.12, + max_range = 10., }, { action = \"dump_num_points\",","title":"offline_ydlidar_2d_assets_writer_ci.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_assets_writerlua","text":"\u8ecc\u8de1\u3092\u51fa\u529b\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 tracking_frame \u306fYDLIDAR\u30c9\u30e9\u30a4\u30d0\u30fc\u5074\u306e\u8a2d\u5b9a\u3068\u540c\u3058\u306b\u3057\u307e\u3059\u3002 \u6709\u52b9\u8ddd\u96e2\u306fYDLIDAR X4\u30c7\u30fc\u30bf\u30b7\u30fc\u30c8\u306e\u5024\u306b\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_backpack_2d.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer.lua 2019-04-23 13:59:26.954920158 +0900 @@ -22,12 +22,12 @@ include \"transform.lua\" options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.12, + max_range = 10., }, { action = \"dump_num_points\",","title":"offline_ydlidar_2d_assets_writer.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_assets_writer_ros_maplua","text":"rosbag\u3068pbstream\u30d5\u30a1\u30a4\u30eb\u304b\u3089ros map\u3092\u4f5c\u6210\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 /catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_ros_map.lua /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/assets_writer_ros_map.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_assets_writer_ros_map.lua 2019-04-25 12:33:26.768924427 +0900 @@ -13,12 +13,12 @@ -- limitations under the License. options = { - tracking_frame = \"base_link\", + tracking_frame = \"laser_frame\", pipeline = { { action = \"min_max_range_filter\", - min_range = 1., - max_range = 60., + min_range = 0.12, + max_range = 10., }, { action = \"write_ros_map\",","title":"offline_ydlidar_2d_assets_writer_ros_map.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#offline_ydlidar_2d_visualize_pbstreamlua","text":"pbstream\u30d5\u30a1\u30a4\u30eb\u3092RViz\u3067\u8868\u793a\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_visualize_pbstream.lua 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/visualize_pbstream.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/offline_ydlidar_2d_visualize_pbstream.lua 2019-04-23 16:58:10.355188256 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d.lua\" +include \"ydlidar_2d.lua\" POSE_GRAPH.constraint_builder.sampling_ratio = 0 POSE_GRAPH.global_sampling_ratio = 0","title":"offline_ydlidar_2d_visualize_pbstream.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#online_ydlidar_2d_localization_evaluationlua","text":"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0Pure Localization\u3092\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization_evaluation.lua 1 2 3 4 5 6 7 8 9 10 11 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization_evaluation.lua 2019-04-22 14:07:23.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization_evaluation.lua2019-04-23 16:59:36.830045343 +0900 @@ -12,7 +12,7 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d_localization.lua\" +include \"online_ydlidar_2d_localization.lua\" -- output map to base_link for evaluation options.provide_odom_frame = false","title":"online_ydlidar_2d_localization_evaluation.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#online_ydlidar_2d_localizationlua","text":"\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0Pure Localization\u3092\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d_localization.lua 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/online_ydlidar_2d_localization.lua 2019-04-23 16:59:53.033038811 +0900 @@ -12,11 +12,13 @@ -- See the License for the specific language governing permissions and -- limitations under the License. -include \"backpack_2d.lua\" +include \"ydlidar_2d.lua\" TRAJECTORY_BUILDER.pure_localization_trimmer = { max_submaps_to_keep = 3, } -POSE_GRAPH.optimize_every_n_nodes = 20 +POSE_GRAPH.optimize_every_n_nodes = 2 return options","title":"online_ydlidar_2d_localization.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#online_ydlidar_2d_serverlua","text":"\u5909\u66f4\u306a\u3057 1 ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d_server.lua","title":"online_ydlidar_2d_server.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#ydlidar_2dlua","text":"online SLAM\u306e\u6642\u306b\u5229\u7528\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d.lua 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 --- /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/backpack_2d.lua 2019-04-22 14:09:24.000000000 +0900 +++ /home/ubuntu/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/ydlidar_2d.lua 2019-04-23 14:00:17.750949205 +0900 @@ -19,8 +19,8 @@ map_builder = MAP_BUILDER, trajectory_builder = TRAJECTORY_BUILDER, map_frame = \"map\", - tracking_frame = \"base_link\", - published_frame = \"base_link\", + tracking_frame = \"laser_frame\", + published_frame = \"laser_frame\", odom_frame = \"odom\", provide_odom_frame = true, publish_frame_projected_to_2d = false, @@ -28,9 +28,9 @@ use_odometry = false, use_nav_sat = false, use_landmarks = false, - num_laser_scans = 0, - num_multi_echo_laser_scans = 1, - num_subdivisions_per_laser_scan = 10, + num_laser_scans = 1, + num_multi_echo_laser_scans = 0, + num_subdivisions_per_laser_scan = 1, num_point_clouds = 0, lookup_transform_timeout_sec = 0.2, submap_publish_period_sec = 0.3, @@ -44,6 +44,18 @@ } MAP_BUILDER.use_trajectory_builder_2d = true -TRAJECTORY_BUILDER_2D.num_accumulated_range_data = 10 +TRAJECTORY_BUILDER_2D.submaps.num_range_data = 35 +TRAJECTORY_BUILDER_2D.min_range = 0.12 +TRAJECTORY_BUILDER_2D.max_range = 10. +TRAJECTORY_BUILDER_2D.missing_data_ray_length = 1. +TRAJECTORY_BUILDER_2D.use_imu_data = false +TRAJECTORY_BUILDER_2D.use_online_correlative_scan_matching = true +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.linear_search_window = 0.1 +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.translation_delta_cost_weight = 10. +TRAJECTORY_BUILDER_2D.real_time_correlative_scan_matcher.rotation_delta_cost_weight = 1e-1 + +POSE_GRAPH.optimization_problem.huber_scale = 1e2 +POSE_GRAPH.optimize_every_n_nodes = 35 +POSE_GRAPH.constraint_builder.min_score = 0.65 return options","title":"ydlidar_2d.lua"},{"location":"03.SLAM(TX2)/07.ydlidar_cartographer_ros/#_1","text":"https://google-cartographer-ros.readthedocs.io/en/latest/your_bag.html https://github.com/googlecartographer/cartographer_ros/issues/1122 https://www.mindthink.me/2018/11/01/cartographer%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97%E4%B9%8B%E4%BA%8C%EF%BC%9A-%E4%BD%BF%E7%94%A8-eai-ydlidar-%E5%AE%9E%E7%8E%B0-cartographer-2d-slam/ https://www.ncnynl.com/archives/201811/2789.html https://translate.google.co.jp/translate?hl=en&sl=zh-CN&u=https://www.academia.edu/38171833/EAI_cartographer&prev=search https://github.com/googlecartographer/cartographer_ros/blob/master/docs/source/tuning.rst","title":"\u53c2\u8003"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/","text":"Cartographer ROS TurtleBot3 Navigation \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5 1 2 3 4 5 6 sudo apt-get install ros-melodic-map-server ros-melodic-amcl ros-melodic-move-base ros-melodic-dwa-local-planner cd ~/catkin_ws/src/ git clone https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git git clone https://github.com/ROBOTIS-GIT/turtlebot3.git cd ~/catkin_ws && catkin_make_isolated --install --use-ninja TurtleBot3 Navigation\u30ab\u30b9\u30bf\u30de\u30a4\u30ba turtlebot3\u306f odom \u306b imu \u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002Cartographer ROS\u306f2D\u306e\u5834\u5408\u3001imu\u7121\u3057\u3067\u52d5\u4f5c\u53ef\u80fd\u306a\u306e\u3067\u3001turtlebot3\u306enavigation\u3067\u5229\u7528\u3059\u308b map_server \u3092Cartographer ROS\u306b\u5165\u308c\u66ff\u3048\u307e\u3059\u3002 turtlebot3_navigation.launch turtlebt3\u306e map_server \u3092 cartographer_occupancy_grid_node \u306b\u5909\u66f4\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/src/turtlebot3/turtlebot3_navigation/launch/turtlebot3_navigation.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 --- /home/ubuntu/catkin_ws/src/turtlebot3/turtlebot3_navigation/launch/turtlebot3_navigation.launch.org 2019-04-26 05:14:02.370003860 +0000 +++ /home/ubuntu/catkin_ws/src/turtlebot3/turtlebot3_navigation/launch/turtlebot3_navigation.launch 2019-04-26 05:17:07.793640522 +0000 @@ -11,7 +11,17 @@ </include> <!-- Map server --> - <node pkg=\"map_server\" name=\"map_server\" type=\"map_server\" args=\"$(arg map_file)\"/> + <node name=\"cartographer_node\" pkg=\"cartographer_ros\" + type=\"cartographer_node\" args=\" + -configuration_directory $(find cartographer_ros)/configuration_files + -configuration_basename online_ydlidar_2d_localization.lua + -load_state_filename $(arg load_state_filename)\" + output=\"screen\"> + <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> + </node> + + <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" + type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> <!-- AMCL --> <include file=\"$(find turtlebot3_navigation)/launch/amcl.launch\"/> parameter \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e ~/catkin_ws/src/turtlebot3/turtlebot3_navigation/param/costmap_common_params_burger.yaml 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/nano_robot.launch 1 2 3 4 5 6 7 8 9 <launch> <arg name= \"set_lidar_frame_id\" default= \"base_footprint\" /> <include file= \"$(find ydlidar)/launch/lidar.launch\" /> <node pkg= \"turtlebot3_bringup\" type= \"turtlebot3_diagnostics\" name= \"turtlebot3_diagnostics\" output= \"screen\" > <remap from= \"base_footprint\" to= \"base_scan\" /> </node> </launch> \u518d\u30d3\u30eb\u30c9 1 cd ~/catkin_ws && catkin_make_isolated --install --use-ninja \u5b9f\u884c on TX2 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./nano.sh on PC 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./nano_rviz.sh","title":"Cartographer ROS TurtleBot3 Navigation"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/#cartographer-ros-turtlebot3-navigation","text":"","title":"Cartographer ROS TurtleBot3 Navigation"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/#_1","text":"1 2 3 4 5 6 sudo apt-get install ros-melodic-map-server ros-melodic-amcl ros-melodic-move-base ros-melodic-dwa-local-planner cd ~/catkin_ws/src/ git clone https://github.com/ROBOTIS-GIT/turtlebot3_msgs.git git clone https://github.com/ROBOTIS-GIT/turtlebot3.git cd ~/catkin_ws && catkin_make_isolated --install --use-ninja","title":"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/#turtlebot3-navigation","text":"turtlebot3\u306f odom \u306b imu \u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002Cartographer ROS\u306f2D\u306e\u5834\u5408\u3001imu\u7121\u3057\u3067\u52d5\u4f5c\u53ef\u80fd\u306a\u306e\u3067\u3001turtlebot3\u306enavigation\u3067\u5229\u7528\u3059\u308b map_server \u3092Cartographer ROS\u306b\u5165\u308c\u66ff\u3048\u307e\u3059\u3002","title":"TurtleBot3 Navigation\u30ab\u30b9\u30bf\u30de\u30a4\u30ba"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/#turtlebot3_navigationlaunch","text":"turtlebt3\u306e map_server \u3092 cartographer_occupancy_grid_node \u306b\u5909\u66f4\u3057\u307e\u3059\u3002 1 vi ~/catkin_ws/src/turtlebot3/turtlebot3_navigation/launch/turtlebot3_navigation.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 --- /home/ubuntu/catkin_ws/src/turtlebot3/turtlebot3_navigation/launch/turtlebot3_navigation.launch.org 2019-04-26 05:14:02.370003860 +0000 +++ /home/ubuntu/catkin_ws/src/turtlebot3/turtlebot3_navigation/launch/turtlebot3_navigation.launch 2019-04-26 05:17:07.793640522 +0000 @@ -11,7 +11,17 @@ </include> <!-- Map server --> - <node pkg=\"map_server\" name=\"map_server\" type=\"map_server\" args=\"$(arg map_file)\"/> + <node name=\"cartographer_node\" pkg=\"cartographer_ros\" + type=\"cartographer_node\" args=\" + -configuration_directory $(find cartographer_ros)/configuration_files + -configuration_basename online_ydlidar_2d_localization.lua + -load_state_filename $(arg load_state_filename)\" + output=\"screen\"> + <remap from=\"echoes\" to=\"horizontal_laser_2d\" /> + </node> + + <node name=\"cartographer_occupancy_grid_node\" pkg=\"cartographer_ros\" + type=\"cartographer_occupancy_grid_node\" args=\"-resolution 0.05\" /> <!-- AMCL --> <include file=\"$(find turtlebot3_navigation)/launch/amcl.launch\"/>","title":"turtlebot3_navigation.launch"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/#parameter","text":"\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e ~/catkin_ws/src/turtlebot3/turtlebot3_navigation/param/costmap_common_params_burger.yaml 1 vi ~/catkin_ws/install_isolated/share/cartographer_ros/launch/nano_robot.launch 1 2 3 4 5 6 7 8 9 <launch> <arg name= \"set_lidar_frame_id\" default= \"base_footprint\" /> <include file= \"$(find ydlidar)/launch/lidar.launch\" /> <node pkg= \"turtlebot3_bringup\" type= \"turtlebot3_diagnostics\" name= \"turtlebot3_diagnostics\" output= \"screen\" > <remap from= \"base_footprint\" to= \"base_scan\" /> </node> </launch>","title":"parameter"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/#_2","text":"1 cd ~/catkin_ws && catkin_make_isolated --install --use-ninja","title":"\u518d\u30d3\u30eb\u30c9"},{"location":"03.SLAM(TX2)/08.cartographer_ros_tartlebot3_navigation/#_3","text":"on TX2 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./nano.sh on PC 1 2 cd ~/github/YDLIDAR-Cartographer-ROS/scripts ./nano_rviz.sh","title":"\u5b9f\u884c"},{"location":"04.Jetson/01.Jetson/","text":"Jetson Jetson \u9805\u76ee TX1 TX2 TX2i Xavier nano GPU 256-core Maxwell 256-core Pascal 256-core Pascal 512-core Volta 128-core Macwell CPU\u30b3\u30a2 Quad Quad Quad Octa Quad System\u30e1\u30e2\u30ea 4G 8G 8G 16G 4G Storage MicroSD 32 GB eMMC 32 GB eMMC 32GB eMMC 5.1 Flash Storage Micro SD","title":"Jetson"},{"location":"04.Jetson/01.Jetson/#jetson","text":"","title":"Jetson"},{"location":"04.Jetson/01.Jetson/#jetson_1","text":"\u9805\u76ee TX1 TX2 TX2i Xavier nano GPU 256-core Maxwell 256-core Pascal 256-core Pascal 512-core Volta 128-core Macwell CPU\u30b3\u30a2 Quad Quad Quad Octa Quad System\u30e1\u30e2\u30ea 4G 8G 8G 16G 4G Storage MicroSD 32 GB eMMC 32 GB eMMC 32GB eMMC 5.1 Flash Storage Micro SD","title":"Jetson"},{"location":"05.etc/03.ubuntu16/","text":"Ubuntu 16.04\u306bROS\u3092\u69cb\u7bc9 Docker\u306e\u8d77\u52d5 \u8a2d\u5b9a 1 2 3 4 5 FROM ros:melodic RUN apt-get update \\ && apt-get install -y ros-melodic-desktop \\ && rm -rf /var/lib/apt/lists/ \\ 1 docker build -t ros-cartographer . 1 2 3 4 open -a Xqurtz ip=$(ifconfig en0 | grep inet | awk '$1==\"inet\" {print $2}') echo $ip xhost + $ip 1 docker run -it -e DISPLAY=$ip:0 --name ros-test ros-cartographer 1 docker exec -it ros-cartographer bin/bash Rosdep\u306e\u521d\u671f\u5316 1 2 $ rosdep init $ rosdep update Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 5 $ apt-get update $ apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git $ mkdir -p ~/catkin_ws/src $ cd ~/catkin_ws/ $ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 $ echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc $ source ~/.bashrc Cartographer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ apt install ros-melodic-cartographer-ros 1 2 3 4 5 6 7 8 9 $ apt-get install ninja-build libceres-dev libprotobuf-dev protobuf-compiler libprotoc-dev $ cd ~/catkin_ws/src $ git clone https://github.com/googlecartographer/cartographer.git $ git clone https://github.com/googlecartographer/cartographer_ros.git $ cd ~/catkin_ws $ src/cartographer/scripts/install_proto3.sh $ rm -rf protobuf/ $ rosdep install --from-paths src --ignore-src -r -y --os = ubuntu:xenial $ catkin_make_isolated --install --use-ninja 1 2 $ cd ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/ $ vim backpack_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 <!-- Copyright 2016 The Cartographer Authors Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. --> <launch> <param name= \"robot_description\" textfile= \"$(find cartographer_ros)/urdf/backpack_2d.urdf\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> </launch> 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u30a8\u30e9\u30fc\u304c\u3067\u308b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 QStandardPaths : XDG_RUNTIME_DIR not set , defaulting to '/tmp/runtime-root' libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast rviz : /build/ogre-1.9-B6QkmW/ogre-1.9-1.9.0+dfsg1/RenderSystems/GL/src/ OgreGLSupport . cpp : 56 : virtual void Ogre :: GLSupport :: initialiseExtensions (): Assertion ` pcVer && \"Problems getting GL version string using glGetString\" ' failed . ================================================================================ REQUIRED process [ rviz - 2 ] has died ! process has died [ pid 10453 , exit code - 6 , cmd /opt/ros/melodic/lib/rviz/rviz -d /root/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/demo_2d.rviz __name:=rviz __log:=/root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 . log ]. log file : /root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 *. log Initiating shutdown ! ================================================================================ [ rviz - 2 ] killing on exit [ rosout - 1 ] killing on exit [ master ] killing on exit shutting down processing monitor ... ... shutting down processing monitor complete done","title":"Ubuntu 16.04\u306bROS\u3092\u69cb\u7bc9"},{"location":"05.etc/03.ubuntu16/#ubuntu-1604ros","text":"","title":"Ubuntu 16.04\u306bROS\u3092\u69cb\u7bc9"},{"location":"05.etc/03.ubuntu16/#docker","text":"","title":"Docker\u306e\u8d77\u52d5"},{"location":"05.etc/03.ubuntu16/#_1","text":"1 2 3 4 5 FROM ros:melodic RUN apt-get update \\ && apt-get install -y ros-melodic-desktop \\ && rm -rf /var/lib/apt/lists/ \\ 1 docker build -t ros-cartographer . 1 2 3 4 open -a Xqurtz ip=$(ifconfig en0 | grep inet | awk '$1==\"inet\" {print $2}') echo $ip xhost + $ip 1 docker run -it -e DISPLAY=$ip:0 --name ros-test ros-cartographer 1 docker exec -it ros-cartographer bin/bash Rosdep\u306e\u521d\u671f\u5316 1 2 $ rosdep init $ rosdep update Catkin Workspace\u306e\u4f5c\u6210 1 2 3 4 5 $ apt-get update $ apt-get install cmake python-catkin-pkg python-empy python-nose python-setuptools libgtest-dev python-rosinstall python-rosinstall-generator python-wstool build-essential git $ mkdir -p ~/catkin_ws/src $ cd ~/catkin_ws/ $ catkin_make \u74b0\u5883\u7de8\u6570\u306b\u767b\u9332 1 2 $ echo \"source ~/catkin_ws/devel/setup.bash\" >> ~/.bashrc $ source ~/.bashrc","title":"\u8a2d\u5b9a"},{"location":"05.etc/03.ubuntu16/#cartographer","text":"1 $ apt install ros-melodic-cartographer-ros 1 2 3 4 5 6 7 8 9 $ apt-get install ninja-build libceres-dev libprotobuf-dev protobuf-compiler libprotoc-dev $ cd ~/catkin_ws/src $ git clone https://github.com/googlecartographer/cartographer.git $ git clone https://github.com/googlecartographer/cartographer_ros.git $ cd ~/catkin_ws $ src/cartographer/scripts/install_proto3.sh $ rm -rf protobuf/ $ rosdep install --from-paths src --ignore-src -r -y --os = ubuntu:xenial $ catkin_make_isolated --install --use-ninja 1 2 $ cd ~/catkin_ws/src/cartographer_ros/cartographer_ros/launch/ $ vim backpack_2d.launch 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 <!-- Copyright 2016 The Cartographer Authors Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. --> <launch> <param name= \"robot_description\" textfile= \"$(find cartographer_ros)/urdf/backpack_2d.urdf\" /> <node name= \"rviz\" pkg= \"rviz\" type= \"rviz\" required= \"true\" args= \"-d $(find cartographer_ros)/configuration_files/demo_2d.rviz\" /> </launch> 1 2 3 $ cd ~/catkin_ws $ catkin_make_isolated --install --use-ninja $ source install_isolated/setup.bash \u30a8\u30e9\u30fc\u304c\u3067\u308b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 QStandardPaths : XDG_RUNTIME_DIR not set , defaulting to '/tmp/runtime-root' libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast libGL error : No matching fbConfigs or visuals found libGL error : failed to load driver : swrast rviz : /build/ogre-1.9-B6QkmW/ogre-1.9-1.9.0+dfsg1/RenderSystems/GL/src/ OgreGLSupport . cpp : 56 : virtual void Ogre :: GLSupport :: initialiseExtensions (): Assertion ` pcVer && \"Problems getting GL version string using glGetString\" ' failed . ================================================================================ REQUIRED process [ rviz - 2 ] has died ! process has died [ pid 10453 , exit code - 6 , cmd /opt/ros/melodic/lib/rviz/rviz -d /root/catkin_ws/install_isolated/share/cartographer_ros/configuration_files/demo_2d.rviz __name:=rviz __log:=/root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 . log ]. log file : /root/.ros/log/8bb415ce-5c0d-11e9-9055-0242ac110004/ rviz - 2 *. log Initiating shutdown ! ================================================================================ [ rviz - 2 ] killing on exit [ rosout - 1 ] killing on exit [ master ] killing on exit shutting down processing monitor ... ... shutting down processing monitor complete done","title":"Cartographer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"05.etc/03.ydlidar/","text":"ydlidar Git clone 1 2 3 4 $ cd ~/catkin_ws/ $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ydlidar $ catkin_make Install 1 2 3 $ roscd ydlidar/startup $ sudo chmod 777 ./* $ sudo sh initenv.sh \u8d77\u52d5 \u8d77\u52d5 1 roslaunch ydlidar lidar_view.launch","title":"ydlidar"},{"location":"05.etc/03.ydlidar/#ydlidar","text":"Git clone 1 2 3 4 $ cd ~/catkin_ws/ $ git clone https://github.com/EAIBOT/ydlidar.git $ cd ydlidar $ catkin_make Install 1 2 3 $ roscd ydlidar/startup $ sudo chmod 777 ./* $ sudo sh initenv.sh","title":"ydlidar"},{"location":"05.etc/03.ydlidar/#_1","text":"\u8d77\u52d5 1 roslaunch ydlidar lidar_view.launch","title":"\u8d77\u52d5"},{"location":"05.etc/04.cartographer/","text":"Cartographer \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb sudo apt install ros-melodic-cartographer-ros \u81ea\u5206\u3067Build Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 sudo apt-get update sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 mkdir catkin_ws cd catkin_ws wstool init src wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja \u5b9f\u884c 1 2 3 $ source install_isolated/setup.bash $ wget -P ~/Downloads https://storage.googleapis.com/cartographer-public-data/bags/backpack_2d/cartographer_paper_deutsches_museum.bag $ roslaunch cartographer_ros demo_backpack_2d.launch bag_filename: = ${ HOME } /Downloads/cartographer_paper_deutsches_museum.bag","title":"Cartographer"},{"location":"05.etc/04.cartographer/#cartographer","text":"","title":"Cartographer"},{"location":"05.etc/04.cartographer/#_1","text":"sudo apt install ros-melodic-cartographer-ros","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"05.etc/04.cartographer/#build","text":"Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 sudo apt-get update sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 mkdir catkin_ws cd catkin_ws wstool init src wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja","title":"\u81ea\u5206\u3067Build"},{"location":"05.etc/04.cartographer/#_2","text":"1 2 3 $ source install_isolated/setup.bash $ wget -P ~/Downloads https://storage.googleapis.com/cartographer-public-data/bags/backpack_2d/cartographer_paper_deutsches_museum.bag $ roslaunch cartographer_ros demo_backpack_2d.launch bag_filename: = ${ HOME } /Downloads/cartographer_paper_deutsches_museum.bag","title":"\u5b9f\u884c"},{"location":"05.etc/04.prilidar/","text":"prilidar https://github.com/robopeak/rplidar_ros","title":"prilidar"},{"location":"05.etc/04.prilidar/#prilidar","text":"https://github.com/robopeak/rplidar_ros","title":"prilidar"},{"location":"05.etc/05.ce30d/","text":"CE30-D Benewake CE30-D https://github.com/iamkevinzhao/ce30_driver_ros","title":"CE30-D"},{"location":"05.etc/05.ce30d/#ce30-d","text":"Benewake CE30-D https://github.com/iamkevinzhao/ce30_driver_ros","title":"CE30-D"},{"location":"05.etc/06.realsense/","text":"Realsense https://github.com/intel-ros/realsense","title":"Realsense"},{"location":"05.etc/06.realsense/#realsense","text":"https://github.com/intel-ros/realsense","title":"Realsense"},{"location":"05.etc/07.cartographer/","text":"Cartographer 2\u7a2e\u985e\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5 Google Cartographer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u6b21\u306e2\u7a2e\u985e\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002 \u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 $ sudo apt install ros-melodic-cartographer-ros Build\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 $ sudo apt-get update $ sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 $ mkdir ~/catkin_ws $ cd ~/catkin_ws $ wstool init src $ wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall $ wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja","title":"Cartographer"},{"location":"05.etc/07.cartographer/#cartographer","text":"","title":"Cartographer"},{"location":"05.etc/07.cartographer/#2","text":"Google Cartographer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u6b21\u306e2\u7a2e\u985e\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002","title":"2\u7a2e\u985e\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5"},{"location":"05.etc/07.cartographer/#_1","text":"1 $ sudo apt install ros-melodic-cartographer-ros","title":"\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"05.etc/07.cartographer/#build","text":"Build\u306b\u306f4-5\u6642\u9593\u304b\u304b\u308b wtool, ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 $ sudo apt-get update $ sudo apt-get install -y python-wstool python-rosdep ninja-build catkin_ws\u306b\u74b0\u5883\u69cb\u7bc9 1 2 3 4 5 $ mkdir ~/catkin_ws $ cd ~/catkin_ws $ wstool init src $ wstool merge -t src https://raw.githubusercontent.com/googlecartographer/cartographer_ros/master/cartographer_ros.rosinstall $ wstool update -t src proto3\u3068\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 2 3 4 src/cartographer/scripts/install_proto3.sh sudo rosdep init rosdep update rosdep install --from-paths src --ignore-src --rosdistro= ${ ROS_DISTRO } -y Catographer\u306eBuild\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb 1 catkin_make_isolated --install --use-ninja","title":"Build\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"06.OSX/01.xwindow/","text":"X Windows XQuarts\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb https://www.xquartz.org/ \u8d77\u52d5\u3059\u308b 1 $ xhost Docker\u3092\u53d6\u5f97 local\u3092\u8ffd\u52a0 1 $ xhost +127.0.0.1 DISPLAY\u306e\u74b0\u5883\u7de8\u6570\u3092\u3064\u3051\u3066Docker\u8aad\u307f\u8fbc\u307f 1 2 $ docker pull ubuntu:18.04 $ docker run -env DISPLAY = docker.for.mac.localhost:0 --env = QT_X11_NO_MITSHM = 1 -it ubuntu:18.04","title":"X Windows"},{"location":"06.OSX/01.xwindow/#x-windows","text":"","title":"X Windows"},{"location":"06.OSX/01.xwindow/#xquarts","text":"https://www.xquartz.org/ \u8d77\u52d5\u3059\u308b 1 $ xhost","title":"XQuarts\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb"},{"location":"06.OSX/01.xwindow/#docker","text":"local\u3092\u8ffd\u52a0 1 $ xhost +127.0.0.1 DISPLAY\u306e\u74b0\u5883\u7de8\u6570\u3092\u3064\u3051\u3066Docker\u8aad\u307f\u8fbc\u307f 1 2 $ docker pull ubuntu:18.04 $ docker run -env DISPLAY = docker.for.mac.localhost:0 --env = QT_X11_NO_MITSHM = 1 -it ubuntu:18.04","title":"Docker\u3092\u53d6\u5f97"},{"location":"07.LiDAR/list/","text":"LiDAR List \u578b\u756a \u30e1\u30fc\u30ab\u30fc \u6b21\u5143 Benewake CE30-D Benewake](http://en.benewake.com/) 3D Velodyne VL16 Velodyne 3D robosense-rs-lidar-16 [RoboSense ](http://www.robosense.ai/) URG-04LX-UG01 HOKUYO 3D YVT-35LX HOKUYO 3D UTM-30LX HOKUYO 3D UST-10/20LX HOKUYO 2D","title":"LiDAR List"},{"location":"07.LiDAR/list/#lidar-list","text":"\u578b\u756a \u30e1\u30fc\u30ab\u30fc \u6b21\u5143 Benewake CE30-D Benewake](http://en.benewake.com/) 3D Velodyne VL16 Velodyne 3D robosense-rs-lidar-16 [RoboSense ](http://www.robosense.ai/) URG-04LX-UG01 HOKUYO 3D YVT-35LX HOKUYO 3D UTM-30LX HOKUYO 3D UST-10/20LX HOKUYO 2D","title":"LiDAR List"}]}