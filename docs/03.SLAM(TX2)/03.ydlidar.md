# TX2にYDLiDAR

## Build

```
$ cd ~/catkin_ws/src
$ git clone https://github.com/EAIBOT/ydlidar.git
$ cd ..
```
 scan_msg.scan_time, scan_msg.time_incrementのフォーマットが合っていないようなので、YDLiDARのIssue[https://github.com/EAIBOT/ydlidar/issues/14](https://github.com/EAIBOT/ydlidar/issues/14)にあがっている修正を実施する。

vi ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp<br>
diffコマンドの結果:<br>
```
diff -u ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org ~/catkin_ws/src/ydlidar/src/ydlidar_node.cpp
--- /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp.org	2019-04-17 11:52:17.775006029 +0900
+++ /home/ubuntu/catkin_ws/src/ydlidar/src/ydlidar_node.cpp	2019-04-17 11:52:32.206993273 +0900
@@ -131,8 +131,8 @@
             scan_msg.angle_min = scan.config.min_angle;
             scan_msg.angle_max = scan.config.max_angle;
             scan_msg.angle_increment = scan.config.ang_increment;
-            scan_msg.scan_time = scan.config.scan_time;
-            scan_msg.time_increment = scan.config.time_increment;
+            scan_msg.scan_time = scan.config.scan_time/1000000000.0;
+            scan_msg.time_increment = scan.config.time_increment/1000000000.0;
             scan_msg.range_min = scan.config.min_range;
             scan_msg.range_max = scan.config.max_range;
```

Build
```
$ cd ~/catkin_ws
$ catkin_make_isolated --install --use-ninja
```

## Add device configration

```
$ sudo ~/catkin_ws/src/ydlidar/startup/initenv.sh
```

